import{A as De,C as Ve,D as Pe,F as Oe,G as ke,H as j,I as z,J as We,g as ge,h as xe,i as fe,k as be,m as he,n as Ce,o as ve,p as we,q as ye,r as Ie,s as L,t as Re,u as Te,w as Me,x as Be,z as Fe}from"./chunk-655YDVQQ.js";import{e as $e}from"./chunk-OOTXM5O4.js";import{A as pe,N as _e,O as ue,b as le,c as de,j as ce,v as me,x as se}from"./chunk-H6EUTKON.js";import"./chunk-PFEDVX7Q.js";import{$b as M,Ab as t,Bb as n,Be as Ee,Cb as S,Ce as Se,Db as h,Eb as C,Ed as ae,Gb as y,Hc as U,Hd as re,Ib as E,Ic as Y,Jb as c,Jc as J,Pb as D,Qb as V,Rb as P,Rc as X,Sc as Z,Tc as ee,Ub as I,Uc as te,Vb as i,Wb as g,Xa as l,Xb as s,_b as T,ab as N,ac as B,cc as Q,dc as O,fc as W,gb as A,gc as q,gd as ne,ha as f,ia as b,jc as m,jd as ie,kb as x,kc as w,lc as u,mc as G,oc as R,od as oe,qb as H,qc as K,rb as p,tb as $}from"./chunk-JCSDOWBG.js";import{a as k}from"./chunk-EQDQRRRY.js";var He=["filtroInput"],je=["nombreNuevoRef"],Ae=()=>["detail"],Qe=()=>[10,20,50,100],qe=(a,r,e)=>({"fa-sort":a,"fa-sort-amount-down":r,"fa-sort-amount-up-alt":e}),ze=(a,r)=>({"text-success":a,"text-danger":r}),Ne=()=>[],Ge=(a,r)=>({"text-success":a,"text-negativo":r});function Ke(a,r){if(a&1){let e=y();t(0,"button",45),E("click",function(){f(e);let d=c();return b(d.limpiarFiltro())}),S(1,"fa-icon",46),n()}if(a&2){let e=c();p("disabled",e.cargando),l(),p("icon",e.faTimes)}}function Ue(a,r){if(a&1){let e=y();h(0),t(1,"button",47),E("click",function(){f(e);let d=c();return b(d.empezarAgregar())}),S(2,"fa-icon",46),i(3," Agregar "),n(),C()}if(a&2){let e=c();l(),p("disabled",e.cargando),l(),p("icon",e.faPlus)}}function Ye(a,r){if(a&1){let e=y();t(0,"button",48),E("click",function(){f(e);let d=c();return b(d.cancelarAgregar())}),S(1,"fa-icon",46),n(),t(2,"button",49),E("click",function(){f(e);let d=c();return b(d.agregarCliente())}),t(3,"mat-icon"),i(4,"save"),n()()}if(a&2){let e=c();p("disabled",e.cargando),l(),p("icon",e.faTimes),l(),p("disabled",!e.validoNuevo()||e.cargando)}}function Je(a,r){a&1&&(t(0,"th",50),i(1,"Nombre"),n())}function Xe(a,r){if(a&1&&(h(0),i(1),C()),a&2){let e=c().$implicit;l(),s(" ",e.nombre," ")}}function Ze(a,r){if(a&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let _=c().$implicit;return M(_.nombre,d)||(_.nombre=d),b(d)}),n()}if(a&2){let e=c().$implicit;T("ngModel",e.nombre)}}function et(a,r){if(a&1&&(t(0,"td",51),x(1,Xe,2,1,"ng-container",29)(2,Ze,1,1,"ng-template",null,3,R),n()),a&2){let e=r.$implicit,o=I(3),d=c();l(),p("ngIf",d.editandoId!==e._id)("ngIfElse",o)}}function tt(a,r){a&1&&(t(0,"th",50),i(1,"Tel\xE9fono"),n())}function nt(a,r){if(a&1&&(h(0),i(1),C()),a&2){let e=c().$implicit;l(),s(" ",e.telefono," ")}}function it(a,r){if(a&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let _=c().$implicit;return M(_.telefono,d)||(_.telefono=d),b(d)}),n()}if(a&2){let e=c().$implicit;T("ngModel",e.telefono)}}function ot(a,r){if(a&1&&(t(0,"td",51),x(1,nt,2,1,"ng-container",29)(2,it,1,1,"ng-template",null,4,R),n()),a&2){let e=r.$implicit,o=I(3),d=c();l(),p("ngIf",d.editandoId!==e._id)("ngIfElse",o)}}function at(a,r){a&1&&(t(0,"th",50),i(1,"Email"),n())}function rt(a,r){if(a&1&&(h(0),i(1),C()),a&2){let e=c().$implicit;l(),s(" ",e.email," ")}}function lt(a,r){if(a&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let _=c().$implicit;return M(_.email,d)||(_.email=d),b(d)}),n()}if(a&2){let e=c().$implicit;T("ngModel",e.email)}}function dt(a,r){if(a&1&&(t(0,"td",51),x(1,rt,2,1,"ng-container",29)(2,lt,1,1,"ng-template",null,5,R),n()),a&2){let e=r.$implicit,o=I(3),d=c();l(),p("ngIf",d.editandoId!==e._id)("ngIfElse",o)}}function ct(a,r){a&1&&(t(0,"th",50),i(1,"Domicilio"),n())}function mt(a,r){if(a&1&&(h(0),i(1),C()),a&2){let e=c().$implicit;l(),s(" ",e.domicilio," ")}}function st(a,r){if(a&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let _=c().$implicit;return M(_.domicilio,d)||(_.domicilio=d),b(d)}),n()}if(a&2){let e=c().$implicit;T("ngModel",e.domicilio)}}function pt(a,r){if(a&1&&(t(0,"td",51),x(1,mt,2,1,"ng-container",29)(2,st,1,1,"ng-template",null,6,R),n()),a&2){let e=r.$implicit,o=I(3),d=c();l(),p("ngIf",d.editandoId!==e._id)("ngIfElse",o)}}function _t(a,r){if(a&1){let e=y();t(0,"button",56),E("click",function(){f(e);let d=c(2);return b(d.clearSort())}),S(1,"i",57),n()}if(a&2){let e=c(2);p("disabled",e.cargando)}}function ut(a,r){if(a&1){let e=y();t(0,"th",50),i(1," Monedero "),t(2,"button",53),E("click",function(){f(e);let d=c();return b(d.toggleMonederoSort())}),S(3,"i",54),n(),x(4,_t,2,1,"button",55),n()}if(a&2){let e=c();l(2),p("disabled",e.cargando),l(),p("ngClass",q(3,qe,e.sortBy!=="totalMonedero",e.sortBy==="totalMonedero"&&e.sortDir==="desc",e.sortBy==="totalMonedero"&&e.sortDir==="asc")),l(),p("ngIf",e.sortBy==="totalMonedero")}}function gt(a,r){if(a&1&&(t(0,"td",51),i(1),m(2,"currency"),n()),a&2){let e=r.$implicit;l(),s(" ",w(2,1,e.totalMonedero)," ")}}function xt(a,r){a&1&&(t(0,"th",50),i(1,"Acciones"),n())}function ft(a,r){if(a&1){let e=y();h(0),t(1,"button",58),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.toggleSubtabla(d,"ventas"))}),S(2,"fa-icon",46),n(),t(3,"button",59),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.toggleSubtabla(d,"devoluciones"))}),S(4,"fa-icon",46),n(),t(5,"button",60),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.toggleSubtabla(d,"pedidos"))}),S(6,"fa-icon",46),n(),t(7,"button",61),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.toggleSubtabla(d,"cancelaciones"))}),S(8,"i",57),n(),t(9,"button",62),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.toggleSubtabla(d,"monedero"))}),S(10,"i",63),n(),t(11,"button",64),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.iniciarEdicion(d))}),S(12,"i",65),n(),C()}a&2&&(l(2),p("icon","cash-register"),l(2),p("icon","undo"),l(2),p("icon","shopping-cart"))}function bt(a,r){if(a&1){let e=y();t(0,"button",66),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.guardarEdicion(d))}),S(1,"fa-icon",46),n(),t(2,"button",67),E("click",function(){f(e);let d=c().$implicit,_=c();return b(_.cancelarEdicion(d))}),S(3,"fa-icon",46),n()}if(a&2){let e=c(2);l(),p("icon",e.faSave),l(2),p("icon",e.faTimes)}}function ht(a,r){if(a&1&&(t(0,"td",51),x(1,ft,13,3,"ng-container",29)(2,bt,4,2,"ng-template",null,2,R),n()),a&2){let e=r.$implicit,o=I(3),d=c();l(),p("ngIf",d.editandoId!==e._id)("ngIfElse",o)}}function Ct(a,r){if(a&1&&(t(0,"div",92),i(1),n()),a&2){let e=c().$implicit;l(),s(" CB: ",e.codigoBarras||(e.producto==null?null:e.producto.codigoBarras)," ")}}function vt(a,r){if(a&1&&(t(0,"tr")(1,"td"),i(2),x(3,Ct,2,1,"div",91),n(),t(4,"td",73),i(5),m(6,"number"),n(),t(7,"td",73),i(8),m(9,"number"),n(),t(10,"td",73),i(11),m(12,"number"),n(),t(13,"td"),i(14),n(),t(15,"td",73),i(16),m(17,"number"),n(),t(18,"td",73),i(19),m(20,"number"),n(),t(21,"td",73),i(22),m(23,"number"),n(),t(24,"td",73),i(25),m(26,"number"),n(),t(27,"td",73),i(28),m(29,"number"),n(),t(30,"td",73),i(31),m(32,"number"),n(),t(33,"td",73),i(34),m(35,"number"),n()()),a&2){let e=r.$implicit;l(2),s(" ",e.nombre||(e.producto==null?null:e.producto.nombre)||""," "),l(),p("ngIf",e.codigoBarras||(e.producto==null?null:e.producto.codigoBarras)),l(2),g(w(6,13,e.cantidad)),l(3),s("$",u(9,15,e.precio,"1.2-2"),""),l(3),s("$",u(12,18,e.precio,"1.2-2"),""),l(3),g(e.tipoDescuento||"Cliente"),l(2),s(" ",e.descuento?u(17,21,100*(e.descuento/(e.precio||1)),"1.0-0")+"%":"\u2014"," "),l(3),s("$",u(20,24,e.monederoCliente||0,"1.2-2"),""),l(3),s("$",u(23,27,e.descuento||0,"1.2-2"),""),l(3),s("$",u(26,30,e.costo||0,"1.2-2")," "),l(3),s(" $",u(29,33,(e.totalRen||0)-(e.costo||0),"1.2-2")," "),l(3),s(" ",(e.costo||0)>0?u(32,36,((e.totalRen||0)-(e.costo||0))/(e.costo||1)*100,"1.0-2")+"%":"\u2014"," "),l(3),s("$",u(35,39,e.totalRen,"1.2-2"),"")}}function Et(a,r){if(a&1&&(t(0,"tr",82)(1,"td",83)(2,"div",84)(3,"table",85)(4,"thead")(5,"tr")(6,"th"),i(7,"Producto"),n(),t(8,"th",73),i(9,"Cant."),n(),t(10,"th",73),i(11,"P. U."),n(),t(12,"th",73),i(13,"Imp. normal"),n(),t(14,"th"),i(15,"Promo"),n(),t(16,"th",73),i(17,"% desc"),n(),t(18,"th",73),i(19,"Monedero"),n(),t(20,"th",73),i(21,"Desc."),n(),t(22,"th",73),i(23,"Costo"),n(),t(24,"th",73),i(25,"Utilidad"),n(),t(26,"th",73),i(27,"% Gan."),n(),t(28,"th",73),i(29,"Total"),n()()(),t(30,"tbody"),x(31,vt,36,42,"tr",86),n()(),t(32,"div",87)(33,"span",88),i(34,"Forma de pago:"),n(),t(35,"span",89),i(36,"Efectivo:"),n(),t(37,"span",90),i(38),m(39,"number"),n(),t(40,"span",89),i(41,"Tarjeta:"),n(),t(42,"span",90),i(43),m(44,"number"),n(),t(45,"span",89),i(46,"Transferencia:"),n(),t(47,"span",90),i(48),m(49,"number"),n(),t(50,"span",89),i(51,"Monedero:"),n(),t(52,"span",90),i(53),m(54,"number"),n()()()()()),a&2){let e=c().$implicit;l(31),p("ngForOf",e.productos||O(17,Ne)),l(7),s("$",u(39,5,(e.formaPago==null?null:e.formaPago.efectivo)||0,"1.2-2"),""),l(5),s("$",u(44,8,(e.formaPago==null?null:e.formaPago.tarjeta)||0,"1.2-2"),""),l(5),s("$",u(49,11,(e.formaPago==null?null:e.formaPago.transferencia)||0,"1.2-2"),""),l(5),s("$",u(54,14,(e.formaPago==null?null:e.formaPago.vale)||0,"1.2-2"),"")}}function St(a,r){if(a&1){let e=y();h(0),t(1,"tr")(2,"td",72)(3,"button",75),E("click",function(){let d=f(e).$implicit,_=c(4);return b(_.toggleDetalleVenta(d,_.expandedRow))}),t(4,"span"),i(5,"\u25B8"),n()()(),t(6,"td"),i(7),n(),t(8,"td"),i(9),n(),t(10,"td"),i(11),m(12,"date"),n(),t(13,"td"),i(14),n(),t(15,"td",73),i(16),m(17,"number"),n(),t(18,"td",76),i(19),m(20,"number"),n(),t(21,"td",77),i(22),m(23,"number"),n(),t(24,"td",78),i(25),m(26,"number"),n(),t(27,"td",79),i(28),m(29,"number"),n(),t(30,"td",73),i(31),m(32,"number"),n(),t(33,"td",80),i(34),m(35,"number"),n()(),x(36,Et,55,18,"tr",81),C()}if(a&2){let e=r.$implicit,o=c(4);l(4),$("open",o.subVentaOpen[o.expandedRow]===e._id),l(3),g(e.farmaciaNombre),l(2),g(e.usuarioNombre),l(2),g(u(12,15,e.fecha,"dd/MM/yyyy HH:mm")||""),l(3),g(e.folio),l(2),g(w(17,18,e.numProductos)),l(3),s("$",u(20,20,e.alMonedero,"1.2-2"),""),l(3),s("$",u(23,23,e.descuento,"1.2-2"),""),l(3),s("$",u(26,26,e.costo,"1.2-2"),""),l(2),p("ngClass",W(38,ze,(e.utilidad||0)>=0,(e.utilidad||0)<0)),l(),s(" $",u(29,29,e.utilidad,"1.2-2")," "),l(3),s(" ",e.gananciaPct==null?"\u2014":u(32,32,e.gananciaPct,"1.0-2")+"%"," "),l(3),s("$",u(35,35,e.total,"1.2-2"),""),l(2),p("ngIf",o.subVentaOpen[o.expandedRow]===e._id)}}function wt(a,r){if(a&1&&(t(0,"tfoot")(1,"tr"),S(2,"th",72),t(3,"th",93),i(4,"Totales:"),n(),S(5,"th"),t(6,"th",73),i(7),m(8,"number"),n(),t(9,"th",76),i(10),m(11,"number"),n(),t(12,"th",77),i(13),m(14,"number"),n(),t(15,"th",78),i(16),m(17,"number"),n(),t(18,"th",79),i(19),m(20,"number"),n(),S(21,"th"),t(22,"th",80),i(23),m(24,"number"),n()()()),a&2){let e=c(4);l(7),g(w(8,7,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].numProductos)),l(3),s("$",u(11,9,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].alMonedero,"1.2-2"),""),l(3),s("$",u(14,12,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].descuento,"1.2-2"),""),l(3),s("$",u(17,15,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].costo,"1.2-2"),""),l(2),p("ngClass",W(24,ze,((e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].utilidad)||0)>=0,((e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].utilidad)||0)<0)),l(),s(" $",u(20,18,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].utilidad,"1.2-2")," "),l(4),s("$",u(24,21,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].total,"1.2-2")," ")}}function yt(a,r){if(a&1&&(h(0),t(1,"div",69),i(2),n(),t(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th",72),i(8,"Det."),n(),t(9,"th"),i(10,"Farmacia"),n(),t(11,"th"),i(12,"Vendi\xF3"),n(),t(13,"th"),i(14,"Fecha"),n(),t(15,"th"),i(16,"Folio"),n(),t(17,"th",73),i(18,"# Prod."),n(),t(19,"th",73),i(20,"Al moned."),n(),t(21,"th",73),i(22,"Descuento"),n(),t(23,"th",73),i(24,"Costo"),n(),t(25,"th",73),i(26,"Utilidad"),n(),t(27,"th",73),i(28,"% Gan."),n(),t(29,"th",73),i(30,"Total"),n()()(),t(31,"tbody"),x(32,St,37,41,"ng-container",74),n(),x(33,wt,25,27,"tfoot",43),n()(),C()),a&2){let e=c(2).$implicit,o=c();l(2),s("Compras de: ",e.nombre,""),l(30),p("ngForOf",o.subRows[o.expandedRow])("ngForTrackBy",o.trackVentaBy),l(),p("ngIf",o.subFooter[o.expandedRow])}}function It(a,r){if(a&1&&(h(0),x(1,yt,34,4,"ng-container",29),C()),a&2){let e;c();let o=I(7),d=c();l(),p("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",o)}}function Rt(a,r){if(a&1&&(t(0,"tr",82)(1,"td",94)(2,"div",84)(3,"table",85)(4,"thead")(5,"tr")(6,"th",95),i(7),n(),t(8,"th",95),i(9),m(10,"currency"),n()()(),t(11,"tbody")(12,"tr")(13,"td",96),i(14),m(15,"currency"),n(),t(16,"td",96),i(17),m(18,"currency"),n()(),t(19,"tr")(20,"td"),i(21,"Efectivo:"),n(),t(22,"td"),i(23),m(24,"currency"),n(),t(25,"td"),i(26,"Efectivo:"),n(),t(27,"td"),i(28),m(29,"currency"),n()(),t(30,"tr")(31,"td"),i(32,"Tarjeta:"),n(),t(33,"td"),i(34),m(35,"currency"),n(),t(36,"td"),i(37,"Tarjeta:"),n(),t(38,"td"),i(39),m(40,"currency"),n()(),t(41,"tr")(42,"td"),i(43,"Transferencia:"),n(),t(44,"td"),i(45),m(46,"currency"),n(),t(47,"td"),i(48,"Transferencia:"),n(),t(49,"td"),i(50),m(51,"currency"),n()(),t(52,"tr")(53,"td"),i(54,"Monedero:"),n(),t(55,"td"),i(56),m(57,"currency"),n(),t(58,"td"),i(59,"Monedero"),n(),t(60,"td"),i(61),m(62,"currency"),n()(),t(63,"tr")(64,"td",97),i(65,"Levant\xF3:"),n(),t(66,"td",95),i(67),n(),t(68,"td",97),i(69),m(70,"date"),n()()()(),t(71,"div",87)(72,"span",88),i(73," Forma de pago: "),n(),t(74,"span",89),i(75,"Efectivo:"),n(),t(76,"span",90),i(77),m(78,"number"),n(),t(79,"span",89),i(80,"Tarjeta:"),n(),t(81,"span",90),i(82),m(83,"number"),n(),t(84,"span",89),i(85,"Transferencia:"),n(),t(86,"span",90),i(87),m(88,"number"),n(),t(89,"span",89),i(90,"Monedero:"),n(),t(91,"span",90),i(92),m(93,"number"),n()()()()()),a&2){let e=c().$implicit;l(7),s("Estado: ",e.estado,""),l(2),s("Precio: ",w(10,18,e.precio),""),l(5),s("Anticipo: ",w(15,20,e.aCuenta),""),l(3),s("Resta: ",w(18,22,e.resta),""),l(6),g(w(24,24,e.formasPago.anticipo.efectivo)),l(5),g(w(29,26,e.formasPago.resta.efectivo)),l(6),g(w(35,28,e.formasPago.anticipo.tarjeta)),l(5),g(w(40,30,e.formasPago.resta.tarjeta)),l(6),s("",w(46,32,e.formasPago.anticipo.transferencia)," "),l(5),g(w(51,34,e.formasPago.resta.transferencia)),l(6),g(w(57,36,e.formasPago.anticipo.vale)),l(5),g(w(62,38,e.formasPago.resta.vale)),l(6),g(e.usuarioPidio),l(2),s("",G(70,40,e.fechaPedido,"dd/MM/yyyy","America/Mexico_City")," "),l(8),s("$",u(78,44,e.formasPago.anticipo.efectivo+e.formasPago.resta.efectivo||0,"1.2-2"),""),l(5),s("$",u(83,47,e.formasPago.anticipo.tarjeta+e.formasPago.resta.tarjeta||0,"1.2-2"),""),l(5),s("$",u(88,50,e.formasPago.anticipo.transferencia+e.formasPago.resta.transferencia||0,"1.2-2"),""),l(5),s("$",u(93,53,e.formasPago.anticipo.vale+e.formasPago.resta.vale||0,"1.2-2"),"")}}function Tt(a,r){if(a&1){let e=y();h(0),t(1,"tr")(2,"td",72)(3,"button",75),E("click",function(){let d=f(e).$implicit,_=c(4);return b(_.toggleDetallePedido(d,_.expandedRow))}),t(4,"span"),i(5,"\u25B8"),n()()(),t(6,"td"),i(7),n(),t(8,"td"),i(9),n(),t(10,"td"),i(11),m(12,"date"),n(),t(13,"td"),i(14),n(),t(15,"td"),i(16),n(),t(17,"td",73),i(18),m(19,"number"),n(),t(20,"td",73),i(21),m(22,"number"),n(),t(23,"td",76),i(24),m(25,"number"),n(),t(26,"td",78),i(27),m(28,"number"),n(),t(29,"td",78),i(30),m(31,"number"),n(),t(32,"td",78),i(33),m(34,"number"),n(),t(35,"td",78),i(36),m(37,"number"),n()(),x(38,Rt,94,56,"tr",81),C()}if(a&2){let e=r.$implicit,o=c(4);l(4),$("open",o.subPedidoOpen[o.expandedRow]===e._id),l(3),g(e.farmacia),l(2),g(e.folio),l(2),g(u(12,15,e.fechaPedido,"dd/MM/yyyy HH:mm")||""),l(3),g(e.descripcion),l(2),g(e.estado),l(2),s("$",u(19,18,e.costo,"1.2-2"),""),l(3),s("$",u(22,21,e.precio,"1.2-2"),""),l(3),s("$",u(25,24,e.aCuenta,"1.2-2"),""),l(3),s("$",u(28,27,e.resta,"1.2-2"),""),l(3),s("$",u(31,30,e.precio-e.resta,"1.2-2")," "),l(3),s("$",u(34,33,e.precio-e.resta-e.costo,"1.2-2"),""),l(3),s(" ",e.costo>0?u(37,36,(e.precio-e.resta-e.costo)/e.costo*100,"1.0-2")+"%":"100%"," "),l(2),p("ngIf",o.subPedidoOpen[o.expandedRow]===e._id)}}function Mt(a,r){if(a&1&&(h(0),t(1,"div",69),i(2),n(),t(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th"),i(8,"Det."),n(),t(9,"th"),i(10,"Farmacia"),n(),t(11,"th"),i(12,"Folio"),n(),t(13,"th"),i(14,"F. pedido"),n(),t(15,"th"),i(16,"Descripci\xF3n"),n(),t(17,"th"),i(18,"Estado"),n(),t(19,"th"),i(20,"Costo"),n(),t(21,"th"),i(22,"Precio"),n(),t(23,"th"),i(24,"A cuenta"),n(),t(25,"th"),i(26,"Resta"),n(),t(27,"th"),i(28,"Tot. Ingreso"),n(),t(29,"th"),i(30,"Utilidad"),n(),t(31,"th"),i(32,"% Gan"),n()()(),t(33,"tbody"),x(34,Tt,39,39,"ng-container",74),n()()(),C()),a&2){let e=c(2).$implicit,o=c();l(2),s("Pedidos de: ",e.nombre,""),l(32),p("ngForOf",o.subRows[o.expandedRow])("ngForTrackBy",o.trackPedidoBy)}}function Bt(a,r){if(a&1&&(h(0),x(1,Mt,35,3,"ng-container",29),C()),a&2){let e;c();let o=I(9),d=c();l(),p("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",o)}}function Ft(a,r){if(a&1&&(t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),n(),t(7,"td",73),i(8),m(9,"number"),n(),t(10,"td",78),i(11),m(12,"number"),n()()),a&2){let e=r.$implicit;l(2),g(e.producto||""),l(2),g(e.codigoBarras||""),l(2),g(e.motivo||""),l(2),g(w(9,5,e.cantidad)),l(3),s("$",u(12,7,e.devuelto,"1.2-2"),"")}}function Dt(a,r){if(a&1&&(t(0,"tr",82)(1,"td",98)(2,"div",84)(3,"table",85)(4,"thead")(5,"tr")(6,"th"),i(7,"Producto"),n(),t(8,"th"),i(9,"C\xF3digo Barras"),n(),t(10,"th"),i(11,"Motivo"),n(),t(12,"th",73),i(13,"Cant."),n(),t(14,"th",73),i(15,"Total"),n()()(),t(16,"tbody"),x(17,Ft,13,10,"tr",86),n()()()()()),a&2){let e=c().$implicit;l(17),p("ngForOf",e.productos||O(1,Ne))}}function Vt(a,r){if(a&1){let e=y();h(0),t(1,"tr")(2,"td",72)(3,"button",75),E("click",function(){let d=f(e).$implicit,_=c(4);return b(_.toggleDetalleDevolucion(d,_.expandedRow))}),t(4,"span"),i(5,"\u25B8"),n()()(),t(6,"td"),i(7),n(),t(8,"td"),i(9),n(),t(10,"td"),i(11),m(12,"date"),n(),t(13,"td"),i(14),n(),t(15,"td",78),i(16),m(17,"number"),n(),t(18,"td",78),i(19),m(20,"number"),n(),t(21,"td",78),i(22),m(23,"number"),n()(),x(24,Dt,18,2,"tr",81),C()}if(a&2){let e=r.$implicit,o=c(4);l(4),$("open",o.subDevolucionOpen[o.expandedRow]===e._id),l(3),g(e.farmacia),l(2),g(e.usuario),l(2),g(u(12,10,e.fecha,"dd/MM/yyyy HH:mm")||""),l(3),g(e.ventaFolio),l(2),s("$",u(17,13,e.dineroDevuelto,"1.2-2"),""),l(3),s("$",u(20,16,e.valeDevuelto,"1.2-2"),""),l(3),s("$",u(23,19,e.totalDevuelto,"1.2-2"),""),l(2),p("ngIf",o.subDevolucionOpen[o.expandedRow]===e._id)}}function Pt(a,r){if(a&1&&(h(0),t(1,"div",69),i(2),n(),t(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th",72),i(8,"Det."),n(),t(9,"th"),i(10,"Farmacia"),n(),t(11,"th"),i(12,"Devolvi\xF3"),n(),t(13,"th"),i(14,"Fecha Dev."),n(),t(15,"th"),i(16,"Folio venta"),n(),t(17,"th",73),i(18,"Efectivo"),n(),t(19,"th",73),i(20,"Monedero"),n(),t(21,"th",73),i(22,"Total"),n()()(),t(23,"tbody"),x(24,Vt,25,22,"ng-container",74),n()()(),C()),a&2){let e=c(2).$implicit,o=c();l(2),s("Devoluciones de: ",e.nombre,""),l(22),p("ngForOf",o.subRows[o.expandedRow])("ngForTrackBy",o.trackDevolucionBy)}}function Ot(a,r){if(a&1&&(h(0),x(1,Pt,25,3,"ng-container",29),C()),a&2){let e;c();let o=I(11),d=c();l(),p("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",o)}}function kt(a,r){if(a&1&&(h(0),t(1,"tr")(2,"td"),i(3),n(),t(4,"td"),i(5),n(),t(6,"td"),i(7),m(8,"date"),n(),t(9,"td"),i(10),n(),t(11,"td",78),i(12),m(13,"number"),n(),t(14,"td",78),i(15),m(16,"number"),n(),t(17,"td",78),i(18),m(19,"number"),n()(),C()),a&2){let e=r.$implicit;l(3),g(e.farmacia),l(2),g(e.usuario),l(2),g(u(8,7,e.fechaCancelacion,"dd/MM/yyyy HH:mm")||""),l(3),g(e.pedidoFolio),l(2),s("$",u(13,10,e.dineroDevuelto,"1.2-2"),""),l(3),s("$",u(16,13,e.valeDevuelto,"1.2-2"),""),l(3),s("$",u(19,16,e.totalDevuelto,"1.2-2"),"")}}function $t(a,r){if(a&1&&(h(0),t(1,"div",69),i(2),n(),t(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th"),i(8,"Farmacia"),n(),t(9,"th"),i(10,"Cancel\xF3"),n(),t(11,"th"),i(12,"Fecha Canc."),n(),t(13,"th"),i(14,"Folio pedido"),n(),t(15,"th",73),i(16,"Efectivo"),n(),t(17,"th",73),i(18,"Monedero"),n(),t(19,"th",73),i(20,"Total"),n()()(),t(21,"tbody"),x(22,kt,20,19,"ng-container",74),n()()(),C()),a&2){let e=c(2).$implicit,o=c();l(2),s("Cancelaciones de: ",e.nombre,""),l(20),p("ngForOf",o.subRows[o.expandedRow])("ngForTrackBy",o.trackCancelacionBy)}}function Wt(a,r){if(a&1&&(h(0),x(1,$t,23,3,"ng-container",29),C()),a&2){let e;c();let o=I(13),d=c();l(),p("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",o)}}function Lt(a,r){if(a&1&&(h(0),t(1,"tr")(2,"td"),i(3),n(),t(4,"td"),i(5),m(6,"date"),n(),t(7,"td"),i(8),n(),t(9,"td",76),i(10),m(11,"number"),n(),t(12,"td",78),i(13),m(14,"number"),n(),t(15,"td",79),i(16),m(17,"number"),n()(),C()),a&2){let e=r.$implicit;l(3),g(e.farmacia),l(2),g(u(6,7,e.fecha,"dd/MM/yyyy HH:mm")||""),l(3),g(e.motivo),l(2),s("$",u(11,10,e.ingreso,"1.2-2"),""),l(3),s("$",u(14,13,e.egreso,"1.2-2"),""),l(2),p("ngClass",W(19,Ge,e.ingreso-e.egreso>=0,e.ingreso-e.egreso<0)),l(),s(" $",u(17,16,e.ingreso-e.egreso,"1.2-2")," ")}}function zt(a,r){if(a&1&&(h(0),t(1,"div",69),i(2),n(),t(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th"),i(8,"Farmacia"),n(),t(9,"th"),i(10,"Fecha Movimiento"),n(),t(11,"th"),i(12,"Motivo"),n(),t(13,"th",73),i(14,"Ingreso"),n(),t(15,"th",73),i(16,"Egreso"),n(),t(17,"th",73),i(18,"Balance"),n()()(),t(19,"tbody"),x(20,Lt,18,22,"ng-container",74),n()()(),C()),a&2){let e=c(2).$implicit,o=c();l(2),s("Movimientos del monedero de: ",e.nombre,""),l(18),p("ngForOf",o.subRows[o.expandedRow])("ngForTrackBy",o.trackMonederoBy)}}function Nt(a,r){if(a&1&&(h(0),x(1,zt,21,3,"ng-container",29),C()),a&2){let e;c();let o=I(15),d=c();l(),p("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",o)}}function Ht(a,r){a&1&&(t(0,"div",99),i(1," Sin compras en el rango seleccionado. "),n())}function jt(a,r){a&1&&(t(0,"div",99),i(1," Sin pedidos en el rango seleccionado. "),n())}function At(a,r){a&1&&(t(0,"div",99),i(1," Sin devoluciones en el rango seleccionado. "),n())}function Qt(a,r){a&1&&(t(0,"div",99),i(1," Sin cancelaciones en el rango seleccionado. "),n())}function qt(a,r){a&1&&(t(0,"div",99),i(1," Sin movimientos en monedero. "),n())}function Gt(a,r){if(a&1&&(t(0,"td",51),x(1,It,2,2,"ng-container",43)(2,Bt,2,2,"ng-container",43)(3,Ot,2,2,"ng-container",43)(4,Wt,2,2,"ng-container",43)(5,Nt,2,2,"ng-container",43)(6,Ht,2,0,"ng-template",68,7,R)(8,jt,2,0,"ng-template",68,8,R)(10,At,2,0,"ng-template",68,9,R)(12,Qt,2,0,"ng-template",68,10,R)(14,qt,2,0,"ng-template",68,11,R),n()),a&2){let e=r.$implicit,o=c();H("colspan",o.displayedColumns.length),l(),p("ngIf",o.expandedRow===e._id+"_ventas"),l(),p("ngIf",o.expandedRow===e._id+"_pedidos"),l(),p("ngIf",o.expandedRow===e._id+"_devoluciones"),l(),p("ngIf",o.expandedRow===e._id+"_cancelaciones"),l(),p("ngIf",o.expandedRow===e._id+"_monedero")}}function Kt(a,r){a&1&&S(0,"tr",100)}function Ut(a,r){a&1&&S(0,"tr",101)}function Yt(a,r){a&1&&S(0,"tr",101)}function Jt(a,r){if(a&1&&(t(0,"tr")(1,"td",102),i(2," Sin resultados "),n()()),a&2){let e=c();l(),H("colspan",e.displayedColumns.length)}}function Xt(){let a=new j;return a.itemsPerPageLabel="Clientes por p\xE1gina:",a.nextPageLabel="Siguiente",a.previousPageLabel="Anterior",a.firstPageLabel="Inicio",a.lastPageLabel="Fin",a.getRangeLabel=(r,e,o)=>{if(o===0||e===0)return`0 de ${o}`;let d=r*e+1,_=Math.min(d+e-1,o);return`${d} \u2013 ${_} de ${o}`},a}var Le=class a{constructor(r,e){this.clienteSrv=r;this.cdr=e;this.subFetchers={ventas:(o,d)=>this.clienteSrv.ventas(o,d),pedidos:(o,d)=>this.clienteSrv.pedidos(o,d),devoluciones:(o,d)=>this.clienteSrv.devoluciones(o,d),cancelaciones:(o,d)=>this.clienteSrv.cancelaciones(o,d),monedero:(o,d)=>this.clienteSrv.monedero(o,d)}}faEdit=ce;faSave=pe;faTimes=ue;faEye=se;faPlus=_e;faWallet=me;clientes=[];filtro="";page=1;limit=20;totalDocs=0;editandoId=null;nuevoCliente={nombre:"",telefono:"",email:"",domicilio:""};expandedRow=null;subRows={};subFooter={};cargando=!1;agregando=!1;paginacion={total:0,page:1,limit:20};fechaIni="";fechaFin="";lastExpandedKey=null;displayedColumns=["nombre","telefono","email","domicilio","monedero","acciones"];paginator;filtroInput;nombreNuevoRef;table;flashId=null;errorMsg="";subVentaOpen={};subPedidoOpen={};subDevolucionOpen={};subCancelacionOpen={};subMonederoOpen={};trackVentaBy(r,e){return e._id}trackPedidoBy(r,e){return e._id}trackDevolucionBy(r,e){return e._id}trackCancelacionBy(r,e){return e._id}trackMonederoBy(r,e){return e._id}isDetailRow=(r,e)=>{if(!this.expandedRow)return!1;let o=this.expandedRow.split("_")[0];return e&&e._id===o};trackById=(r,e)=>e?._id??r;subFetchers;toLocalISODate(r){return new Date(r.getTime()-r.getTimezoneOffset()*6e4).toISOString().slice(0,10)}setFechasPorDefecto(){let r=new Date,e=new Date(r.getFullYear(),r.getMonth(),1);this.fechaIni=this.toLocalISODate(e),this.fechaFin=this.toLocalISODate(r)}isSubEmpty(r){if(!r)return!1;let e=this.subRows[r];return Array.isArray(e)&&e.length===1&&e[0]?.__empty__===!0}getFechaFinExclusiveISO(){return this.fechaFin}ngOnInit(){this.setFechasPorDefecto(),this.buscar()}onChangeFechas(){let r=this.expandedRow;if(!r)return;let[e]=r.split("_"),o=r.endsWith("_ventas")?"ventas":r.endsWith("_pedidos")?"pedidos":r.endsWith("_devoluciones")?"devoluciones":r.endsWith("_cancelaciones")?"cancelaciones":r.endsWith("_monedero")?"monedero":null;o&&(this.subRows[r]=[],delete this.subFooter[r],this.subVentaOpen[r]=null,this.subPedidoOpen[r]=null,this.subDevolucionOpen[r]=null,this.fetchSubtabla(e,o,r))}buscar(){this.cargando=!0;let r={q:this.filtro,page:this.page,limit:this.limit},e=this.sortBy==="totalMonedero"?{sortBy:"totalMonedero",sortDir:this.sortDir}:{};this.clienteSrv.listar(k(k({},r),e)).subscribe({next:o=>{let d=o?.rows??[],_=o?.paginacion?.total??0,v=o?.paginacion?.page??this.page,F=o?.paginacion?.limit??this.limit;this.clientes=d,this.paginacion={total:_,page:v,limit:F},this.totalDocs=_,this.cargando=!1,this.table?.renderRows?.()},error:o=>{this.clientes=[],this.paginacion={total:0,page:1,limit:this.limit},this.totalDocs=0,this.cargando=!1}})}sortBy="nombre";sortDir="asc";toggleMonederoSort(){this.sortBy!=="totalMonedero"?(this.sortBy="totalMonedero",this.sortDir="desc"):this.sortDir=this.sortDir==="desc"?"asc":"desc",this.page=1,this.buscar()}clearSort(){this.sortBy="nombre",this.sortDir="asc",this.page=1,this.buscar()}cambioPagina(r){let e=r.pageSize!==this.limit;this.limit=r.pageSize,this.page=e?1:r.pageIndex+1,this.expandedRow&&(delete this.subRows[this.expandedRow],delete this.subFooter[this.expandedRow],delete this.subVentaOpen[this.expandedRow],delete this.subPedidoOpen[this.expandedRow],delete this.subDevolucionOpen[this.expandedRow],this.expandedRow=null),this.buscar()}iniciarEdicion(r){this.editandoId=r._id,r._backup=k({},r)}EDITABLE_KEYS=["nombre","telefono","email","domicilio"];cancelarEdicion(r){this.EDITABLE_KEYS.forEach(e=>{r._backup&&Object.prototype.hasOwnProperty.call(r._backup,e)?r[e]=r._backup[e]:delete r[e]}),delete r._backup,this.editandoId=null,this.clientes=[...this.clientes],this.table?.renderRows?.(),this.flashId=r._id,setTimeout(()=>this.flashId=null,1200)}guardarEdicion(r){this.clienteSrv.actualizar(r._id,{nombre:r.nombre,telefono:r.telefono,email:r.email,domicilio:r.domicilio}).subscribe(()=>{this.editandoId=null,delete r._backup})}empezarAgregar(){this.agregando=!0,this.nuevoCliente={nombre:"",telefono:"",email:"",domicilio:""},setTimeout(()=>this.nombreNuevoRef?.nativeElement?.focus(),0)}cancelarAgregar(){this.agregando=!1,this.nuevoCliente={nombre:"",telefono:"",email:"",domicilio:""}}solo10Digitos(){this.nuevoCliente.telefono=(this.nuevoCliente.telefono||"").replace(/\D/g,"").slice(0,10)}validoNuevo(){let r=(this.nuevoCliente.nombre||"").trim(),e=this.nuevoCliente.telefono||"";return!!r&&/^\d{10}$/.test(e)}agregarCliente(){this.validoNuevo()&&(this.cargando=!0,this.clienteSrv.crear({nombre:this.nuevoCliente.nombre.trim(),telefono:this.nuevoCliente.telefono}).subscribe({next:()=>{this.cargando=!1,this.cancelarAgregar(),this.page=1,this.buscar()},error:()=>{this.cargando=!1}}))}toggleSubtabla(r,e){let o=`${r._id}_${e}`;if(this.expandedRow===o){this.expandedRow=null,delete this.subRows[o],delete this.subFooter[o],delete this.subVentaOpen[o],delete this.subPedidoOpen[o],delete this.subDevolucionOpen[o],delete this.subCancelacionOpen[o],delete this.subMonederoOpen[o],this.table?.renderRows(),this.cdr.detectChanges();return}this.expandedRow&&(delete this.subRows[this.expandedRow],delete this.subFooter[this.expandedRow],delete this.subVentaOpen[this.expandedRow],delete this.subPedidoOpen[this.expandedRow],delete this.subDevolucionOpen[this.expandedRow],delete this.subCancelacionOpen[this.expandedRow],delete this.subMonederoOpen[this.expandedRow]),this.expandedRow=o,this.subVentaOpen[o]=null,this.subPedidoOpen[o]=null,this.subDevolucionOpen[o]=null,this.subCancelacionOpen[o]=null,this.subMonederoOpen[o]=null,this.table?.renderRows(),this.cdr.detectChanges(),this.fetchSubtabla(r._id,e,o)}fetchSubtabla(r,e,o){let d=this.subFetchers[e],_={page:1,limit:20};this.fechaIni&&(_.fechaIni=this.fechaIni),this.fechaFin&&(_.fechaFin=this.fechaFin),d(r,_).subscribe({next:v=>{let F=v?.rows??[];F.length===0?(this.subRows[o]=[],delete this.subFooter[o],this.subVentaOpen[o]=null,this.subPedidoOpen[o]=null,this.subDevolucionOpen[o]=null,this.subCancelacionOpen[o]=null,this.subMonederoOpen[o]=null):(this.subRows[o]=F,this.subFooter[o]=v?.footer??null,console.log("sub tabla",F),console.log("footer"),v.footer),this.table?.renderRows(),this.cdr.detectChanges()},error:v=>{this.subRows[o]=[],delete this.subFooter[o],this.subVentaOpen[o]=null,this.subPedidoOpen[o]=null,this.subDevolucionOpen[o]=null,this.subCancelacionOpen[o]=null,this.subMonederoOpen[o]=null,this.table?.renderRows(),this.cdr.detectChanges()}})}toggleDetalleVenta(r,e){this.subVentaOpen[e]===r._id?this.subVentaOpen[e]=null:this.subVentaOpen[e]=r._id,this.cdr.detectChanges()}toggleDetallePedido(r,e){this.subPedidoOpen[e]===r._id?this.subPedidoOpen[e]=null:this.subPedidoOpen[e]=r._id,this.cdr.detectChanges()}toggleDetalleDevolucion(r,e){this.subDevolucionOpen[e]===r._id?this.subDevolucionOpen[e]=null:this.subDevolucionOpen[e]=r._id,this.cdr.detectChanges()}toggleDetalleCancelacion(r,e){this.subCancelacionOpen[e]===r._id?this.subCancelacionOpen[e]=null:this.subCancelacionOpen[e]=r._id,this.cdr.detectChanges()}toggleDetalleMonedero(r,e){this.subMonederoOpen[e]===r._id?this.subMonederoOpen[e]=null:this.subMonederoOpen[e]=r._id,this.cdr.detectChanges()}limpiarFiltro(){this.filtro="",this.page=1,this.buscar(),setTimeout(()=>this.filtroInput?.nativeElement.focus(),0)}static \u0275fac=function(e){return new(e||a)(N(we),N(K))};static \u0275cmp=A({type:a,selectors:[["app-clientes"]],viewQuery:function(e,o){if(e&1&&(D(z,5),D(He,5),D(je,5),D(L,5)),e&2){let d;V(d=P())&&(o.paginator=d.first),V(d=P())&&(o.filtroInput=d.first),V(d=P())&&(o.nombreNuevoRef=d.first),V(d=P())&&(o.table=d.first)}},features:[Q([{provide:j,useFactory:Xt}])],decls:60,vars:26,consts:[["filtroInput",""],["nombreNuevoRef",""],["editBtns",""],["editNombre",""],["editTel",""],["editEmail",""],["editDom",""],["sinCompras",""],["sinPedidos",""],["sinDevoluciones",""],["sinCancelaciones",""],["sinMonedero",""],[1,"titulo",2,"text-align","center"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["appearance","outline",1,"filtro-nombre",2,"width","18rem"],["matInput","",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","aria-label","Limpiar filtro","class","btn-icon-chico btn-sm btn-light position-absolute top-50 end-0 translate-middle-y btn-rojo-chico","style","width: 40px; height: 40px;",3,"disabled","click",4,"ngIf"],["align","end"],[1,"fechas-movs",2,"margin-top","-1rem"],[1,"lbl"],[1,"fechas-row"],["type","date",3,"ngModelChange","change","ngModel","max"],[1,"sep"],["type","date",3,"ngModelChange","change","ngModel","min"],[1,"add-row","d-flex","items-center","gap-3","justify-end"],["appearance","outline",2,"width","18rem"],["matInput","","matInput","",3,"ngModelChange","keydown.enter","ngModel","disabled"],["appearance","outline",2,"width","10rem"],["matInput","","inputmode","numeric","maxlength","10",3,"ngModelChange","input","keydown.enter","ngModel","disabled"],[4,"ngIf","ngIfElse"],["mat-table","","multiTemplateDataRows","",1,"tabla",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","telefono"],["matColumnDef","email"],["matColumnDef","domicilio"],["matColumnDef","monedero"],["matColumnDef","acciones"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","",4,"matRowDef","matRowDefColumns","matRowDefWhen"],[4,"ngIf"],[1,"paginator-custom",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],["matSuffix","","aria-label","Limpiar filtro",1,"btn-icon-chico","btn-sm","btn-light","position-absolute","top-50","end-0","translate-middle-y","btn-rojo-chico",2,"width","40px","height","40px",3,"click","disabled"],[3,"icon"],["matTooltip","Agregar un cliente nuevo",1,"btn-gris",2,"height","3rem",3,"click","disabled"],["matTooltip","Cancelar",1,"btn-icon-chico","btn-rojo-chico",2,"font-size","larger","height","3rem","width","3rem",3,"click","disabled"],["matTooltip","Guardar",1,"btn-icon-chico","btn-gris-chico",2,"font-size","larger","height","3rem","width","3rem",3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],["matInput","",3,"ngModelChange","ngModel"],["type","button","matTooltip","Ordenar por monedero",1,"btn-orden",3,"click","disabled"],[1,"fas",3,"ngClass"],["class","btn-orden limpiar","type","button","matTooltip","Quitar orden",3,"disabled","click",4,"ngIf"],["type","button","matTooltip","Quitar orden",1,"btn-orden","limpiar",3,"click","disabled"],[1,"fas","fa-times"],["matTooltip","Compras",1,"btn-icon-chico","btn-gris-chico",3,"click"],["matTooltip","Devoluciones de compras",1,"btn-icon-chico","btn-amarillo-chico",3,"click"],["matTooltip","Pedidos",1,"btn-icon-chico","btn-verde-chico",3,"click"],["matTooltip","Cancelaciones de pedidos",1,"btn-icon-chico","btn-rojo-chico",3,"click"],["matTooltip","Movimientos del monedero",1,"btn-icon-chico","btn-monedero",3,"click"],[1,"fas","fa-wallet"],["matTooltip","Editar datos cliente",1,"btn-icon-chico","btn-editar",3,"click"],[1,"fas","fa-edit"],["matTooltip","Grabar cambios",1,"btn-icon-chico","btn-verde-chico",3,"click"],["matTooltip","Cancelar edici\xF3n",1,"btn-icon-chico","btn-cancelar-edicion",3,"click"],[1,"subtabla-vacia"],[1,"sub-title-tabla"],[1,"detalle-tabla-wrapper"],[1,"detalle-tabla"],[1,"col-det"],[1,"text-end"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-det",3,"click"],[1,"text-end","text-success"],[1,"text-end","text-muted"],[1,"text-end","text-negativo"],[1,"text-end",3,"ngClass"],[1,"text-end","fw-600"],["class","venta-detail",4,"ngIf"],[1,"venta-detail"],["colspan","12",1,"no-pad"],[1,"subdetalle"],[1,"subdetalle-tabla"],[4,"ngFor","ngForOf"],[1,"forma-pago"],[2,"margin-right","3rem","color","rgb(255, 199, 110)"],[2,"margin-right","1rem"],[1,"forma-pago-cantidad",2,"margin-right","3rem"],["class","cb",4,"ngIf"],[1,"cb"],["colspan","3",1,"text-end"],["colspan","100",1,"no-pad"],["colspan","2"],["colspan","2",1,"sub-title-tabla"],["colspan","1"],["colspan","8",1,"no-pad"],[1,"subtabla-vacia","text-center"],["mat-header-row",""],["mat-row",""],[1,"text-center","text-muted","p-2"]],template:function(e,o){if(e&1){let d=y();t(0,"h2",12),i(1,"Mantenimiento y consultas de Clientes"),n(),t(2,"div",13)(3,"mat-form-field",14)(4,"mat-label"),i(5,"Buscar por nombre"),n(),t(6,"input",15,0),B("ngModelChange",function(v){return f(d),M(o.filtro,v)||(o.filtro=v),b(v)}),E("keyup.enter",function(){return f(d),b(o.buscar())}),n(),x(8,Ke,2,2,"button",16),t(9,"mat-hint",17),i(10,"Ingresa nombre y enter p/buscar"),n()(),t(11,"div",18)(12,"label",19),i(13,"Fechas de los movimientos"),n(),t(14,"div",20)(15,"input",21),B("ngModelChange",function(v){return f(d),M(o.fechaIni,v)||(o.fechaIni=v),b(v)}),E("change",function(){return f(d),b(o.onChangeFechas())}),n(),t(16,"span",22),i(17,"\u2014"),n(),t(18,"input",23),B("ngModelChange",function(v){return f(d),M(o.fechaFin,v)||(o.fechaFin=v),b(v)}),E("change",function(){return f(d),b(o.onChangeFechas())}),n()()(),t(19,"div",24)(20,"mat-form-field",25)(21,"mat-label"),i(22,"Nombre"),n(),t(23,"input",26,1),B("ngModelChange",function(v){return f(d),M(o.nuevoCliente.nombre,v)||(o.nuevoCliente.nombre=v),b(v)}),E("keydown.enter",function(){return f(d),b(o.agregarCliente())}),n()(),t(25,"mat-form-field",27)(26,"mat-label"),i(27,"Tel\xE9fono"),n(),t(28,"input",28),B("ngModelChange",function(v){return f(d),M(o.nuevoCliente.telefono,v)||(o.nuevoCliente.telefono=v),b(v)}),E("input",function(){return f(d),b(o.solo10Digitos())})("keydown.enter",function(){return f(d),b(o.agregarCliente())}),n(),t(29,"mat-hint",17),i(30),n()(),x(31,Ue,4,2,"ng-container",29)(32,Ye,5,3,"ng-template",null,2,R),n()(),t(34,"table",30),h(35,31),x(36,Je,2,0,"th",32)(37,et,4,2,"td",33),C(),h(38,34),x(39,tt,2,0,"th",32)(40,ot,4,2,"td",33),C(),h(41,35),x(42,at,2,0,"th",32)(43,dt,4,2,"td",33),C(),h(44,36),x(45,ct,2,0,"th",32)(46,pt,4,2,"td",33),C(),h(47,37),x(48,ut,5,7,"th",32)(49,gt,3,3,"td",33),C(),h(50,38),x(51,xt,2,0,"th",32)(52,ht,4,2,"td",33),C(),h(53,39),x(54,Gt,16,6,"td",33),C(),x(55,Kt,1,0,"tr",40)(56,Ut,1,0,"tr",41)(57,Yt,1,0,"tr",42)(58,Jt,3,1,"tr",43),n(),t(59,"mat-paginator",44),E("page",function(v){return f(d),b(o.cambioPagina(v))}),n()}if(e&2){let d=I(33);l(6),T("ngModel",o.filtro),l(2),p("ngIf",o.filtro),l(7),T("ngModel",o.fechaIni),p("max",o.fechaFin),l(3),T("ngModel",o.fechaFin),p("min",o.fechaIni),l(5),T("ngModel",o.nuevoCliente.nombre),p("disabled",!o.agregando||o.cargando),l(5),T("ngModel",o.nuevoCliente.telefono),p("disabled",!o.agregando||o.cargando),l(2),s("",(o.nuevoCliente.telefono||"").length,"/10"),l(),p("ngIf",!o.agregando)("ngIfElse",d),l(3),p("dataSource",o.clientes),l(21),p("matHeaderRowDef",o.displayedColumns),l(),p("matRowDefColumns",o.displayedColumns),l(),p("matRowDefColumns",O(24,Ae))("matRowDefWhen",o.isDetailRow),l(),p("ngIf",!o.cargando&&((o.clientes==null?null:o.clientes.length)||0)===0),l(),p("length",o.paginacion.total||0)("pageSize",o.limit)("pageIndex",o.page-1)("pageSizeOptions",O(25,Qe))("showFirstLastButtons",!0)}},dependencies:[te,U,Y,J,Z,ee,X,re,ne,ie,ae,oe,ke,L,Te,De,Me,Re,Ve,Be,Fe,Pe,Oe,We,z,he,be,ge,xe,fe,ve,Ce,$e,Ie,ye,de,le,Se,Ee],styles:[`.tabla{width:100%}.subtabla-vacia,.text-negativo{color:red!important}.sub-row{background:#f9f9f9}.lbl{color:#2e04fe;font-size:large}.mat-form-field{min-width:160px}.btn-monedero{font-size:small;font-weight:400;padding:3px;border-radius:6px;background:linear-gradient(45deg,#fc7813,#fcd30a);color:#00f}.btn-monedero:hover{background:linear-gradient(45deg,#a7f944,#fc7813);box-shadow:0 4px 8px #ffcc0080;color:#fff}.btn-monedero:disabled{cursor:not-allowed;opacity:.6}.btn-monedero[disabled]:hover{background:linear-gradient(45deg,#a7f944,#fc7813);box-shadow:none;color:#000}.btn-editar{font-size:small;font-weight:400;padding:3px;border-radius:6px;background:linear-gradient(45deg,#fcd30a,#13fc1f);color:#333131}.btn-editar:hover{background:linear-gradient(45deg,#13fc1f,#fcd30a);box-shadow:0 4px 8px #ffcc0080;color:red}.btn-editar:disabled{cursor:not-allowed;opacity:.6}.btn-editar[disabled]:hover{background:linear-gradient(45deg,#a7f944,#fc7813);box-shadow:none;color:#000}.btn-cancelar-edicion{font-size:small;font-weight:400;padding:3px;border-radius:6px;background:linear-gradient(45deg,orange,red);color:#00f}.btn-cancelar-edicion:hover{background:linear-gradient(45deg,red,orange);box-shadow:0 4px 8px #a8870180;color:#fff}.btn-cancelar-edicion:disabled{cursor:not-allowed;opacity:.6}.btn-cancelar-edicion[disabled]:hover{background:gray;box-shadow:none;color:#000}.paginator-custom .mat-mdc-paginator{background:#f5fbff;box-shadow:0 2px 6px #0000000f}.restore-flash td{animation:flashRestore 1.2s ease-out}.forma-pago{padding:4px;background:#2e04fe!important;text-align:center;font-size:large;color:#fff}.forma-pago-cantidad{color:#e1fcc0}@keyframes flashRestore{0%{background:#fff7cc}30%{background:#ffef99}to{background:transparent}}.paginator-custom .mat-mdc-paginator-container,.paginator-custom .mat-mdc-paginator-page-size,.paginator-custom .mat-mdc-paginator-range-actions{display:flex;align-items:center;gap:4px}.paginator-custom .mat-mdc-paginator-page-size-label,.paginator-custom .mat-mdc-paginator-range-label{font-size:1.3rem;color:#8a2be2;line-height:1}.paginator-custom .mat-mdc-icon-button{width:3.25rem;height:3.25rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .15s ease,transform .05s}.paginator-custom .mat-mdc-icon-button:hover{background:#8a2be2}.paginator-custom .mat-mdc-icon-button:active{transform:translateY(1px)}.paginator-custom .mat-mdc-paginator-icon{fill:#0ff;width:3.25rem;height:3.25rem}.paginator-custom .mat-mdc-paginator-range-actions .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:#cbd5e1}.paginator-custom{background-color:#fbdddd}.paginator-custom .mat-mdc-paginator-page-size .mat-mdc-select-trigger,.paginator-custom .mat-mdc-paginator-page-size .mat-mdc-select-value-text{font-size:1.3rem;color:#8a2be2;line-height:1.1}.btn-orden{border:0;background:transparent;padding:0 .25rem;cursor:pointer}.btn-orden:disabled{opacity:.5;cursor:default}.btn-orden.limpiar{margin-left:.25rem}
`],encapsulation:2})};export{Le as ClientesComponent,Xt as paginatorEs};
