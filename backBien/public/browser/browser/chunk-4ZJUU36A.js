import{a as K}from"./chunk-XY2IWGS7.js";import{a as X}from"./chunk-JKGFMHHD.js";import{D as R,L as U,a as j,b as B,c as L,p as $,w as q}from"./chunk-KMUVBBJD.js";import"./chunk-DD56TSNY.js";import{$b as k,Cd as D,Db as h,Dd as z,Ec as A,Ed as G,Fb as m,Fc as S,Gb as p,Qc as y,Rb as l,Sb as b,Tb as x,Ua as n,Za as _,cd as I,db as C,dd as w,fa as u,fd as M,ga as v,gd as F,hb as P,hd as T,ld as N,ob as d,pd as V,qb as f,sd as O,we as H,xb as r,xe as J,yb as t,zb as c}from"./chunk-NJCU4XLP.js";import{e as W}from"./chunk-EQDQRRRY.js";var g=W(X());var Y=()=>[];function Z(s,i){if(s&1){let e=h();r(0,"tr")(1,"td"),l(2),t(),r(3,"td"),l(4),t(),r(5,"td"),l(6),t(),r(7,"td"),l(8),t(),r(9,"td")(10,"button",25),m("click",function(){let a=u(e).$implicit,E=p();return v(E.editar(a))}),c(11,"fa-icon",3),t()()()}if(s&2){let e=i.$implicit;n(2),b(e.nombre),n(2),b(e.contacto||"-"),n(2),b(e.telefono||"-"),n(2),b(e.domicilio||"-"),n(3),d("icon","pen")}}function ee(s,i){if(s&1){let e=h();r(0,"li",28)(1,"button",38),m("click",function(){let a=u(e).index,E=p(2);return v(E.paginaActual=a+1)}),l(2),t()()}if(s&2){let e=i.index,o=p(2);n(),f("activo",o.paginaActual===e+1),n(),x(" ",e+1," ")}}function te(s,i){if(s&1){let e=h();r(0,"nav",26)(1,"ul",27)(2,"li",28)(3,"button",29),m("click",function(){u(e);let a=p();return v(a.paginaActual=1)}),c(4,"i",30),t()(),r(5,"li",28)(6,"button",31),m("click",function(){u(e);let a=p();return v(a.paginaActual=a.paginaActual-1)}),c(7,"i",32),t()(),P(8,ee,3,3,"li",33),r(9,"li",28)(10,"button",34),m("click",function(){u(e);let a=p();return v(a.paginaActual=a.paginaActual+1)}),c(11,"i",35),t()(),r(12,"li",28)(13,"button",36),m("click",function(){u(e);let a=p();return v(a.paginaActual=a.totalPaginas)}),c(14,"i",37),t()()()()}if(s&2){let e=p();n(2),f("disabled",e.paginaActual===1),n(),d("disabled",e.paginaActual===1),n(2),f("disabled",e.paginaActual===1),n(),d("disabled",e.paginaActual===1),n(2),d("ngForOf",k(13,Y).constructor(e.totalPaginas)),n(),f("disabled",e.paginaActual===e.totalPaginas),n(),d("disabled",e.paginaActual===e.totalPaginas),n(2),f("disabled",e.paginaActual===e.totalPaginas),n(),d("disabled",e.paginaActual===e.totalPaginas)}}var Q=class s{constructor(i,e,o){this.fb=i;this.proveedorService=e;this.library=o;o.addIcons(q,U,R,$)}proveedores=[];formProveedor=new T({});modoEdicion=!1;proveedorEditandoId=null;guardando=!1;paginaActual=1;proveedoresPorPagina=15;ordenAscendente=!0;ngOnInit(){this.formProveedor=this.fb.group({nombre:["",w.required],contacto:[""],telefono:[""],domicilio:[""]}),this.cargarProveedores()}cargarProveedores(){this.proveedorService.obtenerProveedores().subscribe({next:i=>this.proveedores=i,error:()=>g.default.fire("Error","No se pudieron cargar los proveedores","error")})}get proveedoresPaginados(){let i=(this.paginaActual-1)*this.proveedoresPorPagina;return this.proveedores.slice(i,i+this.proveedoresPorPagina)}get totalPaginas(){return Math.ceil(this.proveedores.length/this.proveedoresPorPagina)}ordenarPorNombre(){this.ordenAscendente=!this.ordenAscendente,this.proveedores.sort((i,e)=>{let o=i.nombre.toLowerCase(),a=e.nombre.toLowerCase();return this.ordenAscendente?o.localeCompare(a):a.localeCompare(o)}),this.paginaActual=1}abrirModalAgregar(){this.modoEdicion=!1,this.proveedorEditandoId=null,this.formProveedor.reset();let i=document.getElementById("modalProveedor");i&&new bootstrap.Modal(i,{backdrop:"static",keyboard:!1}).show()}editar(i){this.modoEdicion=!0,this.proveedorEditandoId=i._id||null,this.formProveedor.patchValue({nombre:i.nombre,contacto:i.contacto||"",telefono:i.telefono||"",domicilio:i.domicilio||""});let e=document.getElementById("modalProveedor");e&&new bootstrap.Modal(e,{backdrop:"static",keyboard:!1}).show()}guardar(){if(this.formProveedor.invalid||this.guardando)return;this.guardando=!0;let i=this.formProveedor.value,e=()=>{let o=document.getElementById("modalProveedor");o&&bootstrap.Modal.getInstance(o)?.hide(),this.formProveedor.reset(),this.cargarProveedores(),this.guardando=!1,this.modoEdicion=!1,this.proveedorEditandoId=null};this.modoEdicion&&this.proveedorEditandoId?this.proveedorService.actualizarProveedor(this.proveedorEditandoId,i).subscribe({next:()=>g.default.fire("Actualizado","Proveedor actualizado","success").then(e),error:()=>{g.default.fire("Error","No se pudo actualizar","error"),this.guardando=!1}}):this.proveedorService.crearProveedor(i).subscribe({next:()=>g.default.fire("Agregado","Proveedor creado","success").then(e),error:()=>{g.default.fire("Error","No se pudo crear","error"),this.guardando=!1}})}static \u0275fac=function(e){return new(e||s)(_(D),_(K),_(j))};static \u0275cmp=C({type:s,selectors:[["app-proveedores"]],decls:54,vars:8,consts:[[1,"container"],[1,"titulo",2,"text-align","center"],["matTooltip","Dar de alta un nuevo proveedor",1,"btn-verde",3,"click"],[3,"icon"],[1,"tabla"],[2,"cursor","pointer",3,"click"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-3",4,"ngIf"],["id","modalProveedor","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","p-3",2,"background-color","azure"],[1,"modal-header"],[1,"modal-title","titulo"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mb-2"],["type","text","formControlName","nombre",1,"form-control"],["type","text","formControlName","contacto",1,"form-control"],["type","text","formControlName","telefono",1,"form-control"],["type","text","formControlName","domicilio",1,"form-control"],[1,"modal-footer","d-flex","justify-content-between"],["data-bs-dismiss","modal",1,"btn-rojo"],[1,"btn-gris",3,"click","disabled"],["matTooltip","Modificar datos del proveedor",1,"btn-icon-chico","btn-gris-chico",3,"click"],[1,"d-flex","justify-content-center","mt-3"],[1,"pagination"],[1,"page-item"],["matTooltip","Inicio",1,"page-link",3,"click","disabled"],[1,"fa","fa-angle-double-left"],["matTooltip","Anterior",1,"page-link",3,"click","disabled"],[1,"fa","fa-angle-left"],["class","page-item",4,"ngFor","ngForOf"],["matTooltip","Siguiente",1,"page-link",3,"click","disabled"],[1,"fa","fa-angle-right"],["matTooltip","Fin",1,"page-link",3,"click","disabled"],[1,"fa","fa-angle-double-right"],[1,"page-link",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h2",1),l(2,"Mantenimiento de Proveedores"),t(),r(3,"button",2),m("click",function(){return o.abrirModalAgregar()}),c(4,"fa-icon",3),l(5," Agregar Proveedor "),t(),r(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),m("click",function(){return o.ordenarPorNombre()}),l(10," Nombre "),c(11,"fa-icon",3),t(),r(12,"th"),l(13,"Contacto"),t(),r(14,"th"),l(15,"Tel\xE9fono"),t(),r(16,"th"),l(17,"Domicilio"),t(),r(18,"th"),l(19,"Acciones"),t()()(),r(20,"tbody"),P(21,Z,12,5,"tr",6),t()(),P(22,te,15,14,"nav",7),t(),r(23,"div",8)(24,"div",9)(25,"div",10)(26,"div",11)(27,"h5",12),l(28),t(),c(29,"button",13),t(),r(30,"div",14)(31,"form",15)(32,"div",16)(33,"div",17)(34,"label"),l(35,"Nombre:"),t(),c(36,"input",18),t(),r(37,"div",17)(38,"label"),l(39,"Contacto:"),t(),c(40,"input",19),t(),r(41,"div",17)(42,"label"),l(43,"Tel\xE9fono:"),t(),c(44,"input",20),t(),r(45,"div",17)(46,"label"),l(47,"Domicilio:"),t(),c(48,"input",21),t()()()(),r(49,"div",22)(50,"button",23),l(51,"Cancelar"),t(),r(52,"button",24),m("click",function(){return o.guardar()}),l(53),t()()()()()),e&2&&(n(4),d("icon","plus"),n(7),d("icon",o.ordenAscendente?"sort-alpha-down":"sort-alpha-up"),n(10),d("ngForOf",o.proveedoresPaginados),n(),d("ngIf",o.totalPaginas>1),n(6),x(" ",o.modoEdicion?"Editar Proveedor":"Agregar Proveedor"," "),n(3),d("formGroup",o.formProveedor),n(21),d("disabled",o.formProveedor.invalid||o.guardando),n(),x(" ",o.guardando?"Guardando...":o.modoEdicion?"Actualizar":"Guardar"," "))},dependencies:[y,A,S,G,N,I,M,F,V,O,z,L,B,J,H],styles:[".pagination[_ngcontent-%COMP%]{text-align:center;font-size:large;font-weight:500;color:#8a2be2}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#0ff;background-color:#8a2be2}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .pagination[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6;color:gray}.pagination[_ngcontent-%COMP%]   button.activo[_ngcontent-%COMP%]{background-color:#fff;color:#8a2be2;font-weight:700;border:2px solid blueviolet;transition:all .3s ease}"]})};export{Q as ProveedoresComponent};
