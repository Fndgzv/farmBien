import{A as Fe,C as De,D as Pe,F as Ve,G as Oe,H,I as W,J as ke,g as ue,h as ge,i as xe,k as fe,m as he,n as be,o as Ce,p as ve,q as we,r as ye,s as k,t as Ie,u as Re,w as Te,x as Me,z as Be}from"./chunk-SEY5KJLS.js";import{e as $e}from"./chunk-CQNPOOD5.js";import{I as se,J as _e,b as re,c as le,h as de,s as ce,t as me,w as pe}from"./chunk-ALLLFA77.js";import{T as Ee,U as Se}from"./chunk-NKYZDFGX.js";import"./chunk-5GLYYB2Q.js";import{Ab as _,Ad as ie,Cb as O,Jb as t,Kb as n,Lb as S,Mb as b,Nb as C,Pb as y,Qd as ae,Rb as E,Sb as c,Sc as K,Tc as U,Td as oe,Uc as Y,Xb as F,Yb as D,Zb as P,a as j,ac as I,ad as J,bc as i,bd as X,cc as g,cd as Z,db as l,dc as p,dd as ee,gc as T,hc as M,ib as z,ic as B,kc as Q,lc as V,nc as $,oa as f,pa as h,pb as A,rc as m,sc as w,sd as te,tb as x,tc as u,uc as q,vd as ne,wc as R,zb as N,zc as G}from"./chunk-N254VGDV.js";var Ne=["filtroInput"],He=["nombreNuevoRef"],je=()=>["detail"],Ae=()=>[10,20,50,100],Le=(o,r)=>({"text-success":o,"text-danger":r}),ze=()=>[],Qe=(o,r)=>({"text-success":o,"text-negativo":r});function qe(o,r){if(o&1){let e=y();t(0,"button",45),E("click",function(){f(e);let d=c();return h(d.limpiarFiltro())}),S(1,"fa-icon",46),n()}if(o&2){let e=c();_("disabled",e.cargando),l(),_("icon",e.faTimes)}}function Ge(o,r){if(o&1){let e=y();b(0),t(1,"button",47),E("click",function(){f(e);let d=c();return h(d.empezarAgregar())}),S(2,"fa-icon",46),i(3," Agregar "),n(),C()}if(o&2){let e=c();l(),_("disabled",e.cargando),l(),_("icon",e.faPlus)}}function Ke(o,r){if(o&1){let e=y();t(0,"button",48),E("click",function(){f(e);let d=c();return h(d.cancelarAgregar())}),S(1,"fa-icon",46),n(),t(2,"button",49),E("click",function(){f(e);let d=c();return h(d.agregarCliente())}),t(3,"mat-icon"),i(4,"save"),n()()}if(o&2){let e=c();_("disabled",e.cargando),l(),_("icon",e.faTimes),l(),_("disabled",!e.validoNuevo()||e.cargando)}}function Ue(o,r){o&1&&(t(0,"th",50),i(1,"Nombre"),n())}function Ye(o,r){if(o&1&&(b(0),i(1),C()),o&2){let e=c().$implicit;l(),p(" ",e.nombre," ")}}function Je(o,r){if(o&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let s=c().$implicit;return M(s.nombre,d)||(s.nombre=d),h(d)}),n()}if(o&2){let e=c().$implicit;T("ngModel",e.nombre)}}function Xe(o,r){if(o&1&&(t(0,"td",51),x(1,Ye,2,1,"ng-container",29)(2,Je,1,1,"ng-template",null,3,R),n()),o&2){let e=r.$implicit,a=I(3),d=c();l(),_("ngIf",d.editandoId!==e._id)("ngIfElse",a)}}function Ze(o,r){o&1&&(t(0,"th",50),i(1,"Tel\xE9fono"),n())}function et(o,r){if(o&1&&(b(0),i(1),C()),o&2){let e=c().$implicit;l(),p(" ",e.telefono," ")}}function tt(o,r){if(o&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let s=c().$implicit;return M(s.telefono,d)||(s.telefono=d),h(d)}),n()}if(o&2){let e=c().$implicit;T("ngModel",e.telefono)}}function nt(o,r){if(o&1&&(t(0,"td",51),x(1,et,2,1,"ng-container",29)(2,tt,1,1,"ng-template",null,4,R),n()),o&2){let e=r.$implicit,a=I(3),d=c();l(),_("ngIf",d.editandoId!==e._id)("ngIfElse",a)}}function it(o,r){o&1&&(t(0,"th",50),i(1,"Email"),n())}function at(o,r){if(o&1&&(b(0),i(1),C()),o&2){let e=c().$implicit;l(),p(" ",e.email," ")}}function ot(o,r){if(o&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let s=c().$implicit;return M(s.email,d)||(s.email=d),h(d)}),n()}if(o&2){let e=c().$implicit;T("ngModel",e.email)}}function rt(o,r){if(o&1&&(t(0,"td",51),x(1,at,2,1,"ng-container",29)(2,ot,1,1,"ng-template",null,5,R),n()),o&2){let e=r.$implicit,a=I(3),d=c();l(),_("ngIf",d.editandoId!==e._id)("ngIfElse",a)}}function lt(o,r){o&1&&(t(0,"th",50),i(1,"Domicilio"),n())}function dt(o,r){if(o&1&&(b(0),i(1),C()),o&2){let e=c().$implicit;l(),p(" ",e.domicilio," ")}}function ct(o,r){if(o&1){let e=y();t(0,"input",52),B("ngModelChange",function(d){f(e);let s=c().$implicit;return M(s.domicilio,d)||(s.domicilio=d),h(d)}),n()}if(o&2){let e=c().$implicit;T("ngModel",e.domicilio)}}function mt(o,r){if(o&1&&(t(0,"td",51),x(1,dt,2,1,"ng-container",29)(2,ct,1,1,"ng-template",null,6,R),n()),o&2){let e=r.$implicit,a=I(3),d=c();l(),_("ngIf",d.editandoId!==e._id)("ngIfElse",a)}}function pt(o,r){o&1&&(t(0,"th",50),i(1,"Monedero"),n())}function st(o,r){if(o&1&&(t(0,"td",51),i(1),m(2,"number"),n()),o&2){let e=r.$implicit;l(),p(" $",u(2,1,e.totalMonedero,"1.2-2")," ")}}function _t(o,r){o&1&&(t(0,"th",50),i(1,"Acciones"),n())}function ut(o,r){if(o&1){let e=y();b(0),t(1,"button",53),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.toggleSubtabla(d,"ventas"))}),S(2,"fa-icon",46),n(),t(3,"button",54),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.toggleSubtabla(d,"devoluciones"))}),S(4,"fa-icon",46),n(),t(5,"button",55),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.toggleSubtabla(d,"pedidos"))}),S(6,"fa-icon",46),n(),t(7,"button",56),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.toggleSubtabla(d,"cancelaciones"))}),S(8,"i",57),n(),t(9,"button",58),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.toggleSubtabla(d,"monedero"))}),S(10,"i",59),n(),t(11,"button",60),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.iniciarEdicion(d))}),S(12,"i",61),n(),C()}o&2&&(l(2),_("icon","cash-register"),l(2),_("icon","undo"),l(2),_("icon","shopping-cart"))}function gt(o,r){if(o&1){let e=y();t(0,"button",62),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.guardarEdicion(d))}),S(1,"fa-icon",46),n(),t(2,"button",63),E("click",function(){f(e);let d=c().$implicit,s=c();return h(s.cancelarEdicion(d))}),S(3,"fa-icon",46),n()}if(o&2){let e=c(2);l(),_("icon",e.faSave),l(2),_("icon",e.faTimes)}}function xt(o,r){if(o&1&&(t(0,"td",51),x(1,ut,13,3,"ng-container",29)(2,gt,4,2,"ng-template",null,2,R),n()),o&2){let e=r.$implicit,a=I(3),d=c();l(),_("ngIf",d.editandoId!==e._id)("ngIfElse",a)}}function ft(o,r){if(o&1&&(t(0,"div",88),i(1),n()),o&2){let e=c().$implicit;l(),p(" CB: ",e.codigoBarras||(e.producto==null?null:e.producto.codigoBarras)," ")}}function ht(o,r){if(o&1&&(t(0,"tr")(1,"td"),i(2),x(3,ft,2,1,"div",87),n(),t(4,"td",69),i(5),m(6,"number"),n(),t(7,"td",69),i(8),m(9,"number"),n(),t(10,"td",69),i(11),m(12,"number"),n(),t(13,"td"),i(14),n(),t(15,"td",69),i(16),m(17,"number"),n(),t(18,"td",69),i(19),m(20,"number"),n(),t(21,"td",69),i(22),m(23,"number"),n(),t(24,"td",69),i(25),m(26,"number"),n(),t(27,"td",69),i(28),m(29,"number"),n(),t(30,"td",69),i(31),m(32,"number"),n(),t(33,"td",69),i(34),m(35,"number"),n()()),o&2){let e=r.$implicit;l(2),p(" ",e.nombre||(e.producto==null?null:e.producto.nombre)||""," "),l(),_("ngIf",e.codigoBarras||(e.producto==null?null:e.producto.codigoBarras)),l(2),g(w(6,13,e.cantidad)),l(3),p("$",u(9,15,e.precio,"1.2-2"),""),l(3),p("$",u(12,18,e.precio,"1.2-2"),""),l(3),g(e.tipoDescuento||"Cliente"),l(2),p(" ",e.descuento?u(17,21,100*(e.descuento/(e.precio||1)),"1.0-0")+"%":"\u2014"," "),l(3),p("$",u(20,24,e.monederoCliente||0,"1.2-2"),""),l(3),p("$",u(23,27,e.descuento||0,"1.2-2"),""),l(3),p("$",u(26,30,e.costo||0,"1.2-2")," "),l(3),p(" $",u(29,33,(e.totalRen||0)-(e.costo||0),"1.2-2")," "),l(3),p(" ",(e.costo||0)>0?u(32,36,((e.totalRen||0)-(e.costo||0))/(e.costo||1)*100,"1.0-2")+"%":"\u2014"," "),l(3),p("$",u(35,39,e.totalRen,"1.2-2"),"")}}function bt(o,r){if(o&1&&(t(0,"tr",78)(1,"td",79)(2,"div",80)(3,"table",81)(4,"thead")(5,"tr")(6,"th"),i(7,"Producto"),n(),t(8,"th",69),i(9,"Cant."),n(),t(10,"th",69),i(11,"P. U."),n(),t(12,"th",69),i(13,"Imp. normal"),n(),t(14,"th"),i(15,"Promo"),n(),t(16,"th",69),i(17,"% desc"),n(),t(18,"th",69),i(19,"Monedero"),n(),t(20,"th",69),i(21,"Desc."),n(),t(22,"th",69),i(23,"Costo"),n(),t(24,"th",69),i(25,"Utilidad"),n(),t(26,"th",69),i(27,"% Gan."),n(),t(28,"th",69),i(29,"Total"),n()()(),t(30,"tbody"),x(31,ht,36,42,"tr",82),n()(),t(32,"div",83)(33,"span",84),i(34,"Forma de pago:"),n(),t(35,"span",85),i(36,"Efectivo:"),n(),t(37,"span",86),i(38),m(39,"number"),n(),t(40,"span",85),i(41,"Tarjeta:"),n(),t(42,"span",86),i(43),m(44,"number"),n(),t(45,"span",85),i(46,"Transferencia:"),n(),t(47,"span",86),i(48),m(49,"number"),n(),t(50,"span",85),i(51,"Monedero:"),n(),t(52,"span",86),i(53),m(54,"number"),n()()()()()),o&2){let e=c().$implicit;l(31),_("ngForOf",e.productos||V(17,ze)),l(7),p("$",u(39,5,(e.formaPago==null?null:e.formaPago.efectivo)||0,"1.2-2"),""),l(5),p("$",u(44,8,(e.formaPago==null?null:e.formaPago.tarjeta)||0,"1.2-2"),""),l(5),p("$",u(49,11,(e.formaPago==null?null:e.formaPago.transferencia)||0,"1.2-2"),""),l(5),p("$",u(54,14,(e.formaPago==null?null:e.formaPago.vale)||0,"1.2-2"),"")}}function Ct(o,r){if(o&1){let e=y();b(0),t(1,"tr")(2,"td",68)(3,"button",71),E("click",function(){let d=f(e).$implicit,s=c(4);return h(s.toggleDetalleVenta(d,s.expandedRow))}),t(4,"span"),i(5,"\u25B8"),n()()(),t(6,"td"),i(7),n(),t(8,"td"),i(9),n(),t(10,"td"),i(11),m(12,"date"),n(),t(13,"td"),i(14),n(),t(15,"td",69),i(16),m(17,"number"),n(),t(18,"td",72),i(19),m(20,"number"),n(),t(21,"td",73),i(22),m(23,"number"),n(),t(24,"td",74),i(25),m(26,"number"),n(),t(27,"td",75),i(28),m(29,"number"),n(),t(30,"td",69),i(31),m(32,"number"),n(),t(33,"td",76),i(34),m(35,"number"),n()(),x(36,bt,55,18,"tr",77),C()}if(o&2){let e=r.$implicit,a=c(4);l(4),O("open",a.subVentaOpen[a.expandedRow]===e._id),l(3),g(e.farmaciaNombre),l(2),g(e.usuarioNombre),l(2),g(u(12,15,e.fecha,"dd/MM/yyyy HH:mm")||""),l(3),g(e.folio),l(2),g(w(17,18,e.numProductos)),l(3),p("$",u(20,20,e.alMonedero,"1.2-2"),""),l(3),p("$",u(23,23,e.descuento,"1.2-2"),""),l(3),p("$",u(26,26,e.costo,"1.2-2"),""),l(2),_("ngClass",$(38,Le,(e.utilidad||0)>=0,(e.utilidad||0)<0)),l(),p(" $",u(29,29,e.utilidad,"1.2-2")," "),l(3),p(" ",e.gananciaPct==null?"\u2014":u(32,32,e.gananciaPct,"1.0-2")+"%"," "),l(3),p("$",u(35,35,e.total,"1.2-2"),""),l(2),_("ngIf",a.subVentaOpen[a.expandedRow]===e._id)}}function vt(o,r){if(o&1&&(t(0,"tfoot")(1,"tr"),S(2,"th",68),t(3,"th",89),i(4,"Totales:"),n(),S(5,"th"),t(6,"th",69),i(7),m(8,"number"),n(),t(9,"th",72),i(10),m(11,"number"),n(),t(12,"th",73),i(13),m(14,"number"),n(),t(15,"th",74),i(16),m(17,"number"),n(),t(18,"th",75),i(19),m(20,"number"),n(),S(21,"th"),t(22,"th",76),i(23),m(24,"number"),n()()()),o&2){let e=c(4);l(7),g(w(8,7,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].numProductos)),l(3),p("$",u(11,9,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].alMonedero,"1.2-2"),""),l(3),p("$",u(14,12,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].descuento,"1.2-2"),""),l(3),p("$",u(17,15,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].costo,"1.2-2"),""),l(2),_("ngClass",$(24,Le,((e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].utilidad)||0)>=0,((e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].utilidad)||0)<0)),l(),p(" $",u(20,18,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].utilidad,"1.2-2")," "),l(4),p("$",u(24,21,e.subFooter[e.expandedRow]==null?null:e.subFooter[e.expandedRow].total,"1.2-2")," ")}}function Et(o,r){if(o&1&&(b(0),t(1,"div",65),i(2),n(),t(3,"div",66)(4,"table",67)(5,"thead")(6,"tr")(7,"th",68),i(8,"Det."),n(),t(9,"th"),i(10,"Farmacia"),n(),t(11,"th"),i(12,"Vendi\xF3"),n(),t(13,"th"),i(14,"Fecha"),n(),t(15,"th"),i(16,"Folio"),n(),t(17,"th",69),i(18,"# Prod."),n(),t(19,"th",69),i(20,"Al moned."),n(),t(21,"th",69),i(22,"Descuento"),n(),t(23,"th",69),i(24,"Costo"),n(),t(25,"th",69),i(26,"Utilidad"),n(),t(27,"th",69),i(28,"% Gan."),n(),t(29,"th",69),i(30,"Total"),n()()(),t(31,"tbody"),x(32,Ct,37,41,"ng-container",70),n(),x(33,vt,25,27,"tfoot",43),n()(),C()),o&2){let e=c(2).$implicit,a=c();l(2),p("Compras de: ",e.nombre,""),l(30),_("ngForOf",a.subRows[a.expandedRow])("ngForTrackBy",a.trackVentaBy),l(),_("ngIf",a.subFooter[a.expandedRow])}}function St(o,r){if(o&1&&(b(0),x(1,Et,34,4,"ng-container",29),C()),o&2){let e;c();let a=I(7),d=c();l(),_("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",a)}}function wt(o,r){if(o&1&&(t(0,"tr",78)(1,"td",90)(2,"div",80)(3,"table",81)(4,"thead")(5,"tr")(6,"th",91),i(7),n(),t(8,"th",91),i(9),m(10,"currency"),n()()(),t(11,"tbody")(12,"tr")(13,"td",92),i(14),m(15,"currency"),n(),t(16,"td",92),i(17),m(18,"currency"),n()(),t(19,"tr")(20,"td"),i(21,"Efectivo:"),n(),t(22,"td"),i(23),m(24,"currency"),n(),t(25,"td"),i(26,"Efectivo:"),n(),t(27,"td"),i(28),m(29,"currency"),n()(),t(30,"tr")(31,"td"),i(32,"Tarjeta:"),n(),t(33,"td"),i(34),m(35,"currency"),n(),t(36,"td"),i(37,"Tarjeta:"),n(),t(38,"td"),i(39),m(40,"currency"),n()(),t(41,"tr")(42,"td"),i(43,"Transferencia:"),n(),t(44,"td"),i(45),m(46,"currency"),n(),t(47,"td"),i(48,"Transferencia:"),n(),t(49,"td"),i(50),m(51,"currency"),n()(),t(52,"tr")(53,"td"),i(54,"Monedero:"),n(),t(55,"td"),i(56),m(57,"currency"),n(),t(58,"td"),i(59,"Monedero"),n(),t(60,"td"),i(61),m(62,"currency"),n()(),t(63,"tr")(64,"td",93),i(65,"Levant\xF3:"),n(),t(66,"td",91),i(67),n(),t(68,"td",93),i(69),m(70,"date"),n()()()(),t(71,"div",83)(72,"span",84),i(73," Forma de pago: "),n(),t(74,"span",85),i(75,"Efectivo:"),n(),t(76,"span",86),i(77),m(78,"number"),n(),t(79,"span",85),i(80,"Tarjeta:"),n(),t(81,"span",86),i(82),m(83,"number"),n(),t(84,"span",85),i(85,"Transferencia:"),n(),t(86,"span",86),i(87),m(88,"number"),n(),t(89,"span",85),i(90,"Monedero:"),n(),t(91,"span",86),i(92),m(93,"number"),n()()()()()),o&2){let e=c().$implicit;l(7),p("Estado: ",e.estado,""),l(2),p("Precio: ",w(10,18,e.precio),""),l(5),p("Anticipo: ",w(15,20,e.aCuenta),""),l(3),p("Resta: ",w(18,22,e.resta),""),l(6),g(w(24,24,e.formasPago.anticipo.efectivo)),l(5),g(w(29,26,e.formasPago.resta.efectivo)),l(6),g(w(35,28,e.formasPago.anticipo.tarjeta)),l(5),g(w(40,30,e.formasPago.resta.tarjeta)),l(6),p("",w(46,32,e.formasPago.anticipo.transferencia)," "),l(5),g(w(51,34,e.formasPago.resta.transferencia)),l(6),g(w(57,36,e.formasPago.anticipo.vale)),l(5),g(w(62,38,e.formasPago.resta.vale)),l(6),g(e.usuarioPidio),l(2),p("",q(70,40,e.fechaPedido,"dd/MM/yyyy","America/Mexico_City")," "),l(8),p("$",u(78,44,e.formasPago.anticipo.efectivo+e.formasPago.resta.efectivo||0,"1.2-2"),""),l(5),p("$",u(83,47,e.formasPago.anticipo.tarjeta+e.formasPago.resta.tarjeta||0,"1.2-2"),""),l(5),p("$",u(88,50,e.formasPago.anticipo.transferencia+e.formasPago.resta.transferencia||0,"1.2-2"),""),l(5),p("$",u(93,53,e.formasPago.anticipo.vale+e.formasPago.resta.vale||0,"1.2-2"),"")}}function yt(o,r){if(o&1){let e=y();b(0),t(1,"tr")(2,"td",68)(3,"button",71),E("click",function(){let d=f(e).$implicit,s=c(4);return h(s.toggleDetallePedido(d,s.expandedRow))}),t(4,"span"),i(5,"\u25B8"),n()()(),t(6,"td"),i(7),n(),t(8,"td"),i(9),n(),t(10,"td"),i(11),m(12,"date"),n(),t(13,"td"),i(14),n(),t(15,"td"),i(16),n(),t(17,"td",69),i(18),m(19,"number"),n(),t(20,"td",69),i(21),m(22,"number"),n(),t(23,"td",72),i(24),m(25,"number"),n(),t(26,"td",74),i(27),m(28,"number"),n(),t(29,"td",74),i(30),m(31,"number"),n(),t(32,"td",74),i(33),m(34,"number"),n(),t(35,"td",74),i(36),m(37,"number"),n()(),x(38,wt,94,56,"tr",77),C()}if(o&2){let e=r.$implicit,a=c(4);l(4),O("open",a.subPedidoOpen[a.expandedRow]===e._id),l(3),g(e.farmacia),l(2),g(e.folio),l(2),g(u(12,15,e.fechaPedido,"dd/MM/yyyy HH:mm")||""),l(3),g(e.descripcion),l(2),g(e.estado),l(2),p("$",u(19,18,e.costo,"1.2-2"),""),l(3),p("$",u(22,21,e.precio,"1.2-2"),""),l(3),p("$",u(25,24,e.aCuenta,"1.2-2"),""),l(3),p("$",u(28,27,e.resta,"1.2-2"),""),l(3),p("$",u(31,30,e.precio-e.resta,"1.2-2")," "),l(3),p("$",u(34,33,e.precio-e.resta-e.costo,"1.2-2"),""),l(3),p(" ",e.costo>0?u(37,36,(e.precio-e.resta-e.costo)/e.costo*100,"1.0-2")+"%":"100%"," "),l(2),_("ngIf",a.subPedidoOpen[a.expandedRow]===e._id)}}function It(o,r){if(o&1&&(b(0),t(1,"div",65),i(2),n(),t(3,"div",66)(4,"table",67)(5,"thead")(6,"tr")(7,"th"),i(8,"Det."),n(),t(9,"th"),i(10,"Farmacia"),n(),t(11,"th"),i(12,"Folio"),n(),t(13,"th"),i(14,"F. pedido"),n(),t(15,"th"),i(16,"Descripci\xF3n"),n(),t(17,"th"),i(18,"Estado"),n(),t(19,"th"),i(20,"Costo"),n(),t(21,"th"),i(22,"Precio"),n(),t(23,"th"),i(24,"A cuenta"),n(),t(25,"th"),i(26,"Resta"),n(),t(27,"th"),i(28,"Tot. Ingreso"),n(),t(29,"th"),i(30,"Utilidad"),n(),t(31,"th"),i(32,"% Gan"),n()()(),t(33,"tbody"),x(34,yt,39,39,"ng-container",70),n()()(),C()),o&2){let e=c(2).$implicit,a=c();l(2),p("Pedidos de: ",e.nombre,""),l(32),_("ngForOf",a.subRows[a.expandedRow])("ngForTrackBy",a.trackPedidoBy)}}function Rt(o,r){if(o&1&&(b(0),x(1,It,35,3,"ng-container",29),C()),o&2){let e;c();let a=I(9),d=c();l(),_("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",a)}}function Tt(o,r){if(o&1&&(t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),n(),t(7,"td",69),i(8),m(9,"number"),n(),t(10,"td",74),i(11),m(12,"number"),n()()),o&2){let e=r.$implicit;l(2),g(e.producto||""),l(2),g(e.codigoBarras||""),l(2),g(e.motivo||""),l(2),g(w(9,5,e.cantidad)),l(3),p("$",u(12,7,e.devuelto,"1.2-2"),"")}}function Mt(o,r){if(o&1&&(t(0,"tr",78)(1,"td",94)(2,"div",80)(3,"table",81)(4,"thead")(5,"tr")(6,"th"),i(7,"Producto"),n(),t(8,"th"),i(9,"C\xF3digo Barras"),n(),t(10,"th"),i(11,"Motivo"),n(),t(12,"th",69),i(13,"Cant."),n(),t(14,"th",69),i(15,"Total"),n()()(),t(16,"tbody"),x(17,Tt,13,10,"tr",82),n()()()()()),o&2){let e=c().$implicit;l(17),_("ngForOf",e.productos||V(1,ze))}}function Bt(o,r){if(o&1){let e=y();b(0),t(1,"tr")(2,"td",68)(3,"button",71),E("click",function(){let d=f(e).$implicit,s=c(4);return h(s.toggleDetalleDevolucion(d,s.expandedRow))}),t(4,"span"),i(5,"\u25B8"),n()()(),t(6,"td"),i(7),n(),t(8,"td"),i(9),n(),t(10,"td"),i(11),m(12,"date"),n(),t(13,"td"),i(14),n(),t(15,"td",74),i(16),m(17,"number"),n(),t(18,"td",74),i(19),m(20,"number"),n(),t(21,"td",74),i(22),m(23,"number"),n()(),x(24,Mt,18,2,"tr",77),C()}if(o&2){let e=r.$implicit,a=c(4);l(4),O("open",a.subDevolucionOpen[a.expandedRow]===e._id),l(3),g(e.farmacia),l(2),g(e.usuario),l(2),g(u(12,10,e.fecha,"dd/MM/yyyy HH:mm")||""),l(3),g(e.ventaFolio),l(2),p("$",u(17,13,e.dineroDevuelto,"1.2-2"),""),l(3),p("$",u(20,16,e.valeDevuelto,"1.2-2"),""),l(3),p("$",u(23,19,e.totalDevuelto,"1.2-2"),""),l(2),_("ngIf",a.subDevolucionOpen[a.expandedRow]===e._id)}}function Ft(o,r){if(o&1&&(b(0),t(1,"div",65),i(2),n(),t(3,"div",66)(4,"table",67)(5,"thead")(6,"tr")(7,"th",68),i(8,"Det."),n(),t(9,"th"),i(10,"Farmacia"),n(),t(11,"th"),i(12,"Devolvi\xF3"),n(),t(13,"th"),i(14,"Fecha Dev."),n(),t(15,"th"),i(16,"Folio venta"),n(),t(17,"th",69),i(18,"Efectivo"),n(),t(19,"th",69),i(20,"Monedero"),n(),t(21,"th",69),i(22,"Total"),n()()(),t(23,"tbody"),x(24,Bt,25,22,"ng-container",70),n()()(),C()),o&2){let e=c(2).$implicit,a=c();l(2),p("Devoluciones de: ",e.nombre,""),l(22),_("ngForOf",a.subRows[a.expandedRow])("ngForTrackBy",a.trackDevolucionBy)}}function Dt(o,r){if(o&1&&(b(0),x(1,Ft,25,3,"ng-container",29),C()),o&2){let e;c();let a=I(11),d=c();l(),_("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",a)}}function Pt(o,r){if(o&1&&(b(0),t(1,"tr")(2,"td"),i(3),n(),t(4,"td"),i(5),n(),t(6,"td"),i(7),m(8,"date"),n(),t(9,"td"),i(10),n(),t(11,"td",74),i(12),m(13,"number"),n(),t(14,"td",74),i(15),m(16,"number"),n(),t(17,"td",74),i(18),m(19,"number"),n()(),C()),o&2){let e=r.$implicit;l(3),g(e.farmacia),l(2),g(e.usuario),l(2),g(u(8,7,e.fechaCancelacion,"dd/MM/yyyy HH:mm")||""),l(3),g(e.pedidoFolio),l(2),p("$",u(13,10,e.dineroDevuelto,"1.2-2"),""),l(3),p("$",u(16,13,e.valeDevuelto,"1.2-2"),""),l(3),p("$",u(19,16,e.totalDevuelto,"1.2-2"),"")}}function Vt(o,r){if(o&1&&(b(0),t(1,"div",65),i(2),n(),t(3,"div",66)(4,"table",67)(5,"thead")(6,"tr")(7,"th"),i(8,"Farmacia"),n(),t(9,"th"),i(10,"Cancel\xF3"),n(),t(11,"th"),i(12,"Fecha Canc."),n(),t(13,"th"),i(14,"Folio pedido"),n(),t(15,"th",69),i(16,"Efectivo"),n(),t(17,"th",69),i(18,"Monedero"),n(),t(19,"th",69),i(20,"Total"),n()()(),t(21,"tbody"),x(22,Pt,20,19,"ng-container",70),n()()(),C()),o&2){let e=c(2).$implicit,a=c();l(2),p("Cancelaciones de: ",e.nombre,""),l(20),_("ngForOf",a.subRows[a.expandedRow])("ngForTrackBy",a.trackCancelacionBy)}}function Ot(o,r){if(o&1&&(b(0),x(1,Vt,23,3,"ng-container",29),C()),o&2){let e;c();let a=I(13),d=c();l(),_("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",a)}}function $t(o,r){if(o&1&&(b(0),t(1,"tr")(2,"td"),i(3),n(),t(4,"td"),i(5),m(6,"date"),n(),t(7,"td"),i(8),n(),t(9,"td",72),i(10),m(11,"number"),n(),t(12,"td",74),i(13),m(14,"number"),n(),t(15,"td",75),i(16),m(17,"number"),n()(),C()),o&2){let e=r.$implicit;l(3),g(e.farmacia),l(2),g(u(6,7,e.fecha,"dd/MM/yyyy HH:mm")||""),l(3),g(e.motivo),l(2),p("$",u(11,10,e.ingreso,"1.2-2"),""),l(3),p("$",u(14,13,e.egreso,"1.2-2"),""),l(2),_("ngClass",$(19,Qe,e.ingreso-e.egreso>=0,e.ingreso-e.egreso<0)),l(),p(" $",u(17,16,e.ingreso-e.egreso,"1.2-2")," ")}}function kt(o,r){if(o&1&&(b(0),t(1,"div",65),i(2),n(),t(3,"div",66)(4,"table",67)(5,"thead")(6,"tr")(7,"th"),i(8,"Farmacia"),n(),t(9,"th"),i(10,"Fecha Movimiento"),n(),t(11,"th"),i(12,"Motivo"),n(),t(13,"th",69),i(14,"Ingreso"),n(),t(15,"th",69),i(16,"Egreso"),n(),t(17,"th",69),i(18,"Balance"),n()()(),t(19,"tbody"),x(20,$t,18,22,"ng-container",70),n()()(),C()),o&2){let e=c(2).$implicit,a=c();l(2),p("Movimientos del monedero de: ",e.nombre,""),l(18),_("ngForOf",a.subRows[a.expandedRow])("ngForTrackBy",a.trackMonederoBy)}}function Wt(o,r){if(o&1&&(b(0),x(1,kt,21,3,"ng-container",29),C()),o&2){let e;c();let a=I(15),d=c();l(),_("ngIf",((e=d.subRows[d.expandedRow]==null?null:d.subRows[d.expandedRow].length)!==null&&e!==void 0?e:0)>0)("ngIfElse",a)}}function Lt(o,r){o&1&&(t(0,"div",95),i(1," Sin compras en el rango seleccionado. "),n())}function zt(o,r){o&1&&(t(0,"div",95),i(1," Sin pedidos en el rango seleccionado. "),n())}function Nt(o,r){o&1&&(t(0,"div",95),i(1," Sin devoluciones en el rango seleccionado. "),n())}function Ht(o,r){o&1&&(t(0,"div",95),i(1," Sin cancelaciones en el rango seleccionado. "),n())}function jt(o,r){o&1&&(t(0,"div",95),i(1," Sin movimientos en monedero. "),n())}function At(o,r){if(o&1&&(t(0,"td",51),x(1,St,2,2,"ng-container",43)(2,Rt,2,2,"ng-container",43)(3,Dt,2,2,"ng-container",43)(4,Ot,2,2,"ng-container",43)(5,Wt,2,2,"ng-container",43)(6,Lt,2,0,"ng-template",64,7,R)(8,zt,2,0,"ng-template",64,8,R)(10,Nt,2,0,"ng-template",64,9,R)(12,Ht,2,0,"ng-template",64,10,R)(14,jt,2,0,"ng-template",64,11,R),n()),o&2){let e=r.$implicit,a=c();N("colspan",a.displayedColumns.length),l(),_("ngIf",a.expandedRow===e._id+"_ventas"),l(),_("ngIf",a.expandedRow===e._id+"_pedidos"),l(),_("ngIf",a.expandedRow===e._id+"_devoluciones"),l(),_("ngIf",a.expandedRow===e._id+"_cancelaciones"),l(),_("ngIf",a.expandedRow===e._id+"_monedero")}}function Qt(o,r){o&1&&S(0,"tr",96)}function qt(o,r){o&1&&S(0,"tr",97)}function Gt(o,r){o&1&&S(0,"tr",97)}function Kt(o,r){if(o&1&&(t(0,"tr")(1,"td",98),i(2," Sin resultados "),n()()),o&2){let e=c();l(),N("colspan",e.displayedColumns.length)}}function Ut(){let o=new H;return o.itemsPerPageLabel="Clientes por p\xE1gina:",o.nextPageLabel="Siguiente",o.previousPageLabel="Anterior",o.firstPageLabel="Primera p\xE1gina",o.lastPageLabel="\xDAltima p\xE1gina",o.getRangeLabel=(r,e,a)=>{if(a===0||e===0)return`0 de ${a}`;let d=r*e+1,s=Math.min(d+e-1,a);return`${d} \u2013 ${s} de ${a}`},o}var We=class o{constructor(r,e){this.clienteSrv=r;this.cdr=e;this.subFetchers={ventas:(a,d)=>this.clienteSrv.ventas(a,d),pedidos:(a,d)=>this.clienteSrv.pedidos(a,d),devoluciones:(a,d)=>this.clienteSrv.devoluciones(a,d),cancelaciones:(a,d)=>this.clienteSrv.cancelaciones(a,d),monedero:(a,d)=>this.clienteSrv.monedero(a,d)}}faEdit=de;faSave=pe;faTimes=_e;faEye=me;faPlus=se;faWallet=ce;clientes=[];filtro="";page=1;limit=20;totalDocs=0;editandoId=null;nuevoCliente={nombre:"",telefono:"",email:"",domicilio:""};expandedRow=null;subRows={};subFooter={};cargando=!1;agregando=!1;paginacion={total:0,page:1,limit:20};fechaIni="";fechaFin="";lastExpandedKey=null;displayedColumns=["nombre","telefono","email","domicilio","monedero","acciones"];paginator;filtroInput;nombreNuevoRef;table;flashId=null;errorMsg="";subVentaOpen={};subPedidoOpen={};subDevolucionOpen={};subCancelacionOpen={};subMonederoOpen={};trackVentaBy(r,e){return e._id}trackPedidoBy(r,e){return e._id}trackDevolucionBy(r,e){return e._id}trackCancelacionBy(r,e){return e._id}trackMonederoBy(r,e){return e._id}isDetailRow=(r,e)=>{if(!this.expandedRow)return!1;let a=this.expandedRow.split("_")[0];return e&&e._id===a};trackById=(r,e)=>e?._id??r;subFetchers;toLocalISODate(r){return new Date(r.getTime()-r.getTimezoneOffset()*6e4).toISOString().slice(0,10)}setFechasPorDefecto(){let r=new Date,e=new Date(r.getFullYear(),r.getMonth(),1);this.fechaIni=this.toLocalISODate(e),this.fechaFin=this.toLocalISODate(r)}isSubEmpty(r){if(!r)return!1;let e=this.subRows[r];return Array.isArray(e)&&e.length===1&&e[0]?.__empty__===!0}getFechaFinExclusiveISO(){return this.fechaFin}ngOnInit(){this.setFechasPorDefecto(),this.buscar()}onChangeFechas(){let r=this.expandedRow;if(!r)return;let[e]=r.split("_"),a=r.endsWith("_ventas")?"ventas":r.endsWith("_pedidos")?"pedidos":r.endsWith("_devoluciones")?"devoluciones":r.endsWith("_cancelaciones")?"cancelaciones":r.endsWith("_monedero")?"monedero":null;a&&(this.subRows[r]=[],delete this.subFooter[r],this.subVentaOpen[r]=null,this.subPedidoOpen[r]=null,this.subDevolucionOpen[r]=null,this.fetchSubtabla(e,a,r))}buscar(){this.cargando=!0,this.clienteSrv.listar({q:this.filtro,page:this.page,limit:this.limit}).subscribe({next:r=>{let e=r?.rows??[],a=r?.paginacion?.total??0,d=r?.paginacion?.page??this.page,s=r?.paginacion?.limit??this.limit;this.clientes=e,this.paginacion={total:a,page:d,limit:s},this.totalDocs=a,this.cargando=!1,this.table?.renderRows?.()},error:r=>{this.clientes=[],this.paginacion={total:0,page:1,limit:this.limit},this.totalDocs=0,this.cargando=!1}})}cambioPagina(r){let e=r.pageSize!==this.limit;this.limit=r.pageSize,this.page=e?1:r.pageIndex+1,this.expandedRow&&(delete this.subRows[this.expandedRow],delete this.subFooter[this.expandedRow],delete this.subVentaOpen[this.expandedRow],delete this.subPedidoOpen[this.expandedRow],delete this.subDevolucionOpen[this.expandedRow],this.expandedRow=null),this.buscar()}iniciarEdicion(r){this.editandoId=r._id,r._backup=j({},r)}EDITABLE_KEYS=["nombre","telefono","email","domicilio"];cancelarEdicion(r){this.EDITABLE_KEYS.forEach(e=>{r._backup&&Object.prototype.hasOwnProperty.call(r._backup,e)?r[e]=r._backup[e]:delete r[e]}),delete r._backup,this.editandoId=null,this.clientes=[...this.clientes],this.table?.renderRows?.(),this.flashId=r._id,setTimeout(()=>this.flashId=null,1200)}guardarEdicion(r){this.clienteSrv.actualizar(r._id,{nombre:r.nombre,telefono:r.telefono,email:r.email,domicilio:r.domicilio}).subscribe(()=>{this.editandoId=null,delete r._backup})}empezarAgregar(){this.agregando=!0,this.nuevoCliente={nombre:"",telefono:"",email:"",domicilio:""},setTimeout(()=>this.nombreNuevoRef?.nativeElement?.focus(),0)}cancelarAgregar(){this.agregando=!1,this.nuevoCliente={nombre:"",telefono:"",email:"",domicilio:""}}solo10Digitos(){this.nuevoCliente.telefono=(this.nuevoCliente.telefono||"").replace(/\D/g,"").slice(0,10)}validoNuevo(){let r=(this.nuevoCliente.nombre||"").trim(),e=this.nuevoCliente.telefono||"";return!!r&&/^\d{10}$/.test(e)}agregarCliente(){this.validoNuevo()&&(this.cargando=!0,this.clienteSrv.crear({nombre:this.nuevoCliente.nombre.trim(),telefono:this.nuevoCliente.telefono}).subscribe({next:()=>{this.cargando=!1,this.cancelarAgregar(),this.page=1,this.buscar()},error:()=>{this.cargando=!1}}))}toggleSubtabla(r,e){let a=`${r._id}_${e}`;if(this.expandedRow===a){this.expandedRow=null,delete this.subRows[a],delete this.subFooter[a],delete this.subVentaOpen[a],delete this.subPedidoOpen[a],delete this.subDevolucionOpen[a],delete this.subCancelacionOpen[a],delete this.subMonederoOpen[a],this.table?.renderRows(),this.cdr.detectChanges();return}this.expandedRow&&(delete this.subRows[this.expandedRow],delete this.subFooter[this.expandedRow],delete this.subVentaOpen[this.expandedRow],delete this.subPedidoOpen[this.expandedRow],delete this.subDevolucionOpen[this.expandedRow],delete this.subCancelacionOpen[this.expandedRow],delete this.subMonederoOpen[this.expandedRow]),this.expandedRow=a,this.subVentaOpen[a]=null,this.subPedidoOpen[a]=null,this.subDevolucionOpen[a]=null,this.subCancelacionOpen[a]=null,this.subMonederoOpen[a]=null,this.table?.renderRows(),this.cdr.detectChanges(),this.fetchSubtabla(r._id,e,a)}fetchSubtabla(r,e,a){let d=this.subFetchers[e],s={page:1,limit:20};this.fechaIni&&(s.fechaIni=this.fechaIni),this.fechaFin&&(s.fechaFin=this.fechaFin),d(r,s).subscribe({next:v=>{let L=v?.rows??[];L.length===0?(this.subRows[a]=[],delete this.subFooter[a],this.subVentaOpen[a]=null,this.subPedidoOpen[a]=null,this.subDevolucionOpen[a]=null,this.subCancelacionOpen[a]=null,this.subMonederoOpen[a]=null):(this.subRows[a]=L,this.subFooter[a]=v?.footer??null,console.log("sub tabla",L),console.log("footer"),v.footer),this.table?.renderRows(),this.cdr.detectChanges()},error:v=>{this.subRows[a]=[],delete this.subFooter[a],this.subVentaOpen[a]=null,this.subPedidoOpen[a]=null,this.subDevolucionOpen[a]=null,this.subCancelacionOpen[a]=null,this.subMonederoOpen[a]=null,this.table?.renderRows(),this.cdr.detectChanges()}})}toggleDetalleVenta(r,e){this.subVentaOpen[e]===r._id?this.subVentaOpen[e]=null:this.subVentaOpen[e]=r._id,this.cdr.detectChanges()}toggleDetallePedido(r,e){this.subPedidoOpen[e]===r._id?this.subPedidoOpen[e]=null:this.subPedidoOpen[e]=r._id,this.cdr.detectChanges()}toggleDetalleDevolucion(r,e){this.subDevolucionOpen[e]===r._id?this.subDevolucionOpen[e]=null:this.subDevolucionOpen[e]=r._id,this.cdr.detectChanges()}toggleDetalleCancelacion(r,e){this.subCancelacionOpen[e]===r._id?this.subCancelacionOpen[e]=null:this.subCancelacionOpen[e]=r._id,this.cdr.detectChanges()}toggleDetalleMonedero(r,e){this.subMonederoOpen[e]===r._id?this.subMonederoOpen[e]=null:this.subMonederoOpen[e]=r._id,this.cdr.detectChanges()}limpiarFiltro(){this.filtro="",this.page=1,this.buscar(),setTimeout(()=>this.filtroInput?.nativeElement.focus(),0)}static \u0275fac=function(e){return new(e||o)(z(ve),z(G))};static \u0275cmp=A({type:o,selectors:[["app-clientes"]],viewQuery:function(e,a){if(e&1&&(F(W,5),F(Ne,5),F(He,5),F(k,5)),e&2){let d;D(d=P())&&(a.paginator=d.first),D(d=P())&&(a.filtroInput=d.first),D(d=P())&&(a.nombreNuevoRef=d.first),D(d=P())&&(a.table=d.first)}},features:[Q([{provide:H,useFactory:Ut}])],decls:60,vars:26,consts:[["filtroInput",""],["nombreNuevoRef",""],["editBtns",""],["editNombre",""],["editTel",""],["editEmail",""],["editDom",""],["sinCompras",""],["sinPedidos",""],["sinDevoluciones",""],["sinCancelaciones",""],["sinMonedero",""],[1,"titulo",2,"text-align","center"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["appearance","outline",1,"filtro-nombre",2,"width","18rem"],["matInput","",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","aria-label","Limpiar filtro","class","btn-icon-chico btn-sm btn-light position-absolute top-50 end-0 translate-middle-y btn-rojo-chico","style","width: 40px; height: 40px;",3,"disabled","click",4,"ngIf"],["align","end"],[1,"fechas-movs",2,"margin-top","-1rem"],[1,"lbl"],[1,"fechas-row"],["type","date",3,"ngModelChange","change","ngModel","max"],[1,"sep"],["type","date",3,"ngModelChange","change","ngModel","min"],[1,"add-row","d-flex","items-center","gap-3","justify-end"],["appearance","outline",2,"width","18rem"],["matInput","","matInput","",3,"ngModelChange","keydown.enter","ngModel","disabled"],["appearance","outline",2,"width","10rem"],["matInput","","inputmode","numeric","maxlength","10",3,"ngModelChange","input","keydown.enter","ngModel","disabled"],[4,"ngIf","ngIfElse"],["mat-table","","multiTemplateDataRows","",1,"tabla",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","telefono"],["matColumnDef","email"],["matColumnDef","domicilio"],["matColumnDef","monedero"],["matColumnDef","acciones"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","",4,"matRowDef","matRowDefColumns","matRowDefWhen"],[4,"ngIf"],[1,"paginator-custom",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],["matSuffix","","aria-label","Limpiar filtro",1,"btn-icon-chico","btn-sm","btn-light","position-absolute","top-50","end-0","translate-middle-y","btn-rojo-chico",2,"width","40px","height","40px",3,"click","disabled"],[3,"icon"],["matTooltip","Agregar un cliente nuevo",1,"btn-gris",2,"height","3rem",3,"click","disabled"],["matTooltip","Cancelar",1,"btn-icon-chico","btn-rojo-chico",2,"font-size","larger","height","3rem","width","3rem",3,"click","disabled"],["matTooltip","Guardar",1,"btn-icon-chico","btn-gris-chico",2,"font-size","larger","height","3rem","width","3rem",3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],["matInput","",3,"ngModelChange","ngModel"],["matTooltip","Compras",1,"btn-icon-chico","btn-gris-chico",3,"click"],["matTooltip","Devoluciones de compras",1,"btn-icon-chico","btn-amarillo-chico",3,"click"],["matTooltip","Pedidos",1,"btn-icon-chico","btn-verde-chico",3,"click"],["matTooltip","Cancelaciones de pedidos",1,"btn-icon-chico","btn-rojo-chico",3,"click"],[1,"fas","fa-times"],["matTooltip","Movimientos del monedero",1,"btn-icon-chico","btn-monedero",3,"click"],[1,"fas","fa-wallet"],["matTooltip","Editar datos cliente",1,"btn-icon-chico","btn-editar",3,"click"],[1,"fas","fa-edit"],["matTooltip","Grabar cambios",1,"btn-icon-chico","btn-verde-chico",3,"click"],["matTooltip","Cancelar edici\xF3n",1,"btn-icon-chico","btn-cancelar-edicion",3,"click"],[1,"subtabla-vacia"],[1,"sub-title-tabla"],[1,"detalle-tabla-wrapper"],[1,"detalle-tabla"],[1,"col-det"],[1,"text-end"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-det",3,"click"],[1,"text-end","text-success"],[1,"text-end","text-muted"],[1,"text-end","text-negativo"],[1,"text-end",3,"ngClass"],[1,"text-end","fw-600"],["class","venta-detail",4,"ngIf"],[1,"venta-detail"],["colspan","12",1,"no-pad"],[1,"subdetalle"],[1,"subdetalle-tabla"],[4,"ngFor","ngForOf"],[1,"forma-pago"],[2,"margin-right","3rem","color","rgb(255, 199, 110)"],[2,"margin-right","1rem"],[1,"forma-pago-cantidad",2,"margin-right","3rem"],["class","cb",4,"ngIf"],[1,"cb"],["colspan","3",1,"text-end"],["colspan","100",1,"no-pad"],["colspan","2"],["colspan","2",1,"sub-title-tabla"],["colspan","1"],["colspan","8",1,"no-pad"],[1,"subtabla-vacia","text-center"],["mat-header-row",""],["mat-row",""],[1,"text-center","text-muted","p-2"]],template:function(e,a){if(e&1){let d=y();t(0,"h2",12),i(1,"Mantenimiento y consultas de Clientes"),n(),t(2,"div",13)(3,"mat-form-field",14)(4,"mat-label"),i(5,"Buscar por nombre"),n(),t(6,"input",15,0),B("ngModelChange",function(v){return f(d),M(a.filtro,v)||(a.filtro=v),h(v)}),E("keyup.enter",function(){return f(d),h(a.buscar())}),n(),x(8,qe,2,2,"button",16),t(9,"mat-hint",17),i(10,"Ingresa nombre y enter p/buscar"),n()(),t(11,"div",18)(12,"label",19),i(13,"Fechas de los movimientos"),n(),t(14,"div",20)(15,"input",21),B("ngModelChange",function(v){return f(d),M(a.fechaIni,v)||(a.fechaIni=v),h(v)}),E("change",function(){return f(d),h(a.onChangeFechas())}),n(),t(16,"span",22),i(17,"\u2014"),n(),t(18,"input",23),B("ngModelChange",function(v){return f(d),M(a.fechaFin,v)||(a.fechaFin=v),h(v)}),E("change",function(){return f(d),h(a.onChangeFechas())}),n()()(),t(19,"div",24)(20,"mat-form-field",25)(21,"mat-label"),i(22,"Nombre"),n(),t(23,"input",26,1),B("ngModelChange",function(v){return f(d),M(a.nuevoCliente.nombre,v)||(a.nuevoCliente.nombre=v),h(v)}),E("keydown.enter",function(){return f(d),h(a.agregarCliente())}),n()(),t(25,"mat-form-field",27)(26,"mat-label"),i(27,"Tel\xE9fono"),n(),t(28,"input",28),B("ngModelChange",function(v){return f(d),M(a.nuevoCliente.telefono,v)||(a.nuevoCliente.telefono=v),h(v)}),E("input",function(){return f(d),h(a.solo10Digitos())})("keydown.enter",function(){return f(d),h(a.agregarCliente())}),n(),t(29,"mat-hint",17),i(30),n()(),x(31,Ge,4,2,"ng-container",29)(32,Ke,5,3,"ng-template",null,2,R),n()(),t(34,"table",30),b(35,31),x(36,Ue,2,0,"th",32)(37,Xe,4,2,"td",33),C(),b(38,34),x(39,Ze,2,0,"th",32)(40,nt,4,2,"td",33),C(),b(41,35),x(42,it,2,0,"th",32)(43,rt,4,2,"td",33),C(),b(44,36),x(45,lt,2,0,"th",32)(46,mt,4,2,"td",33),C(),b(47,37),x(48,pt,2,0,"th",32)(49,st,3,4,"td",33),C(),b(50,38),x(51,_t,2,0,"th",32)(52,xt,4,2,"td",33),C(),b(53,39),x(54,At,16,6,"td",33),C(),x(55,Qt,1,0,"tr",40)(56,qt,1,0,"tr",41)(57,Gt,1,0,"tr",42)(58,Kt,3,1,"tr",43),n(),t(59,"mat-paginator",44),E("page",function(v){return f(d),h(a.cambioPagina(v))}),n()}if(e&2){let d=I(33);l(6),T("ngModel",a.filtro),l(2),_("ngIf",a.filtro),l(7),T("ngModel",a.fechaIni),_("max",a.fechaFin),l(3),T("ngModel",a.fechaFin),_("min",a.fechaIni),l(5),T("ngModel",a.nuevoCliente.nombre),_("disabled",!a.agregando||a.cargando),l(5),T("ngModel",a.nuevoCliente.telefono),_("disabled",!a.agregando||a.cargando),l(2),p("",(a.nuevoCliente.telefono||"").length,"/10"),l(),_("ngIf",!a.agregando)("ngIfElse",d),l(3),_("dataSource",a.clientes),l(21),_("matHeaderRowDef",a.displayedColumns),l(),_("matRowDefColumns",a.displayedColumns),l(),_("matRowDefColumns",V(24,je))("matRowDefWhen",a.isDetailRow),l(),_("ngIf",!a.cargando&&((a.clientes==null?null:a.clientes.length)||0)===0),l(),_("length",a.paginacion.total||0)("pageSize",a.limit)("pageIndex",a.page-1)("pageSizeOptions",V(25,Ae))("showFirstLastButtons",!0)}},dependencies:[ee,K,U,Y,X,Z,J,oe,te,ne,ae,ie,Oe,k,Re,Fe,Te,Ie,De,Me,Be,Pe,Ve,ke,W,he,fe,ue,ge,xe,Ce,be,$e,ye,we,le,re,Se,Ee],styles:[`.tabla{width:100%}.subtabla-vacia,.text-negativo{color:red!important}.sub-row{background:#f9f9f9}.lbl{color:#2e04fe;font-size:large}.mat-form-field{min-width:160px}.btn-monedero{font-size:small;font-weight:400;padding:3px;border-radius:6px;background:linear-gradient(45deg,#fc7813,#fcd30a);color:#00f}.btn-monedero:hover{background:linear-gradient(45deg,#a7f944,#fc7813);box-shadow:0 4px 8px #ffcc0080;color:#fff}.btn-monedero:disabled{cursor:not-allowed;opacity:.6}.btn-monedero[disabled]:hover{background:linear-gradient(45deg,#a7f944,#fc7813);box-shadow:none;color:#000}.btn-editar{font-size:small;font-weight:400;padding:3px;border-radius:6px;background:linear-gradient(45deg,#fcd30a,#13fc1f);color:#333131}.btn-editar:hover{background:linear-gradient(45deg,#13fc1f,#fcd30a);box-shadow:0 4px 8px #ffcc0080;color:red}.btn-editar:disabled{cursor:not-allowed;opacity:.6}.btn-editar[disabled]:hover{background:linear-gradient(45deg,#a7f944,#fc7813);box-shadow:none;color:#000}.btn-cancelar-edicion{font-size:small;font-weight:400;padding:3px;border-radius:6px;background:linear-gradient(45deg,orange,red);color:#00f}.btn-cancelar-edicion:hover{background:linear-gradient(45deg,red,orange);box-shadow:0 4px 8px #a8870180;color:#fff}.btn-cancelar-edicion:disabled{cursor:not-allowed;opacity:.6}.btn-cancelar-edicion[disabled]:hover{background:gray;box-shadow:none;color:#000}.paginator-custom .mat-mdc-paginator{background:#f5fbff;box-shadow:0 2px 6px #0000000f}.restore-flash td{animation:flashRestore 1.2s ease-out}.forma-pago{padding:4px;background:#2e04fe!important;text-align:center;font-size:large;color:#fff}.forma-pago-cantidad{color:#e1fcc0}@keyframes flashRestore{0%{background:#fff7cc}30%{background:#ffef99}to{background:transparent}}.paginator-custom .mat-mdc-paginator-container,.paginator-custom .mat-mdc-paginator-page-size,.paginator-custom .mat-mdc-paginator-range-actions{display:flex;align-items:center;gap:4px}.paginator-custom .mat-mdc-paginator-page-size-label,.paginator-custom .mat-mdc-paginator-range-label{font-size:1.3rem;color:#8a2be2;line-height:1}.paginator-custom .mat-mdc-icon-button{width:3.25rem;height:3.25rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .15s ease,transform .05s}.paginator-custom .mat-mdc-icon-button:hover{background:#8a2be2}.paginator-custom .mat-mdc-icon-button:active{transform:translateY(1px)}.paginator-custom .mat-mdc-paginator-icon{fill:#0ff;width:3.25rem;height:3.25rem}.paginator-custom .mat-mdc-paginator-range-actions .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:#cbd5e1}.paginator-custom{background-color:#fbdddd}.paginator-custom .mat-mdc-paginator-page-size .mat-mdc-select-trigger,.paginator-custom .mat-mdc-paginator-page-size .mat-mdc-select-value-text{font-size:1.3rem;color:#8a2be2;line-height:1.1}
`],encapsulation:2})};export{We as ClientesComponent,Ut as paginatorEs};
