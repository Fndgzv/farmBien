import{c as _e}from"./chunk-QE52ZK2X.js";import{B as wt,C as ve,D as ge,E as Y,F as $,G as he,H as ye,I as Et,J as V,K as vt,L as N,M as xe,N as Ce,c as pt,f as me,h as Ct,j as ue,o as pe,p as be,q as fe,r as bt,s as ft,y as Dt}from"./chunk-22UOXS6U.js";import{$b as Wt,A as Ot,Aa as Rt,Ab as r,Ac as L,B as H,Bb as c,Cb as _t,Dc as qt,Ea as Pt,Gc as Kt,H as j,Hc as Zt,Ja as d,Jd as xt,Ka as zt,Ma as Lt,Mc as Xt,Na as k,Nb as m,Nd as ce,Ob as p,Pb as z,Qc as Jt,Rb as rt,T as tt,Tc as te,Ua as T,Ub as $t,Va as R,Wa as yt,Xa as P,Ya as y,Z as et,_ as B,a as E,aa as I,b as Mt,bd as ee,cb as U,cd as ae,d as Le,da as f,db as g,dd as oe,eb as it,ed as Ve,fd as ie,gc as Qt,gd as ne,hb as i,hc as st,hd as re,ia as D,ib as o,ja as w,jb as _,k as C,ka as at,kb as Vt,kd as se,lb as Nt,lc as lt,ma as G,mb as A,nb as Ht,nc as dt,o as Ft,ob as x,oc as ct,pb as h,qa as jt,ra as Bt,tc as mt,ua as ot,ub as Gt,ud as le,vb as Ut,vc as ut,wb as Yt,y as J,yd as de,zb as nt}from"./chunk-4YV45C7K.js";function Ne(s,n){}var S=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var Tt=(()=>{class s extends ge{_elementRef=f(ot);_focusTrapFactory=f(be);_config;_interactivityChecker=f(pe);_ngZone=f(Bt);_overlayRef=f(Et);_focusMonitor=f(ue);_renderer=f(Lt);_changeDetectorRef=f($t);_injector=f(G);_platform=f(me);_document=f(Wt,{optional:!0});_portalOutlet;_focusTrapped=new C;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=f(S,{optional:!0})||new S,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let e=this._ariaLabelledByQueue.indexOf(t);e>-1&&(this._ariaLabelledByQueue.splice(e,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let e=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),e}attachTemplatePortal(t){this._portalOutlet.hasAttached();let e=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),e}attachDomPortal=t=>{this._portalOutlet.hasAttached();let e=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),e};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,e){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let a=()=>{l(),u(),t.removeAttribute("tabindex")},l=this._renderer.listen(t,"blur",a),u=this._renderer.listen(t,"mousedown",a)})),t.focus(e)}_focusByCssSelector(t,e){let a=this._elementRef.nativeElement.querySelector(t);a&&this._forceFocus(a,e)}_trapFocus(t){this._isDestroyed||Pt(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,e=null;if(typeof t=="string"?e=this._document.querySelector(t):typeof t=="boolean"?e=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(e=t),this._config.restoreFocus&&e&&typeof e.focus=="function"){let a=pt(),l=this._elementRef.nativeElement;(!a||a===this._document.body||a===l||l.contains(a))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(t)}_containsFocus(){let t=this._elementRef.nativeElement,e=pt();return t===e||t.contains(e)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=pt()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=T({type:s,selectors:[["cdk-dialog-container"]],viewQuery:function(e,a){if(e&1&&Gt(Y,7),e&2){let l;Ut(l=Yt())&&(a._portalOutlet=l.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,a){e&2&&U("id",a._config.id||null)("role",a._config.role)("aria-modal",a._config.ariaModal)("aria-labelledby",a._config.ariaLabel?null:a._ariaLabelledByQueue[0])("aria-label",a._config.ariaLabel)("aria-describedby",a._config.ariaDescribedBy||null)},features:[P],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,a){e&1&&y(0,Ne,0,0,"ng-template",0)},dependencies:[Y],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return s})(),W=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new C;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,t){this.overlayRef=n,this.config=t,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(e=>{e.keyCode===27&&!this.disableClose&&!ft(e)&&(e.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(n,t){if(this.containerInstance){let e=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),e.next(n),e.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},He=new I("DialogScrollStrategy",{providedIn:"root",factory:()=>{let s=f(V);return()=>s.scrollStrategies.block()}}),Ge=new I("DialogData"),Ue=new I("DefaultDialogConfig");var At=(()=>{class s{_overlay=f(V);_injector=f(G);_defaultOptions=f(Ue,{optional:!0});_parentDialog=f(s,{optional:!0,skipSelf:!0});_overlayContainer=f(ye);_idGenerator=f(bt);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new C;_afterOpenedAtThisLevel=new C;_ariaHiddenElements=new Map;_scrollStrategy=f(He);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=J(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tt(void 0)));constructor(){}open(t,e){let a=this._defaultOptions||new S;e=E(E({},a),e),e.id=e.id||this._idGenerator.getId("cdk-dialog-"),e.id&&this.getDialogById(e.id);let l=this._getOverlayConfig(e),u=this._overlay.create(l),b=new W(u,e),v=this._attachContainer(u,b,e);if(b.containerInstance=v,!this.openDialogs.length){let M=this._overlayContainer.getContainerElement();v._focusTrapped?v._focusTrapped.pipe(j(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(M)}):this._hideNonDialogContentFromAssistiveTechnology(M)}return this._attachDialogContent(t,b,v,e),this.openDialogs.push(b),b.closed.subscribe(()=>this._removeOpenDialog(b,!0)),this.afterOpened.next(b),b}closeAll(){kt(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){kt(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),kt(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let e=new he({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachContainer(t,e,a){let l=a.injector||a.viewContainerRef?.injector,u=[{provide:S,useValue:a},{provide:W,useValue:e},{provide:Et,useValue:t}],b;a.container?typeof a.container=="function"?b=a.container:(b=a.container.type,u.push(...a.container.providers(a))):b=Tt;let v=new wt(b,a.viewContainerRef,G.create({parent:l||this._injector,providers:u}));return t.attach(v).instance}_attachDialogContent(t,e,a,l){if(t instanceof zt){let u=this._createInjector(l,e,a,void 0),b={$implicit:l.data,dialogRef:e};l.templateContext&&(b=E(E({},b),typeof l.templateContext=="function"?l.templateContext():l.templateContext)),a.attachTemplatePortal(new ve(t,null,b,u))}else{let u=this._createInjector(l,e,a,this._injector),b=a.attachComponentPortal(new wt(t,l.viewContainerRef,u));e.componentRef=b,e.componentInstance=b.instance}}_createInjector(t,e,a,l){let u=t.injector||t.viewContainerRef?.injector,b=[{provide:Ge,useValue:t.data},{provide:W,useValue:e}];return t.providers&&(typeof t.providers=="function"?b.push(...t.providers(e,t,a)):b.push(...t.providers)),t.direction&&(!u||!u.get(Dt,null,{optional:!0}))&&b.push({provide:Dt,useValue:{value:t.direction,change:Ft()}}),G.create({parent:u||l,providers:b})}_removeOpenDialog(t,e){let a=this.openDialogs.indexOf(t);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((l,u)=>{l?u.setAttribute("aria-hidden",l):u.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),e&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(t){if(t.parentElement){let e=t.parentElement.children;for(let a=e.length-1;a>-1;a--){let l=e[a];l!==t&&l.nodeName!=="SCRIPT"&&l.nodeName!=="STYLE"&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(e){return new(e||s)};static \u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function kt(s,n){let t=s.length;for(;t--;)n(s[t])}var we=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=R({type:s});static \u0275inj=B({providers:[At],imports:[vt,$,fe,$]})}return s})();function Ye(s,n){}var q=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},It="mdc-dialog--open",Ee="mdc-dialog--opening",ke="mdc-dialog--closing",$e=150,We=75,Ie=(()=>{class s extends Tt{_animationMode=f(Rt,{optional:!0});_animationStateChanged=new jt;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Ae(this._config.enterAnimationDuration)??$e:0;_exitAnimationDuration=this._animationsEnabled?Ae(this._config.exitAnimationDuration)??We:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Te,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ee,It)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(It),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(It),this._animationsEnabled?(this._hostElement.style.setProperty(Te,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(ke)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Ee,ke)}_waitForAnimationToComplete(t,e){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(e,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let e=super.attachComponentPortal(t);return e.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),e}static \u0275fac=(()=>{let t;return function(a){return(t||(t=at(s)))(a||s)}})();static \u0275cmp=T({type:s,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(e,a){e&2&&(Ht("id",a._config.id),U("aria-modal",a._config.ariaModal)("role",a._config.role)("aria-labelledby",a._config.ariaLabel?null:a._ariaLabelledByQueue[0])("aria-label",a._config.ariaLabel)("aria-describedby",a._config.ariaDescribedBy||null),it("_mat-animation-noopable",!a._animationsEnabled)("mat-mdc-dialog-container-with-actions",a._actionSectionCount>0))},features:[P],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1),y(2,Ye,0,0,"ng-template",2),o()())},dependencies:[Y],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return s})(),Te="--mat-dialog-transition-duration";function Ae(s){return s==null?null:typeof s=="number"?s:s.endsWith("ms")?Ct(s.substring(0,s.length-2)):s.endsWith("s")?Ct(s.substring(0,s.length-1))*1e3:s==="0"?0:null}var Q=function(s){return s[s.OPEN=0]="OPEN",s[s.CLOSING=1]="CLOSING",s[s.CLOSED=2]="CLOSED",s}(Q||{}),F=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new C;_beforeClosed=new C;_result;_closeFallbackTimeout;_state=Q.OPEN;_closeInteractionType;constructor(n,t,e){this._ref=n,this._containerInstance=e,this.disableClose=t.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),e._animationStateChanged.pipe(H(a=>a.state==="opened"),j(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(H(a=>a.state==="closed"),j(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ot(this.backdropClick(),this.keydownEvents().pipe(H(a=>a.keyCode===27&&!this.disableClose&&!ft(a)))).subscribe(a=>{this.disableClose||(a.preventDefault(),Se(this,a.type==="keydown"?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(H(t=>t.state==="closing"),j(1)).subscribe(t=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Q.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let t=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?t.left(n.left):t.right(n.right):t.centerHorizontally(),n&&(n.top||n.bottom)?n.top?t.top(n.top):t.bottom(n.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",t=""){return this._ref.updateSize(n,t),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=Q.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Se(s,n,t){return s._closeInteractionType=n,s.close(t)}var ht=new I("MatMdcDialogData"),Me=new I("mat-mdc-dialog-default-options"),Fe=new I("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let s=f(V);return()=>s.scrollStrategies.block()}});var K=(()=>{class s{_overlay=f(V);_defaultOptions=f(Me,{optional:!0});_scrollStrategy=f(Fe);_parentDialog=f(s,{optional:!0,skipSelf:!0});_idGenerator=f(bt);_dialog=f(At);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new C;_afterOpenedAtThisLevel=new C;dialogConfigClass=q;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=J(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tt(void 0)));constructor(){this._dialogRefConstructor=F,this._dialogContainerType=Ie,this._dialogDataToken=ht}open(t,e){let a;e=E(E({},this._defaultOptions||new q),e),e.id=e.id||this._idGenerator.getId("mat-mdc-dialog-"),e.scrollStrategy=e.scrollStrategy||this._scrollStrategy();let l=this._dialog.open(t,Mt(E({},e),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:e},{provide:S,useValue:e}]},templateContext:()=>({dialogRef:a}),providers:(u,b,v)=>(a=new this._dialogRefConstructor(u,e,v),a.updatePosition(e?.position),[{provide:this._dialogContainerType,useValue:v},{provide:this._dialogDataToken,useValue:b.data},{provide:this._dialogRefConstructor,useValue:a}])}));return a.componentRef=l.componentRef,a.componentInstance=l.componentInstance,this.openDialogs.push(a),this.afterOpened.next(a),a.afterClosed().subscribe(()=>{let u=this.openDialogs.indexOf(a);u>-1&&(this.openDialogs.splice(u,1),this.openDialogs.length||this._getAfterAllClosed().next())}),a}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}static \u0275fac=function(e){return new(e||s)};static \u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Qe=(()=>{class s{_dialogRef=f(F,{optional:!0});_elementRef=f(ot);_dialog=f(K);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=qe(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(e){return new(e||s)};static \u0275dir=yt({type:s})}return s})();var St=(()=>{class s extends Qe{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let t;return function(a){return(t||(t=at(s)))(a||s)}})();static \u0275dir=yt({type:s,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(e,a){e&2&&it("mat-mdc-dialog-actions-align-start",a.align==="start")("mat-mdc-dialog-actions-align-center",a.align==="center")("mat-mdc-dialog-actions-align-end",a.align==="end")},inputs:{align:"align"},features:[P]})}return s})();function qe(s,n){let t=s.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?n.find(e=>e.id===t.id):null}var Z=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=R({type:s});static \u0275inj=B({providers:[K],imports:[we,vt,$,N,N]})}return s})();var O=Le(Ve());var je=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=R({type:s});static \u0275inj=B({imports:[N,_e,N]})}return s})();function Je(s,n){if(s&1&&(Vt(0),i(1,"div",14)(2,"h6",15),r(3,"Ingresos por ventas"),o(),i(4,"div",16)(5,"div",17),r(6,"Efectivo:"),o(),i(7,"div",18),r(8),m(9,"currency"),o(),i(10,"div",17),r(11,"Tarjeta:"),o(),i(12,"div",18),r(13),m(14,"currency"),o(),i(15,"div",17),r(16,"Transferencia:"),o(),i(17,"div",18),r(18),m(19,"currency"),o(),i(20,"div",17),r(21,"Monedero:"),o(),i(22,"div",18),r(23),m(24,"currency"),o()(),i(25,"h6",15),r(26,"Egresos por devolucion de ventas"),o(),i(27,"div",19)(28,"div",17),r(29,"Efectivo:"),o(),i(30,"div",18),r(31),m(32,"currency"),o(),i(33,"div",17),r(34,"Monedero:"),o(),i(35,"div",18),r(36),m(37,"currency"),o()(),i(38,"h6",15),r(39,"Ingresos por pedidos"),o(),i(40,"div",16)(41,"div",17),r(42,"Efectivo:"),o(),i(43,"div",18),r(44),m(45,"currency"),o(),i(46,"div",17),r(47,"Tarjeta:"),o(),i(48,"div",18),r(49),m(50,"currency"),o(),i(51,"div",17),r(52,"Transferencia:"),o(),i(53,"div",18),r(54),m(55,"currency"),o(),i(56,"div",17),r(57,"Monedero:"),o(),i(58,"div",18),r(59),m(60,"currency"),o()(),i(61,"h6",15),r(62,"Egresos por cancelaci\xF3n de pedidos"),o(),i(63,"div",19)(64,"div",17),r(65,"Efectivo:"),o(),i(66,"div",18),r(67),m(68,"currency"),o(),i(69,"div",17),r(70,"Monedero:"),o(),i(71,"div",18),r(72),m(73,"currency"),o()(),i(74,"h6",15),r(75,"T O T A L E S:"),o(),i(76,"div",16)(77,"div",17),r(78,"Efectivo:"),o(),i(79,"div",18),r(80),m(81,"currency"),o(),i(82,"div",17),r(83,"Tarjeta:"),o(),i(84,"div",18),r(85),m(86,"currency"),o(),i(87,"div",17),r(88,"Transferencia:"),o(),i(89,"div",18),r(90),m(91,"currency"),o(),i(92,"div",17),r(93,"Monedero:"),o(),i(94,"div",18),r(95),m(96,"currency"),o(),i(97,"div",17),r(98,"Recargas:"),o(),i(99,"div",18),r(100),m(101,"currency"),o()(),i(102,"div",20)(103,"div",21),r(104,"Abonos a monederos de diversos clientes:"),o(),i(105,"div",22),r(106),m(107,"currency"),o()()(),Nt()),s&2){let t=h();d(8),c(p(9,18,t.totales.ventasEfectivo)),d(5),c(p(14,20,t.totales.ventasTarjeta)),d(5),c(p(19,22,t.totales.ventasTransferencia)),d(5),c(p(24,24,t.totales.ventasVale)),d(8),c(p(32,26,t.totales.devolucionesEfectivo)),d(5),c(p(37,28,t.totales.devolucionesVale)),d(8),c(p(45,30,t.totales.pedidosEfectivo)),d(5),c(p(50,32,t.totales.pedidosTarjeta)),d(5),c(p(55,34,t.totales.pedidosTransferencia)),d(5),c(p(60,36,t.totales.pedidosVale)),d(8),c(p(68,38,t.totales.pedidosCanceladosEfectivo)),d(5),c(p(73,40,t.totales.pedidosCanceladosVale)),d(8),c(p(81,42,t.totales.totalEfectivoEnCaja)),d(5),c(p(86,44,t.totales.totalTarjeta)),d(5),c(p(91,46,t.totales.totalTransferencia)),d(5),c(p(96,48,t.totales.totalVale)),d(5),c(p(101,50,t.totales.totalRecargas)),d(6),c(p(107,52,t.totales.abonosMonederos))}}function ta(s,n){if(s&1&&(i(0,"div",14)(1,"h6",15),r(2,"Ingresos por ventas"),o(),i(3,"div",16)(4,"div",17),r(5,"Efectivo:"),o(),i(6,"div",18),r(7),m(8,"currency"),o(),i(9,"div",17),r(10,"Tarjeta:"),o(),i(11,"div",18),r(12),m(13,"currency"),o(),i(14,"div",17),r(15,"Transferencia:"),o(),i(16,"div",18),r(17),m(18,"currency"),o(),i(19,"div",17),r(20,"Monedero:"),o(),i(21,"div",18),r(22),m(23,"currency"),o()(),i(24,"h6",15),r(25,"Egresos por devolucion de ventas"),o(),i(26,"div",19)(27,"div",17),r(28,"Efectivo:"),o(),i(29,"div",18),r(30),m(31,"currency"),o(),i(32,"div",17),r(33,"Monedero:"),o(),i(34,"div",18),r(35),m(36,"currency"),o()(),i(37,"h6",15),r(38,"Ingresos por pedidos"),o(),i(39,"div",16)(40,"div",17),r(41,"Efectivo:"),o(),i(42,"div",18),r(43),m(44,"currency"),o(),i(45,"div",17),r(46,"Tarjeta:"),o(),i(47,"div",18),r(48),m(49,"currency"),o(),i(50,"div",17),r(51,"Transferencia:"),o(),i(52,"div",18),r(53),m(54,"currency"),o(),i(55,"div",17),r(56,"Monedero:"),o(),i(57,"div",18),r(58),m(59,"currency"),o()(),i(60,"h6",15),r(61,"Egresos por cancelaci\xF3n de pedidos"),o(),i(62,"div",19)(63,"div",17),r(64,"Efectivo:"),o(),i(65,"div",18),r(66),m(67,"currency"),o(),i(68,"div",17),r(69,"Monedero:"),o(),i(70,"div",18),r(71),m(72,"currency"),o()(),i(73,"h6",15),r(74,"T O T A L E S:"),o(),i(75,"div",16)(76,"div",17),r(77,"Efectivo:"),o(),i(78,"div",18),r(79),m(80,"currency"),o(),i(81,"div",17),r(82,"Tarjeta:"),o(),i(83,"div",18),r(84),m(85,"currency"),o(),i(86,"div",17),r(87,"Transferencia:"),o(),i(88,"div",18),r(89),m(90,"currency"),o(),i(91,"div",17),r(92,"Monedero:"),o(),i(93,"div",18),r(94),m(95,"currency"),o(),i(96,"div",17),r(97,"Recargas:"),o(),i(98,"div",18),r(99),m(100,"currency"),o()(),i(101,"div",20)(102,"div",21),r(103,"Abonos a monederos de diversos clientes:"),o(),i(104,"div",22),r(105),m(106,"currency"),o()()()),s&2){let t=h();d(7),c(p(8,18,t.totales.ventasEfectivo)),d(5),c(p(13,20,t.totales.ventasTarjeta)),d(5),c(p(18,22,t.totales.ventasTransferencia)),d(5),c(p(23,24,t.totales.ventasVale)),d(8),c(p(31,26,t.totales.devolucionesEfectivo)),d(5),c(p(36,28,t.totales.devolucionesVale)),d(8),c(p(44,30,t.totales.pedidosEfectivo)),d(5),c(p(49,32,t.totales.pedidosTarjeta)),d(5),c(p(54,34,t.totales.pedidosTransferencia)),d(5),c(p(59,36,t.totales.pedidosVale)),d(8),c(p(67,38,t.totales.pedidosCanceladosEfectivo)),d(5),c(p(72,40,t.totales.pedidosCanceladosVale)),d(8),c(p(80,42,t.totales.totalEfectivoEnCaja)),d(5),c(p(85,44,t.totales.totalTarjeta)),d(5),c(p(90,46,t.totales.totalTransferencia)),d(5),c(p(95,48,t.totales.totalVale)),d(5),c(p(100,50,t.totales.totalRecargas)),d(6),c(p(106,52,t.totales.abonosMonederos))}}function ea(s,n){if(s&1){let t=A();i(0,"button",23),x("click",function(){D(t);let a=h();return w(a.finalizarTurnoCaja())}),r(1," Finalizar turno de caja "),o()}if(s&2){let t=h();g("disabled",t.cargando)}}var X=class s{constructor(n,t,e){this.data=n;this.http=t;this.dialogRef=e}cargando=!1;salir(){this.dialogRef.close(!1)}finalizarTurnoCaja(){this.data?.corte?._id&&(this.cargando=!0,this.http.put(`${L.apiUrl}/cortes/${this.data.corte._id}/finalizar/true`,{},{headers:this.data.headers}).subscribe({next:()=>{this.cargando=!1,this.dialogRef.close(!0)},error:n=>{this.cargando=!1,console.error("Error finalizando turno",n)}}))}num(n){return n==null?0:Number(n)}get totales(){let n=this.data?.modo==="cerrado"?this.data?.corte??{}:this.data?.cortePreview??{};return{ventasEfectivo:this.num(n.ventasEfectivo),ventasTarjeta:this.num(n.ventasTarjeta),ventasTransferencia:this.num(n.ventasTransferencia),ventasVale:this.num(n.ventasVale),devolucionesEfectivo:this.num(n.devolucionesEfectivo),devolucionesVale:this.num(n.devolucionesVale),pedidosEfectivo:this.num(n.pedidosEfectivo),pedidosTarjeta:this.num(n.pedidosTarjeta),pedidosTransferencia:this.num(n.pedidosTransferencia),pedidosVale:this.num(n.pedidosVale),pedidosCanceladosEfectivo:this.num(n.pedidosCanceladosEfectivo),pedidosCanceladosVale:this.num(n.pedidosCanceladosVale),totalEfectivoEnCaja:this.num(n.totalEfectivoEnCaja),totalTarjeta:this.num(n.totalTarjeta),totalTransferencia:this.num(n.totalTransferencia),totalVale:this.num(n.totalVale),totalRecargas:this.num(n.totalRecargas),abonosMonederos:this.num(n.abonosMonederos)}}static \u0275fac=function(t){return new(t||s)(k(ht),k(ut),k(F))};static \u0275cmp=T({type:s,selectors:[["app-corte-detalle-dialog"]],decls:42,vars:20,consts:[["previa",""],[2,"background-color","azure"],[1,"titulo-container",2,"margin-top","1rem"],[1,"titulo"],[2,"margin-left","1rem","margin-right","1rem"],[1,"general-list",2,"color","blue"],[1,"general-line"],[1,"general-label"],[1,"general-value"],[1,"general-value","money"],[4,"ngIf","ngIfElse"],["align","end"],["class","btn-verde","style","margin-right: 20px;",3,"disabled","click",4,"ngIf"],[1,"btn-gris",3,"click","disabled"],[2,"color","rgb(1, 83, 41)"],[2,"color","blue","font-size","medium","font-style","italic"],[1,"kv-grid",2,"color","rgb(1, 83, 41)"],[1,"kv-label"],[1,"kv-value"],[1,"kv-grid",2,"color","red","border-bottom","1px solid #0453b3"],[1,"primer-grid",2,"color","rgb(1, 83, 41)"],[1,"primer-label"],[1,"primer-value",2,"color","red"],[1,"btn-verde",2,"margin-right","20px",3,"click","disabled"]],template:function(t,e){if(t&1){let a=A();i(0,"div",1)(1,"div",2)(2,"h2",3),r(3),o()(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),r(8,"Responsable:"),o(),i(9,"div",8),r(10),o()(),i(11,"div",6)(12,"div",7),r(13,"Fecha inicio:"),o(),i(14,"div",8),r(15),m(16,"date"),o()(),i(17,"div",6)(18,"div",7),r(19,"Fecha fin:"),o(),i(20,"div",8),r(21),m(22,"date"),o()(),i(23,"div",6)(24,"div",7),r(25,"Efectivo inicial:"),o(),i(26,"div",9),r(27),m(28,"currency"),o()(),i(29,"div",6)(30,"div",7),r(31,"Recarcas inicial:"),o(),i(32,"div",8),r(33),m(34,"currency"),o()()(),y(35,Je,108,54,"ng-container",10)(36,ta,107,54,"ng-template",null,0,rt),o(),i(38,"mat-dialog-actions",11),y(39,ea,2,1,"button",12),i(40,"button",13),x("click",function(){return D(a),w(e.salir())}),r(41,"Salir"),o()()()}if(t&2){let a=nt(37);d(3),_t(" ",e.data.modo==="cerrado"?"Corte de caja":"Previo de corte de caja"," "),d(7),c((e.data.corte==null||e.data.corte.usuario==null?null:e.data.corte.usuario.nombre)||"N/A"),d(5),c(z(16,10,e.data.corte==null?null:e.data.corte.fechaInicio,"dd/MM/yyyy HH:mm")),d(6),_t(" ",e.data.corte!=null&&e.data.corte.fechaFin?z(22,13,e.data.corte==null?null:e.data.corte.fechaFin,"dd/MM/yyyy HH:mm"):"\u2014"," "),d(6),c(p(28,16,e.data.corte==null?null:e.data.corte.efectivoInicial)),d(6),c(p(34,18,e.data.corte==null?null:e.data.corte.saldoInicialRecargas)),d(2),g("ngIf",e.data.modo==="cerrado")("ngIfElse",a),d(4),g("ngIf",e.data.modo==="previo"),d(),g("disabled",e.cargando)}},dependencies:[je,Z,St,lt,dt,ct,st],styles:[".kv-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:130px 1fr 130px 1fr;column-gap:40px;align-items:baseline;margin-bottom:1rem}.kv-label[_ngcontent-%COMP%]{font-weight:500}.kv-value[_ngcontent-%COMP%]{text-align:right}.primer-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr max-content;column-gap:16px;align-items:baseline}.primer-label[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.primer-value[_ngcontent-%COMP%]{text-align:right;white-space:nowrap}.general-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;margin-bottom:1rem;border-bottom:2px solid #0453b3}.general-line[_ngcontent-%COMP%]{display:grid;grid-template-columns:170px minmax(0,1fr);column-gap:16px;align-items:baseline}.general-label[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.general-value[_ngcontent-%COMP%]{text-align:left}"]})};function aa(s,n){if(s&1){let t=A();i(0,"button",17),x("click",function(){let a;D(t);let l=h();return w((a=l.filtroForm.get("fechaInicioDesde"))==null?null:a.setValue(""))}),_(1,"fa-icon",18),o()}if(s&2){let t=h();d(),g("icon",t.faTimes)}}function oa(s,n){if(s&1){let t=A();i(0,"button",17),x("click",function(){let a;D(t);let l=h();return w((a=l.filtroForm.get("fechaInicioHasta"))==null?null:a.setValue(""))}),_(1,"fa-icon",18),o()}if(s&2){let t=h();d(),g("icon",t.faTimes)}}function ia(s,n){if(s&1){let t=A();i(0,"button",19),x("click",function(){let a;D(t);let l=h();return w((a=l.filtroForm.get("nombreUsuario"))==null?null:a.setValue(""))}),_(1,"fa-icon",18),o()}if(s&2){let t=h();d(),g("icon",t.faTimes)}}function na(s,n){if(s&1){let t=A();i(0,"tr")(1,"td"),r(2),o(),i(3,"td"),r(4),m(5,"currency"),o(),i(6,"td"),r(7),m(8,"currency"),o(),i(9,"td"),r(10),m(11,"currency"),o(),i(12,"td"),r(13),m(14,"currency"),o(),i(15,"td"),r(16),m(17,"currency"),o(),i(18,"td"),r(19),m(20,"currency"),o(),i(21,"td"),r(22),m(23,"date"),o(),i(24,"td"),r(25),m(26,"date"),o(),i(27,"td")(28,"button",23),x("click",function(){let a=D(t).$implicit,l=h(2);return w(l.mostrarDetalle(a))}),_(29,"fa-icon",18),o(),i(30,"button",24),x("click",function(){let a=D(t).$implicit,l=h(2);return w(l.eliminarCorte(a))}),_(31,"fa-icon",18),o()()()}if(s&2){let t=n.$implicit,e=h(2);d(2),c((t.usuario==null?null:t.usuario.nombre)||"N/A"),d(2),c(p(5,13,t.efectivoInicial)),d(3),c(p(8,15,t.totalEfectivoEnCaja)),d(3),c(p(11,17,t.totalTarjeta)),d(3),c(p(14,19,t.totalTransferencia)),d(3),c(p(17,21,t.totalVale)),d(3),c(p(20,23,t.abonosMonederos)),d(3),c(z(23,25,t.fechaInicio,"dd/MM/yyyy HH:mm")),d(3),c(t.fechaFin?z(26,28,t.fechaFin,"dd/MM/yyyy HH:mm"):"abierto"),d(4),g("icon","eye"),d(),g("disabled",e.cargando||!e.esEliminable(t))("matTooltip",e.esEliminable(t)?"Eliminar corte":"No puedes eliminar un corte activo"),d(),g("icon","trash")}}function ra(s,n){if(s&1&&(i(0,"div",20)(1,"table",21)(2,"thead")(3,"tr")(4,"th"),r(5,"Usuario"),o(),i(6,"th"),r(7,"Efec. inicial"),o(),i(8,"th"),r(9,"Efectivo"),o(),i(10,"th"),r(11,"Tarjeta"),o(),i(12,"th"),r(13,"Transferencia"),o(),i(14,"th"),r(15,"Monedero"),o(),i(16,"th"),r(17,"Abonos Monedero"),o(),i(18,"th"),r(19,"Fecha Inicio"),o(),i(20,"th"),r(21,"Fecha Fin"),o(),_(22,"th"),o()(),i(23,"tbody"),y(24,na,32,31,"tr",22),o()()()),s&2){let t=h();d(24),g("ngForOf",t.cortes)}}function sa(s,n){s&1&&(i(0,"p",25),r(1,"No hay cortes de caja para mostrar."),o())}var Be=class s{constructor(n,t,e,a){this.http=n;this.fb=t;this.dialog=e;let l=M=>{let Re=M.getFullYear(),Pe=String(M.getMonth()+1).padStart(2,"0"),ze=String(M.getDate()).padStart(2,"0");return`${Re}-${Pe}-${ze}`},u=new Date,b=new Date(u);b.setDate(u.getDate()-1);let v=new Date(u);v.setDate(u.getDate()+1),this.filtroForm=this.fb.group({fechaInicioDesde:[l(b)],fechaInicioHasta:[l(v)],nombreUsuario:[""]}),a.addIcons(se,le,ce,xt,de)}fechaInicioDesde="";fechaInicioHasta="";filtroUsuario="";filtroForm;cargando=!1;faTimes=xt;farmaciaId;usuario;cortes=[];ngOnInit(){this.buscarCortes()}buscarCortes(){let n=localStorage.getItem("auth_token")||"",t=new mt({"x-auth-token":n}),{fechaInicioDesde:e,fechaInicioHasta:a,nombreUsuario:l}=this.filtroForm.value,u={fechaInicioDesde:e,fechaInicioHasta:a};l&&l.trim().length>2&&(u.nombreUsuario=l.trim()),this.cargando=!0,this.http.get(`${L.apiUrl}/cortes/filtrados`,{headers:t,params:u}).subscribe({next:b=>{this.cortes=b.cortes,this.cargando=!1},error:b=>{console.error("Error al buscar cortes:",b),O.default.fire("Error","No se pudieron cargar los cortes de caja.","error"),this.cargando=!1}})}esFechaDeHoy(n){if(!n)return!1;let t=new Date,e=new Date(n);return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}mostrarDetalle(n){let t=localStorage.getItem("auth_token")||"",e=new mt({"x-auth-token":t}),a=typeof n.usuario=="string"?n.usuario:n.usuario?._id;if(!a){O.default.fire({icon:"warning",title:"Dato faltante",text:"No se encontr\xF3 el usuario del corte.",timer:1600,timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1});return}if(n.fechaFin){this.dialog.open(X,{width:"720px",disableClose:!0,data:{modo:"cerrado",corte:n,puedeAutorizarTurnoExtra:this.esFechaDeHoy(n.fechaFin)&&!n.turnoExtraAutorizado,headers:e,usuarioId:a}}).afterClosed().subscribe(l=>{l&&this.buscarCortes()});return}this.http.put(`${L.apiUrl}/cortes/${n._id}/finalizar/false`,{},{headers:e}).subscribe({next:l=>{let u=this.normalizarPreview(l);console.log("corte de caja previo Normalizado:",u),this.dialog.open(X,{width:"720px",disableClose:!0,data:{modo:"previo",corte:n,cortePreview:u,headers:e,usuarioId:typeof n.usuario=="string"?n.usuario:n.usuario?._id||""}}).afterClosed().subscribe(b=>{b&&this.buscarCortes()})},error:l=>{console.error("Error obteniendo preview de corte:",l),O.default.fire("Error","No se pudo obtener el previo del corte.","error")}})}eliminarCorte(n){n?._id&&O.default.fire({title:"Eliminar corte",html:`
      <div style="text-align:left">
        <p><b>Usuario:</b> ${n.usuario?.nombre??"N/A"}</p>
        <p><b>Inicio:</b> ${new Date(n.fechaInicio).toLocaleString()}</p>
        <p><b>Fin:</b> ${n.fechaFin?new Date(n.fechaFin).toLocaleString():"\u2014"}</p>
      </div>
      <p style="margin-top:8px;color:#b91c1c;">Esta acci\xF3n no se puede deshacer.</p>
    `,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#d33"}).then(t=>{if(!t.isConfirmed)return;let e=localStorage.getItem("auth_token")||"",a=new mt({"x-auth-token":e});this.cargando=!0,this.http.delete(`${L.apiUrl}/cortes/${n._id}`,{headers:a}).subscribe({next:l=>{this.cargando=!1,O.default.fire({icon:"success",title:"Eliminado",text:"Corte de caja eliminado correctamente.",timer:1600,timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1}),this.buscarCortes()},error:l=>{this.cargando=!1;let u=l?.error?.mensaje||"No se pudo eliminar el corte";O.default.fire("Error",u,"error")}})})}esEliminable(n){return!!n?.fechaFin}normalizarPreview(n){let t=n?.preview??n?.data??n?.totales??n?.resumen??n?.result??n?.corte??n;if(!t||typeof t!="object")return{ventasEfectivo:0,ventasTarjeta:0,ventasTransferencia:0,ventasVale:0,devolucionesEfectivo:0,devolucionesVale:0,pedidosEfectivo:0,pedidosTarjeta:0,pedidosTransferencia:0,pedidosVale:0,pedidosCanceladosEfectivo:0,pedidosCanceladosVale:0,totalEfectivoEnCaja:0,totalTarjeta:0,totalTransferencia:0,totalVale:0,totalRecargas:0,abonosMonederos:0};let e=(u,b)=>{for(let v of b)if(u?.[v]!=null)return u[v]},a=u=>{if(u==null)return 0;if(typeof u=="number")return u;if(typeof u=="string"){let b=u.trim().replace(/\s/g,"").replace(",","."),v=Number(b);return isNaN(v)?0:v}return Number(u)||0},l=(typeof t.totales=="object"?t.totales:void 0)??(typeof t.resumen=="object"?t.resumen:void 0)??t;return{ventasEfectivo:a(e(l,["ventasEfectivo","ventas_efectivo","ventasEfe"])),ventasTarjeta:a(e(l,["ventasTarjeta","ventas_tarjeta","ventasTj"])),ventasTransferencia:a(e(l,["ventasTransferencia","ventas_transferencia","ventasTransf"])),ventasVale:a(e(l,["ventasVale","ventasMonedero","ventas_monedero","ventasVales"])),devolucionesEfectivo:a(e(l,["devolucionesEfectivo","devoluciones_efectivo","devEfectivo"])),devolucionesVale:a(e(l,["devolucionesVale","devolucionesMonedero","devoluciones_monedero","devVales"])),pedidosEfectivo:a(e(l,["pedidosEfectivo","pedidos_efectivo"])),pedidosTarjeta:a(e(l,["pedidosTarjeta","pedidos_tarjeta"])),pedidosTransferencia:a(e(l,["pedidosTransferencia","pedidos_transferencia"])),pedidosVale:a(e(l,["pedidosVale","pedidosMonedero","pedidos_monedero"])),pedidosCanceladosEfectivo:a(e(l,["pedidosCanceladosEfectivo","pedidos_cancelados_efectivo"])),pedidosCanceladosVale:a(e(l,["pedidosCanceladosVale","pedidosCanceladosMonedero","pedidos_cancelados_monedero"])),totalEfectivoEnCaja:a(e(l,["totalEfectivoEnCaja","total_efectivo_en_caja","totalEfectivo"])),totalTarjeta:a(e(l,["totalTarjeta","total_tarjeta"])),totalTransferencia:a(e(l,["totalTransferencia","total_transferencia"])),totalVale:a(e(l,["totalVale","totalMonedero","total_monedero"])),totalRecargas:a(e(l,["totalRecargas","recargas","total_recargas"])),abonosMonederos:a(e(l,["abonosMonederos","abonosMonedero","abonos_monedero"]))}}static \u0275fac=function(t){return new(t||s)(k(ut),k(ee),k(K),k(ie))};static \u0275cmp=T({type:s,selectors:[["app-cortes-de-caja"]],decls:29,vars:6,consts:[["sinResultados",""],[1,"cortes-caja-container"],[1,"titulo-container"],[1,"titulo"],[1,"row","mb-2","filter-container",3,"formGroup"],[1,"col-md-3"],[1,"d-flex","align-items-center","position-relative","w-100"],[1,"me-2","mb-0",2,"white-space","nowrap"],["type","date","formControlName","fechaInicioDesde",1,"form-control","pe-5","flex-grow-1"],["type","button","class","btn-icon-chico btn-sm btn-light position-absolute top-50 end-0 translate-middle-y btn-rojo-chico","style","z-index: 2; margin-right: 6px;",3,"click",4,"ngIf"],["type","date","formControlName","fechaInicioHasta",1,"form-control","pe-5","flex-grow-1"],[1,"col-md-4"],["type","text","formControlName","nombreUsuario",1,"form-control","pe-4","flex-grow-1"],["type","button","class","btn-icon-chico btn-sm btn-light position-absolute top-50 end-0 translate-middle-y btn-rojo-chico",3,"click",4,"ngIf"],[1,"col-md-2"],[1,"btn-gris",3,"click"],["class","mt-3 d-flex justify-content-center",4,"ngIf","ngIfElse"],["type","button",1,"btn-icon-chico","btn-sm","btn-light","position-absolute","top-50","end-0","translate-middle-y","btn-rojo-chico",2,"z-index","2","margin-right","6px",3,"click"],[3,"icon"],["type","button",1,"btn-icon-chico","btn-sm","btn-light","position-absolute","top-50","end-0","translate-middle-y","btn-rojo-chico",3,"click"],[1,"mt-3","d-flex","justify-content-center"],[1,"tabla","mx-auto"],[4,"ngFor","ngForOf"],["matTooltip","Vista del corte",1,"btn-icon-chico","btn-verde-chico",3,"click"],[1,"btn-icon-chico","btn-rojo-chico",3,"click","disabled","matTooltip"],[2,"color","brown"]],template:function(t,e){if(t&1){let a=A();i(0,"div",1)(1,"div",2)(2,"h1",3),r(3,"Cortes de Caja"),o()(),i(4,"form",4)(5,"div",5)(6,"div",6)(7,"label",7),r(8,"Desde:"),o(),_(9,"input",8),y(10,aa,2,1,"button",9),o()(),i(11,"div",5)(12,"div",6)(13,"label",7),r(14,"Hasta:"),o(),_(15,"input",10),y(16,oa,2,1,"button",9),o()(),i(17,"div",11)(18,"div",6)(19,"label",7),r(20,"Usuario:"),o(),_(21,"input",12),y(22,ia,2,1,"button",13),o()(),i(23,"div",14)(24,"button",15),x("click",function(){return D(a),w(e.buscarCortes())}),r(25,"Buscar"),o()()(),y(26,ra,25,1,"div",16)(27,sa,2,0,"ng-template",null,0,rt),o()}if(t&2){let a,l,u,b=nt(28);d(4),g("formGroup",e.filtroForm),d(6),g("ngIf",(a=e.filtroForm.get("fechaInicioDesde"))==null?null:a.value),d(6),g("ngIf",(l=e.filtroForm.get("fechaInicioHasta"))==null?null:l.value),d(6),g("ngIf",(u=e.filtroForm.get("nombreUsuario"))==null?null:u.value),d(4),g("ngIf",e.cortes&&e.cortes.length>0)("ngIfElse",b)}},dependencies:[ct,Qt,st,dt,lt,ae,Xt,qt,Kt,Zt,oe,Jt,te,re,ne,Ce,xe,Z],styles:[".filter-container[_ngcontent-%COMP%]{border-bottom:2px solid #0453b3;padding-bottom:1rem}"]})};export{Be as CortesDeCajaComponent};
