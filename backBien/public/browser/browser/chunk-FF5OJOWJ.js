import{c as De}from"./chunk-G4HFYLKI.js";import{B as wt,C as ye,D as _e,E as Y,F as $,G as xe,H as Ce,I as Et,J as L,K as vt,L as N,M as we,N as Ee,c as pt,f as be,h as Ct,j as fe,o as ve,p as ge,q as he,r as bt,s as ft,y as Dt}from"./chunk-2XHFFHZX.js";import{$c as ie,A as Bt,Aa as zt,Ab as s,B as H,Bb as c,Cb as _t,Cc as Zt,Cd as xt,Ea as Vt,Fc as Xt,Gc as Jt,Gd as pe,H as B,Ja as d,Ka as Lt,Kc as te,Ma as Nt,Mb as u,Na as T,Nb as p,Nc as ee,Ob as V,Qb as rt,Qc as ae,T as tt,Tb as Qt,Ua as A,Va as P,Wa as yt,Xa as z,Ya as y,Z as et,_ as R,_b as qt,_c as oe,a as k,aa as I,ad as ne,b as Ft,bd as re,cb as U,cd as se,d as Ot,da as f,db as v,dd as le,eb as it,ed as de,fc as Kt,gc as st,hb as i,hd as ce,ia as x,ib as o,ja as C,jb as D,k as w,ka as at,kb as Ht,kc as lt,lb as Gt,ma as G,mb as E,mc as dt,nb as Ut,nc as ct,o as jt,ob as _,pb as h,pd as me,qa as Rt,ra as Pt,sc as mt,td as ue,ua as ot,ub as Yt,uc as ut,vb as $t,wb as Wt,y as J,zb as nt,zc as F}from"./chunk-UBI5DTFP.js";function He(r,n){}var S=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var Tt=(()=>{class r extends _e{_elementRef=f(ot);_focusTrapFactory=f(ge);_config;_interactivityChecker=f(ve);_ngZone=f(Pt);_overlayRef=f(Et);_focusMonitor=f(fe);_renderer=f(Nt);_changeDetectorRef=f(Qt);_injector=f(G);_platform=f(be);_document=f(qt,{optional:!0});_portalOutlet;_focusTrapped=new w;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=f(S,{optional:!0})||new S,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let e=this._ariaLabelledByQueue.indexOf(t);e>-1&&(this._ariaLabelledByQueue.splice(e,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let e=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),e}attachTemplatePortal(t){this._portalOutlet.hasAttached();let e=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),e}attachDomPortal=t=>{this._portalOutlet.hasAttached();let e=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),e};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,e){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let a=()=>{l(),m(),t.removeAttribute("tabindex")},l=this._renderer.listen(t,"blur",a),m=this._renderer.listen(t,"mousedown",a)})),t.focus(e)}_focusByCssSelector(t,e){let a=this._elementRef.nativeElement.querySelector(t);a&&this._forceFocus(a,e)}_trapFocus(t){this._isDestroyed||Vt(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,e=null;if(typeof t=="string"?e=this._document.querySelector(t):typeof t=="boolean"?e=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(e=t),this._config.restoreFocus&&e&&typeof e.focus=="function"){let a=pt(),l=this._elementRef.nativeElement;(!a||a===this._document.body||a===l||l.contains(a))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(t)}_containsFocus(){let t=this._elementRef.nativeElement,e=pt();return t===e||t.contains(e)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=pt()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=A({type:r,selectors:[["cdk-dialog-container"]],viewQuery:function(e,a){if(e&1&&Yt(Y,7),e&2){let l;$t(l=Wt())&&(a._portalOutlet=l.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,a){e&2&&U("id",a._config.id||null)("role",a._config.role)("aria-modal",a._config.ariaModal)("aria-labelledby",a._config.ariaLabel?null:a._ariaLabelledByQueue[0])("aria-label",a._config.ariaLabel)("aria-describedby",a._config.ariaDescribedBy||null)},features:[z],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,a){e&1&&y(0,He,0,0,"ng-template",0)},dependencies:[Y],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return r})(),W=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new w;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,t){this.overlayRef=n,this.config=t,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(e=>{e.keyCode===27&&!this.disableClose&&!ft(e)&&(e.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(n,t){if(this.containerInstance){let e=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),e.next(n),e.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},Ge=new I("DialogScrollStrategy",{providedIn:"root",factory:()=>{let r=f(L);return()=>r.scrollStrategies.block()}}),Ue=new I("DialogData"),Ye=new I("DefaultDialogConfig");var At=(()=>{class r{_overlay=f(L);_injector=f(G);_defaultOptions=f(Ye,{optional:!0});_parentDialog=f(r,{optional:!0,skipSelf:!0});_overlayContainer=f(Ce);_idGenerator=f(bt);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new w;_afterOpenedAtThisLevel=new w;_ariaHiddenElements=new Map;_scrollStrategy=f(Ge);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=J(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tt(void 0)));constructor(){}open(t,e){let a=this._defaultOptions||new S;e=k(k({},a),e),e.id=e.id||this._idGenerator.getId("cdk-dialog-"),e.id&&this.getDialogById(e.id);let l=this._getOverlayConfig(e),m=this._overlay.create(l),b=new W(m,e),g=this._attachContainer(m,b,e);if(b.containerInstance=g,!this.openDialogs.length){let M=this._overlayContainer.getContainerElement();g._focusTrapped?g._focusTrapped.pipe(B(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(M)}):this._hideNonDialogContentFromAssistiveTechnology(M)}return this._attachDialogContent(t,b,g,e),this.openDialogs.push(b),b.closed.subscribe(()=>this._removeOpenDialog(b,!0)),this.afterOpened.next(b),b}closeAll(){kt(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){kt(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),kt(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let e=new xe({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachContainer(t,e,a){let l=a.injector||a.viewContainerRef?.injector,m=[{provide:S,useValue:a},{provide:W,useValue:e},{provide:Et,useValue:t}],b;a.container?typeof a.container=="function"?b=a.container:(b=a.container.type,m.push(...a.container.providers(a))):b=Tt;let g=new wt(b,a.viewContainerRef,G.create({parent:l||this._injector,providers:m}));return t.attach(g).instance}_attachDialogContent(t,e,a,l){if(t instanceof Lt){let m=this._createInjector(l,e,a,void 0),b={$implicit:l.data,dialogRef:e};l.templateContext&&(b=k(k({},b),typeof l.templateContext=="function"?l.templateContext():l.templateContext)),a.attachTemplatePortal(new ye(t,null,b,m))}else{let m=this._createInjector(l,e,a,this._injector),b=a.attachComponentPortal(new wt(t,l.viewContainerRef,m));e.componentRef=b,e.componentInstance=b.instance}}_createInjector(t,e,a,l){let m=t.injector||t.viewContainerRef?.injector,b=[{provide:Ue,useValue:t.data},{provide:W,useValue:e}];return t.providers&&(typeof t.providers=="function"?b.push(...t.providers(e,t,a)):b.push(...t.providers)),t.direction&&(!m||!m.get(Dt,null,{optional:!0}))&&b.push({provide:Dt,useValue:{value:t.direction,change:jt()}}),G.create({parent:m||l,providers:b})}_removeOpenDialog(t,e){let a=this.openDialogs.indexOf(t);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((l,m)=>{l?m.setAttribute("aria-hidden",l):m.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),e&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(t){if(t.parentElement){let e=t.parentElement.children;for(let a=e.length-1;a>-1;a--){let l=e[a];l!==t&&l.nodeName!=="SCRIPT"&&l.nodeName!=="STYLE"&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(e){return new(e||r)};static \u0275prov=et({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function kt(r,n){let t=r.length;for(;t--;)n(r[t])}var Te=(()=>{class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=P({type:r});static \u0275inj=R({providers:[At],imports:[vt,$,he,$]})}return r})();function $e(r,n){}var q=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},It="mdc-dialog--open",Ae="mdc-dialog--opening",Ie="mdc-dialog--closing",We=150,Qe=75,Fe=(()=>{class r extends Tt{_animationMode=f(zt,{optional:!0});_animationStateChanged=new Rt;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Me(this._config.enterAnimationDuration)??We:0;_exitAnimationDuration=this._animationsEnabled?Me(this._config.exitAnimationDuration)??Qe:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Se,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ae,It)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(It),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(It),this._animationsEnabled?(this._hostElement.style.setProperty(Se,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ie)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Ae,Ie)}_waitForAnimationToComplete(t,e){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(e,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let e=super.attachComponentPortal(t);return e.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),e}static \u0275fac=(()=>{let t;return function(a){return(t||(t=at(r)))(a||r)}})();static \u0275cmp=A({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(e,a){e&2&&(Ut("id",a._config.id),U("aria-modal",a._config.ariaModal)("role",a._config.role)("aria-labelledby",a._config.ariaLabel?null:a._ariaLabelledByQueue[0])("aria-label",a._config.ariaLabel)("aria-describedby",a._config.ariaDescribedBy||null),it("_mat-animation-noopable",!a._animationsEnabled)("mat-mdc-dialog-container-with-actions",a._actionSectionCount>0))},features:[z],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1),y(2,$e,0,0,"ng-template",2),o()())},dependencies:[Y],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return r})(),Se="--mat-dialog-transition-duration";function Me(r){return r==null?null:typeof r=="number"?r:r.endsWith("ms")?Ct(r.substring(0,r.length-2)):r.endsWith("s")?Ct(r.substring(0,r.length-1))*1e3:r==="0"?0:null}var Q=function(r){return r[r.OPEN=0]="OPEN",r[r.CLOSING=1]="CLOSING",r[r.CLOSED=2]="CLOSED",r}(Q||{}),O=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new w;_beforeClosed=new w;_result;_closeFallbackTimeout;_state=Q.OPEN;_closeInteractionType;constructor(n,t,e){this._ref=n,this._containerInstance=e,this.disableClose=t.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),e._animationStateChanged.pipe(H(a=>a.state==="opened"),B(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(H(a=>a.state==="closed"),B(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Bt(this.backdropClick(),this.keydownEvents().pipe(H(a=>a.keyCode===27&&!this.disableClose&&!ft(a)))).subscribe(a=>{this.disableClose||(a.preventDefault(),Oe(this,a.type==="keydown"?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(H(t=>t.state==="closing"),B(1)).subscribe(t=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Q.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let t=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?t.left(n.left):t.right(n.right):t.centerHorizontally(),n&&(n.top||n.bottom)?n.top?t.top(n.top):t.bottom(n.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",t=""){return this._ref.updateSize(n,t),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=Q.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Oe(r,n,t){return r._closeInteractionType=n,r.close(t)}var ht=new I("MatMdcDialogData"),je=new I("mat-mdc-dialog-default-options"),Be=new I("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let r=f(L);return()=>r.scrollStrategies.block()}});var K=(()=>{class r{_overlay=f(L);_defaultOptions=f(je,{optional:!0});_scrollStrategy=f(Be);_parentDialog=f(r,{optional:!0,skipSelf:!0});_idGenerator=f(bt);_dialog=f(At);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new w;_afterOpenedAtThisLevel=new w;dialogConfigClass=q;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=J(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tt(void 0)));constructor(){this._dialogRefConstructor=O,this._dialogContainerType=Fe,this._dialogDataToken=ht}open(t,e){let a;e=k(k({},this._defaultOptions||new q),e),e.id=e.id||this._idGenerator.getId("mat-mdc-dialog-"),e.scrollStrategy=e.scrollStrategy||this._scrollStrategy();let l=this._dialog.open(t,Ft(k({},e),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:e},{provide:S,useValue:e}]},templateContext:()=>({dialogRef:a}),providers:(m,b,g)=>(a=new this._dialogRefConstructor(m,e,g),a.updatePosition(e?.position),[{provide:this._dialogContainerType,useValue:g},{provide:this._dialogDataToken,useValue:b.data},{provide:this._dialogRefConstructor,useValue:a}])}));return a.componentRef=l.componentRef,a.componentInstance=l.componentInstance,this.openDialogs.push(a),this.afterOpened.next(a),a.afterClosed().subscribe(()=>{let m=this.openDialogs.indexOf(a);m>-1&&(this.openDialogs.splice(m,1),this.openDialogs.length||this._getAfterAllClosed().next())}),a}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=et({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var qe=(()=>{class r{_dialogRef=f(O,{optional:!0});_elementRef=f(ot);_dialog=f(K);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Ke(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(e){return new(e||r)};static \u0275dir=yt({type:r})}return r})();var St=(()=>{class r extends qe{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let t;return function(a){return(t||(t=at(r)))(a||r)}})();static \u0275dir=yt({type:r,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(e,a){e&2&&it("mat-mdc-dialog-actions-align-start",a.align==="start")("mat-mdc-dialog-actions-align-center",a.align==="center")("mat-mdc-dialog-actions-align-end",a.align==="end")},inputs:{align:"align"},features:[z]})}return r})();function Ke(r,n){let t=r.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?n.find(e=>e.id===t.id):null}var Z=(()=>{class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=P({type:r});static \u0275inj=R({providers:[K],imports:[Te,vt,$,N,N]})}return r})();var j=Ot(re());var Pe=(()=>{class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=P({type:r});static \u0275inj=R({imports:[N,De,N]})}return r})();var Mt=Ot(re());function ta(r,n){if(r&1&&(Ht(0),i(1,"div",15)(2,"h6",16),s(3,"Ingresos por ventas"),o(),i(4,"div",17)(5,"div",18),s(6,"Efectivo:"),o(),i(7,"div",19),s(8),u(9,"currency"),o(),i(10,"div",18),s(11,"Tarjeta:"),o(),i(12,"div",19),s(13),u(14,"currency"),o(),i(15,"div",18),s(16,"Transferencia:"),o(),i(17,"div",19),s(18),u(19,"currency"),o(),i(20,"div",18),s(21,"Monedero:"),o(),i(22,"div",19),s(23),u(24,"currency"),o()(),i(25,"h6",16),s(26,"Egresos por devolucion de ventas"),o(),i(27,"div",20)(28,"div",18),s(29,"Efectivo:"),o(),i(30,"div",19),s(31),u(32,"currency"),o(),i(33,"div",18),s(34,"Monedero:"),o(),i(35,"div",19),s(36),u(37,"currency"),o()(),i(38,"h6",16),s(39,"Ingresos por pedidos"),o(),i(40,"div",17)(41,"div",18),s(42,"Efectivo:"),o(),i(43,"div",19),s(44),u(45,"currency"),o(),i(46,"div",18),s(47,"Tarjeta:"),o(),i(48,"div",19),s(49),u(50,"currency"),o(),i(51,"div",18),s(52,"Transferencia:"),o(),i(53,"div",19),s(54),u(55,"currency"),o(),i(56,"div",18),s(57,"Monedero:"),o(),i(58,"div",19),s(59),u(60,"currency"),o()(),i(61,"h6",16),s(62,"Egresos por cancelaci\xF3n de pedidos"),o(),i(63,"div",20)(64,"div",18),s(65,"Efectivo:"),o(),i(66,"div",19),s(67),u(68,"currency"),o(),i(69,"div",18),s(70,"Monedero:"),o(),i(71,"div",19),s(72),u(73,"currency"),o()(),i(74,"h6",16),s(75,"T O T A L E S:"),o(),i(76,"div",17)(77,"div",18),s(78,"Efectivo:"),o(),i(79,"div",19),s(80),u(81,"currency"),o(),i(82,"div",18),s(83,"Tarjeta:"),o(),i(84,"div",19),s(85),u(86,"currency"),o(),i(87,"div",18),s(88,"Transferencia:"),o(),i(89,"div",19),s(90),u(91,"currency"),o(),i(92,"div",18),s(93,"Monedero:"),o(),i(94,"div",19),s(95),u(96,"currency"),o(),i(97,"div",18),s(98,"Recargas:"),o(),i(99,"div",19),s(100),u(101,"currency"),o()(),i(102,"div",21)(103,"div",22),s(104,"Abonos a monederos de diversos clientes:"),o(),i(105,"div",23),s(106),u(107,"currency"),o()()(),Gt()),r&2){let t=h();d(8),c(p(9,18,t.totales.ventasEfectivo)),d(5),c(p(14,20,t.totales.ventasTarjeta)),d(5),c(p(19,22,t.totales.ventasTransferencia)),d(5),c(p(24,24,t.totales.ventasVale)),d(8),c(p(32,26,t.totales.devolucionesEfectivo)),d(5),c(p(37,28,t.totales.devolucionesVale)),d(8),c(p(45,30,t.totales.pedidosEfectivo)),d(5),c(p(50,32,t.totales.pedidosTarjeta)),d(5),c(p(55,34,t.totales.pedidosTransferencia)),d(5),c(p(60,36,t.totales.pedidosVale)),d(8),c(p(68,38,t.totales.pedidosCanceladosEfectivo)),d(5),c(p(73,40,t.totales.pedidosCanceladosVale)),d(8),c(p(81,42,t.totales.totalEfectivoEnCaja)),d(5),c(p(86,44,t.totales.totalTarjeta)),d(5),c(p(91,46,t.totales.totalTransferencia)),d(5),c(p(96,48,t.totales.totalVale)),d(5),c(p(101,50,t.totales.totalRecargas)),d(6),c(p(107,52,t.totales.abonosMonederos))}}function ea(r,n){if(r&1&&(i(0,"div",15)(1,"h6",16),s(2,"Ingresos por ventas"),o(),i(3,"div",17)(4,"div",18),s(5,"Efectivo:"),o(),i(6,"div",19),s(7),u(8,"currency"),o(),i(9,"div",18),s(10,"Tarjeta:"),o(),i(11,"div",19),s(12),u(13,"currency"),o(),i(14,"div",18),s(15,"Transferencia:"),o(),i(16,"div",19),s(17),u(18,"currency"),o(),i(19,"div",18),s(20,"Monedero:"),o(),i(21,"div",19),s(22),u(23,"currency"),o()(),i(24,"h6",16),s(25,"Egresos por devolucion de ventas"),o(),i(26,"div",20)(27,"div",18),s(28,"Efectivo:"),o(),i(29,"div",19),s(30),u(31,"currency"),o(),i(32,"div",18),s(33,"Monedero:"),o(),i(34,"div",19),s(35),u(36,"currency"),o()(),i(37,"h6",16),s(38,"Ingresos por pedidos"),o(),i(39,"div",17)(40,"div",18),s(41,"Efectivo:"),o(),i(42,"div",19),s(43),u(44,"currency"),o(),i(45,"div",18),s(46,"Tarjeta:"),o(),i(47,"div",19),s(48),u(49,"currency"),o(),i(50,"div",18),s(51,"Transferencia:"),o(),i(52,"div",19),s(53),u(54,"currency"),o(),i(55,"div",18),s(56,"Monedero:"),o(),i(57,"div",19),s(58),u(59,"currency"),o()(),i(60,"h6",16),s(61,"Egresos por cancelaci\xF3n de pedidos"),o(),i(62,"div",20)(63,"div",18),s(64,"Efectivo:"),o(),i(65,"div",19),s(66),u(67,"currency"),o(),i(68,"div",18),s(69,"Monedero:"),o(),i(70,"div",19),s(71),u(72,"currency"),o()(),i(73,"h6",16),s(74,"T O T A L E S:"),o(),i(75,"div",17)(76,"div",18),s(77,"Efectivo:"),o(),i(78,"div",19),s(79),u(80,"currency"),o(),i(81,"div",18),s(82,"Tarjeta:"),o(),i(83,"div",19),s(84),u(85,"currency"),o(),i(86,"div",18),s(87,"Transferencia:"),o(),i(88,"div",19),s(89),u(90,"currency"),o(),i(91,"div",18),s(92,"Monedero:"),o(),i(93,"div",19),s(94),u(95,"currency"),o(),i(96,"div",18),s(97,"Recargas:"),o(),i(98,"div",19),s(99),u(100,"currency"),o()(),i(101,"div",21)(102,"div",22),s(103,"Abonos a monederos de diversos clientes:"),o(),i(104,"div",23),s(105),u(106,"currency"),o()()()),r&2){let t=h();d(7),c(p(8,18,t.totales.ventasEfectivo)),d(5),c(p(13,20,t.totales.ventasTarjeta)),d(5),c(p(18,22,t.totales.ventasTransferencia)),d(5),c(p(23,24,t.totales.ventasVale)),d(8),c(p(31,26,t.totales.devolucionesEfectivo)),d(5),c(p(36,28,t.totales.devolucionesVale)),d(8),c(p(44,30,t.totales.pedidosEfectivo)),d(5),c(p(49,32,t.totales.pedidosTarjeta)),d(5),c(p(54,34,t.totales.pedidosTransferencia)),d(5),c(p(59,36,t.totales.pedidosVale)),d(8),c(p(67,38,t.totales.pedidosCanceladosEfectivo)),d(5),c(p(72,40,t.totales.pedidosCanceladosVale)),d(8),c(p(80,42,t.totales.totalEfectivoEnCaja)),d(5),c(p(85,44,t.totales.totalTarjeta)),d(5),c(p(90,46,t.totales.totalTransferencia)),d(5),c(p(95,48,t.totales.totalVale)),d(5),c(p(100,50,t.totales.totalRecargas)),d(6),c(p(106,52,t.totales.abonosMonederos))}}function aa(r,n){if(r&1){let t=E();i(0,"button",24),_("click",function(){x(t);let a=h();return C(a.autorizarTurnoExtra())}),s(1," Autorizar turno extra "),o()}if(r&2){let t=h();v("disabled",t.cargando)}}function oa(r,n){if(r&1){let t=E();i(0,"button",25),_("click",function(){x(t);let a=h();return C(a.finalizarTurnoCaja())}),s(1," Finalizar turno de caja "),o()}if(r&2){let t=h();v("disabled",t.cargando)}}var X=class r{constructor(n,t,e){this.data=n;this.http=t;this.dialogRef=e}cargando=!1;salir(){this.dialogRef.close(!1)}autorizarTurnoExtra(){let n=this.data?.corte?._id,t=this.data?.headers,e=localStorage.getItem("user_id")||this.data?.usuarioId||"";!n||!e||(this.cargando=!0,this.http.put(`${F.apiUrl}/cortes/${n}/autorizar-turno-extra/${e}`,{},{headers:t}).subscribe({next:()=>{this.cargando=!1,this.dialogRef.close(!0)},error:a=>{this.cargando=!1,console.error("Error autorizando turno extra",a),a.status===403?Mt.default.fire("Permisos","Tu usuario no es admin o el token expir\xF3.","warning"):Mt.default.fire("Error",a.error?.mensaje||"No se pudo autorizar turno extra.","error")}}))}finalizarTurnoCaja(){this.data?.corte?._id&&(this.cargando=!0,this.http.put(`${F.apiUrl}/cortes/${this.data.corte._id}/finalizar/true`,{},{headers:this.data.headers}).subscribe({next:()=>{this.cargando=!1,this.dialogRef.close(!0)},error:n=>{this.cargando=!1,console.error("Error finalizando turno",n)}}))}num(n){return n==null?0:Number(n)}get totales(){let n=this.data?.modo==="cerrado"?this.data?.corte??{}:this.data?.cortePreview??{};return{ventasEfectivo:this.num(n.ventasEfectivo),ventasTarjeta:this.num(n.ventasTarjeta),ventasTransferencia:this.num(n.ventasTransferencia),ventasVale:this.num(n.ventasVale),devolucionesEfectivo:this.num(n.devolucionesEfectivo),devolucionesVale:this.num(n.devolucionesVale),pedidosEfectivo:this.num(n.pedidosEfectivo),pedidosTarjeta:this.num(n.pedidosTarjeta),pedidosTransferencia:this.num(n.pedidosTransferencia),pedidosVale:this.num(n.pedidosVale),pedidosCanceladosEfectivo:this.num(n.pedidosCanceladosEfectivo),pedidosCanceladosVale:this.num(n.pedidosCanceladosVale),totalEfectivoEnCaja:this.num(n.totalEfectivoEnCaja),totalTarjeta:this.num(n.totalTarjeta),totalTransferencia:this.num(n.totalTransferencia),totalVale:this.num(n.totalVale),totalRecargas:this.num(n.totalRecargas),abonosMonederos:this.num(n.abonosMonederos)}}static \u0275fac=function(t){return new(t||r)(T(ht),T(ut),T(O))};static \u0275cmp=A({type:r,selectors:[["app-corte-detalle-dialog"]],decls:42,vars:19,consts:[["previa",""],[2,"background-color","azure"],[1,"titulo-container",2,"margin-top","1rem"],[1,"titulo"],[2,"margin-left","1rem","margin-right","1rem"],[1,"general-list",2,"color","blue"],[1,"general-line"],[1,"general-label"],[1,"general-value"],[1,"general-value","money"],[4,"ngIf","ngIfElse"],["align","end"],["class","btn-amarillo","style","margin-right: 20px;",3,"disabled","click",4,"ngIf"],["class","btn-verde","style","margin-right: 20px;",3,"disabled","click",4,"ngIf"],[1,"btn-gris",3,"click","disabled"],[2,"color","rgb(1, 83, 41)"],[2,"color","blue","font-size","medium","font-style","italic"],[1,"kv-grid",2,"color","rgb(1, 83, 41)"],[1,"kv-label"],[1,"kv-value"],[1,"kv-grid",2,"color","red","border-bottom","1px solid #0453b3"],[1,"primer-grid",2,"color","rgb(1, 83, 41)"],[1,"primer-label"],[1,"primer-value",2,"color","red"],[1,"btn-amarillo",2,"margin-right","20px",3,"click","disabled"],[1,"btn-verde",2,"margin-right","20px",3,"click","disabled"]],template:function(t,e){if(t&1){let a=E();i(0,"div",1)(1,"div",2)(2,"h2",3),s(3),o()(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),s(8,"Responsable:"),o(),i(9,"div",8),s(10),o()(),i(11,"div",6)(12,"div",7),s(13,"Fecha inicio:"),o(),i(14,"div",8),s(15),u(16,"date"),o()(),i(17,"div",6)(18,"div",7),s(19,"Fecha fin:"),o(),i(20,"div",8),s(21),u(22,"date"),o()(),i(23,"div",6)(24,"div",7),s(25,"Efectivo inicial:"),o(),i(26,"div",9),s(27),u(28,"currency"),o()(),i(29,"div",6)(30,"div",7),s(31,"Turno extra autorizado:"),o(),i(32,"div",8),s(33),o()()(),y(34,ta,108,54,"ng-container",10)(35,ea,107,54,"ng-template",null,0,rt),o(),i(37,"mat-dialog-actions",11),y(38,aa,2,1,"button",12)(39,oa,2,1,"button",13),i(40,"button",14),_("click",function(){return x(a),C(e.salir())}),s(41,"Salir"),o()()()}if(t&2){let a=nt(36);d(3),_t(" ",e.data.modo==="cerrado"?"Corte de caja":"Previo de corte de caja"," "),d(7),c((e.data.corte==null||e.data.corte.usuario==null?null:e.data.corte.usuario.nombre)||"N/A"),d(5),c(V(16,11,e.data.corte==null?null:e.data.corte.fechaInicio,"dd/MM/yyyy HH:mm")),d(6),_t(" ",e.data.corte!=null&&e.data.corte.fechaFin?V(22,14,e.data.corte==null?null:e.data.corte.fechaFin,"dd/MM/yyyy HH:mm"):"\u2014"," "),d(6),c(p(28,17,e.data.corte==null?null:e.data.corte.efectivoInicial)),d(6),c(e.data.corte!=null&&e.data.corte.turnoExtraAutorizado?"S\xED":"No"),d(),v("ngIf",e.data.modo==="cerrado")("ngIfElse",a),d(4),v("ngIf",e.data.modo==="cerrado"&&e.data.puedeAutorizarTurnoExtra),d(),v("ngIf",e.data.modo==="previo"),d(),v("disabled",e.cargando)}},dependencies:[Pe,Z,St,lt,dt,ct,st],styles:[".kv-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:130px 1fr 130px 1fr;column-gap:40px;align-items:baseline;margin-bottom:1rem}.kv-label[_ngcontent-%COMP%]{font-weight:500}.kv-value[_ngcontent-%COMP%]{text-align:right}.primer-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr max-content;column-gap:16px;align-items:baseline}.primer-label[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.primer-value[_ngcontent-%COMP%]{text-align:right;white-space:nowrap}.general-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;margin-bottom:1rem;border-bottom:2px solid #0453b3}.general-line[_ngcontent-%COMP%]{display:grid;grid-template-columns:170px minmax(0,1fr);column-gap:16px;align-items:baseline}.general-label[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.general-value[_ngcontent-%COMP%]{text-align:left}"]})};function ia(r,n){if(r&1){let t=E();i(0,"button",17),_("click",function(){let a;x(t);let l=h();return C((a=l.filtroForm.get("fechaInicioDesde"))==null?null:a.setValue(""))}),D(1,"fa-icon",18),o()}if(r&2){let t=h();d(),v("icon",t.faTimes)}}function na(r,n){if(r&1){let t=E();i(0,"button",17),_("click",function(){let a;x(t);let l=h();return C((a=l.filtroForm.get("fechaInicioHasta"))==null?null:a.setValue(""))}),D(1,"fa-icon",18),o()}if(r&2){let t=h();d(),v("icon",t.faTimes)}}function ra(r,n){if(r&1){let t=E();i(0,"button",19),_("click",function(){let a;x(t);let l=h();return C((a=l.filtroForm.get("nombreUsuario"))==null?null:a.setValue(""))}),D(1,"fa-icon",18),o()}if(r&2){let t=h();d(),v("icon",t.faTimes)}}function sa(r,n){if(r&1){let t=E();i(0,"tr")(1,"td"),s(2),o(),i(3,"td"),s(4),u(5,"currency"),o(),i(6,"td"),s(7),u(8,"currency"),o(),i(9,"td"),s(10),u(11,"currency"),o(),i(12,"td"),s(13),u(14,"currency"),o(),i(15,"td"),s(16),u(17,"currency"),o(),i(18,"td"),s(19),u(20,"currency"),o(),i(21,"td"),s(22),u(23,"date"),o(),i(24,"td"),s(25),u(26,"date"),o(),i(27,"td")(28,"button",23),_("click",function(){let a=x(t).$implicit,l=h(2);return C(l.mostrarDetalle(a))}),D(29,"fa-icon",18),o(),i(30,"button",24),_("click",function(){let a=x(t).$implicit,l=h(2);return C(l.eliminarCorte(a))}),D(31,"fa-icon",18),o()()()}if(r&2){let t=n.$implicit,e=h(2);d(2),c((t.usuario==null?null:t.usuario.nombre)||"N/A"),d(2),c(p(5,12,t.efectivoInicial)),d(3),c(p(8,14,t.totalEfectivoEnCaja)),d(3),c(p(11,16,t.totalTarjeta)),d(3),c(p(14,18,t.totalTransferencia)),d(3),c(p(17,20,t.totalVale)),d(3),c(p(20,22,t.abonosMonederos)),d(3),c(V(23,24,t.fechaInicio,"dd/MM/yyyy HH:mm")),d(3),c(t.fechaFin?V(26,27,t.fechaFin,"dd/MM/yyyy HH:mm"):"abierto"),d(4),v("icon","eye"),d(),v("disabled",e.cargando),d(),v("icon","trash")}}function la(r,n){if(r&1&&(i(0,"div",20)(1,"table",21)(2,"thead")(3,"tr")(4,"th"),s(5,"Usuario"),o(),i(6,"th"),s(7,"Efec. inicial"),o(),i(8,"th"),s(9,"Efectivo"),o(),i(10,"th"),s(11,"Tarjeta"),o(),i(12,"th"),s(13,"Transferencia"),o(),i(14,"th"),s(15,"Monedero"),o(),i(16,"th"),s(17,"Abonos Monedero"),o(),i(18,"th"),s(19,"Fecha Inicio"),o(),i(20,"th"),s(21,"Fecha Fin"),o(),D(22,"th"),o()(),i(23,"tbody"),y(24,sa,32,30,"tr",22),o()()()),r&2){let t=h();d(24),v("ngForOf",t.cortes)}}function da(r,n){r&1&&(i(0,"p",25),s(1,"No hay cortes de caja para mostrar."),o())}var ze=class r{constructor(n,t,e,a){this.http=n;this.fb=t;this.dialog=e;let l=M=>{let Ve=M.getFullYear(),Le=String(M.getMonth()+1).padStart(2,"0"),Ne=String(M.getDate()).padStart(2,"0");return`${Ve}-${Le}-${Ne}`},m=new Date,b=new Date(m);b.setDate(m.getDate()-1);let g=new Date(m);g.setDate(m.getDate()+1),this.filtroForm=this.fb.group({fechaInicioDesde:[l(b)],fechaInicioHasta:[l(g)],nombreUsuario:[""]}),a.addIcons(ce,me,pe,xt,ue)}fechaInicioDesde="";fechaInicioHasta="";filtroUsuario="";filtroForm;cargando=!1;faTimes=xt;farmaciaId;usuario;cortes=[];ngOnInit(){this.buscarCortes()}buscarCortes(){let n=localStorage.getItem("auth_token")||"",t=new mt({"x-auth-token":n}),{fechaInicioDesde:e,fechaInicioHasta:a,nombreUsuario:l}=this.filtroForm.value,m={fechaInicioDesde:e,fechaInicioHasta:a};l&&l.trim().length>2&&(m.nombreUsuario=l.trim()),this.cargando=!0,this.http.get(`${F.apiUrl}/cortes/filtrados`,{headers:t,params:m}).subscribe({next:b=>{this.cortes=b.cortes,this.cargando=!1},error:b=>{console.error("Error al buscar cortes:",b),j.default.fire("Error","No se pudieron cargar los cortes de caja.","error"),this.cargando=!1}})}esFechaDeHoy(n){if(!n)return!1;let t=new Date,e=new Date(n);return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}mostrarDetalle(n){let t=localStorage.getItem("auth_token")||"",e=new mt({"x-auth-token":t}),a=typeof n.usuario=="string"?n.usuario:n.usuario?._id;if(!a){j.default.fire({icon:"warning",title:"Dato faltante",text:"No se encontr\xF3 el usuario del corte.",timer:1600,timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1});return}if(n.fechaFin){this.dialog.open(X,{width:"720px",disableClose:!0,data:{modo:"cerrado",corte:n,puedeAutorizarTurnoExtra:this.esFechaDeHoy(n.fechaFin)&&!n.turnoExtraAutorizado,headers:e,usuarioId:a}}).afterClosed().subscribe(l=>{l&&this.buscarCortes()});return}this.http.put(`${F.apiUrl}/cortes/${n._id}/finalizar/false`,{},{headers:e}).subscribe({next:l=>{let m=this.normalizarPreview(l);console.log("corte de caja previo Normalizado:",m),this.dialog.open(X,{width:"720px",disableClose:!0,data:{modo:"previo",corte:n,cortePreview:m,headers:e,usuarioId:typeof n.usuario=="string"?n.usuario:n.usuario?._id||""}}).afterClosed().subscribe(b=>{b&&this.buscarCortes()})},error:l=>{console.error("Error obteniendo preview de corte:",l),j.default.fire("Error","No se pudo obtener el previo del corte.","error")}})}eliminarCorte(n){n?._id&&j.default.fire({title:"Eliminar corte",html:`
      <div style="text-align:left">
        <p><b>Usuario:</b> ${n.usuario?.nombre??"N/A"}</p>
        <p><b>Inicio:</b> ${new Date(n.fechaInicio).toLocaleString()}</p>
        <p><b>Fin:</b> ${n.fechaFin?new Date(n.fechaFin).toLocaleString():"\u2014"}</p>
      </div>
      <p style="margin-top:8px;color:#b91c1c;">Esta acci\xF3n no se puede deshacer.</p>
    `,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#d33"}).then(t=>{if(!t.isConfirmed)return;let e=localStorage.getItem("auth_token")||"",a=new mt({"x-auth-token":e});this.cargando=!0,this.http.delete(`${F.apiUrl}/cortes/${n._id}`,{headers:a}).subscribe({next:l=>{this.cargando=!1,j.default.fire({icon:"success",title:"Eliminado",text:"Corte de caja eliminado correctamente.",timer:1600,timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1}),this.buscarCortes()},error:l=>{this.cargando=!1;let m=l?.error?.mensaje||"No se pudo eliminar el corte";j.default.fire("Error",m,"error")}})})}normalizarPreview(n){let t=n?.preview??n?.data??n?.totales??n?.resumen??n?.result??n?.corte??n;if(!t||typeof t!="object")return{ventasEfectivo:0,ventasTarjeta:0,ventasTransferencia:0,ventasVale:0,devolucionesEfectivo:0,devolucionesVale:0,pedidosEfectivo:0,pedidosTarjeta:0,pedidosTransferencia:0,pedidosVale:0,pedidosCanceladosEfectivo:0,pedidosCanceladosVale:0,totalEfectivoEnCaja:0,totalTarjeta:0,totalTransferencia:0,totalVale:0,totalRecargas:0,abonosMonederos:0};let e=(m,b)=>{for(let g of b)if(m?.[g]!=null)return m[g]},a=m=>{if(m==null)return 0;if(typeof m=="number")return m;if(typeof m=="string"){let b=m.trim().replace(/\s/g,"").replace(",","."),g=Number(b);return isNaN(g)?0:g}return Number(m)||0},l=(typeof t.totales=="object"?t.totales:void 0)??(typeof t.resumen=="object"?t.resumen:void 0)??t;return{ventasEfectivo:a(e(l,["ventasEfectivo","ventas_efectivo","ventasEfe"])),ventasTarjeta:a(e(l,["ventasTarjeta","ventas_tarjeta","ventasTj"])),ventasTransferencia:a(e(l,["ventasTransferencia","ventas_transferencia","ventasTransf"])),ventasVale:a(e(l,["ventasVale","ventasMonedero","ventas_monedero","ventasVales"])),devolucionesEfectivo:a(e(l,["devolucionesEfectivo","devoluciones_efectivo","devEfectivo"])),devolucionesVale:a(e(l,["devolucionesVale","devolucionesMonedero","devoluciones_monedero","devVales"])),pedidosEfectivo:a(e(l,["pedidosEfectivo","pedidos_efectivo"])),pedidosTarjeta:a(e(l,["pedidosTarjeta","pedidos_tarjeta"])),pedidosTransferencia:a(e(l,["pedidosTransferencia","pedidos_transferencia"])),pedidosVale:a(e(l,["pedidosVale","pedidosMonedero","pedidos_monedero"])),pedidosCanceladosEfectivo:a(e(l,["pedidosCanceladosEfectivo","pedidos_cancelados_efectivo"])),pedidosCanceladosVale:a(e(l,["pedidosCanceladosVale","pedidosCanceladosMonedero","pedidos_cancelados_monedero"])),totalEfectivoEnCaja:a(e(l,["totalEfectivoEnCaja","total_efectivo_en_caja","totalEfectivo"])),totalTarjeta:a(e(l,["totalTarjeta","total_tarjeta"])),totalTransferencia:a(e(l,["totalTransferencia","total_transferencia"])),totalVale:a(e(l,["totalVale","totalMonedero","total_monedero"])),totalRecargas:a(e(l,["totalRecargas","recargas","total_recargas"])),abonosMonederos:a(e(l,["abonosMonederos","abonosMonedero","abonos_monedero"]))}}static \u0275fac=function(t){return new(t||r)(T(ut),T(oe),T(K),T(se))};static \u0275cmp=A({type:r,selectors:[["app-cortes-de-caja"]],decls:29,vars:6,consts:[["sinResultados",""],[1,"cortes-caja-container"],[1,"titulo-container"],[1,"titulo"],[1,"row","mb-2",3,"formGroup"],[1,"col-md-3"],[1,"d-flex","align-items-center","position-relative","w-100"],[1,"me-2","mb-0",2,"white-space","nowrap"],["type","date","formControlName","fechaInicioDesde",1,"form-control","pe-5","flex-grow-1"],["type","button","class","btn-icon-chico btn-sm btn-light position-absolute top-50 end-0 translate-middle-y btn-rojo-chico","style","z-index: 2; margin-right: 6px;",3,"click",4,"ngIf"],["type","date","formControlName","fechaInicioHasta",1,"form-control","pe-5","flex-grow-1"],[1,"col-md-4"],["type","text","formControlName","nombreUsuario",1,"form-control","pe-4","flex-grow-1"],["type","button","class","btn-icon-chico btn-sm btn-light position-absolute top-50 end-0 translate-middle-y btn-rojo-chico",3,"click",4,"ngIf"],[1,"col-md-2"],[1,"btn-gris",3,"click"],["class","mt-3 d-flex justify-content-center",4,"ngIf","ngIfElse"],["type","button",1,"btn-icon-chico","btn-sm","btn-light","position-absolute","top-50","end-0","translate-middle-y","btn-rojo-chico",2,"z-index","2","margin-right","6px",3,"click"],[3,"icon"],["type","button",1,"btn-icon-chico","btn-sm","btn-light","position-absolute","top-50","end-0","translate-middle-y","btn-rojo-chico",3,"click"],[1,"mt-3","d-flex","justify-content-center"],[1,"tabla","mx-auto"],[4,"ngFor","ngForOf"],["matTooltip","Vista del corte",1,"btn-icon-chico","btn-verde-chico",3,"click"],["matTooltip","Eliminar corte",1,"btn-icon-chico","btn-rojo-chico",3,"click","disabled"],[2,"color","brown"]],template:function(t,e){if(t&1){let a=E();i(0,"div",1)(1,"div",2)(2,"h1",3),s(3,"Cortes de Caja"),o()(),i(4,"form",4)(5,"div",5)(6,"div",6)(7,"label",7),s(8,"Desde:"),o(),D(9,"input",8),y(10,ia,2,1,"button",9),o()(),i(11,"div",5)(12,"div",6)(13,"label",7),s(14,"Hasta:"),o(),D(15,"input",10),y(16,na,2,1,"button",9),o()(),i(17,"div",11)(18,"div",6)(19,"label",7),s(20,"Usuario:"),o(),D(21,"input",12),y(22,ra,2,1,"button",13),o()(),i(23,"div",14)(24,"button",15),_("click",function(){return x(a),C(e.buscarCortes())}),s(25,"Buscar"),o()()(),y(26,la,25,1,"div",16)(27,da,2,0,"ng-template",null,0,rt),o()}if(t&2){let a,l,m,b=nt(28);d(4),v("formGroup",e.filtroForm),d(6),v("ngIf",(a=e.filtroForm.get("fechaInicioDesde"))==null?null:a.value),d(6),v("ngIf",(l=e.filtroForm.get("fechaInicioHasta"))==null?null:l.value),d(6),v("ngIf",(m=e.filtroForm.get("nombreUsuario"))==null?null:m.value),d(4),v("ngIf",e.cortes&&e.cortes.length>0)("ngIfElse",b)}},dependencies:[ct,Kt,st,dt,lt,ie,te,Zt,Xt,Jt,ne,ee,ae,de,le,Ee,we,Z],encapsulation:2})};export{ze as CortesDeCajaComponent};
