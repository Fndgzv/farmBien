import{a as H}from"./chunk-XEMPKELE.js";import{$c as G,Ab as g,Ad as U,Bb as E,Bc as k,Cc as w,Ec as F,Fc as M,Gc as N,Ib as S,Ja as a,Jc as O,Mc as V,Na as b,Pc as T,Ua as C,Xa as _,Zc as z,_c as D,ad as Q,bd as j,cb as c,cd as B,d as K,db as P,dd as L,ec as y,fc as A,gb as i,hb as t,ia as v,ib as s,ja as f,lb as h,ld as $,mc as I,nb as m,ob as p,pd as q,vd as R,zb as n}from"./chunk-UYGEFWM3.js";var u=K(Q());var W=()=>[];function X(l,o){if(l&1){let e=h();i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),n(4),t(),i(5,"td"),n(6),t(),i(7,"td"),n(8),t(),i(9,"td")(10,"button",25),m("click",function(){let d=v(e).$implicit,x=p();return f(x.editar(d))}),s(11,"fa-icon",3),t()()()}if(l&2){let e=o.$implicit;a(2),g(e.nombre),a(2),g(e.contacto||"-"),a(2),g(e.telefono||"-"),a(2),g(e.domicilio||"-"),a(3),c("icon","pen")}}function Y(l,o){if(l&1){let e=h();i(0,"li",28)(1,"button",31),m("click",function(){let d=v(e).index,x=p(2);return f(x.paginaActual=d+1)}),n(2),t()()}if(l&2){let e=o.index,r=p(2);a(),P("activo",r.paginaActual===e+1),a(),E(" ",e+1," ")}}function Z(l,o){if(l&1){let e=h();i(0,"nav",26)(1,"ul",27)(2,"li",28)(3,"button",29),m("click",function(){v(e);let d=p();return f(d.paginaActual=d.paginaActual-1)}),n(4," Anterior "),t()(),_(5,Y,3,3,"li",30),i(6,"li",28)(7,"button",29),m("click",function(){v(e);let d=p();return f(d.paginaActual=d.paginaActual+1)}),n(8," Siguiente "),t()()()()}if(l&2){let e=p();a(2),P("disabled",e.paginaActual===1),a(),c("disabled",e.paginaActual===1),a(2),c("ngForOf",S(7,W).constructor(e.totalPaginas)),a(),P("disabled",e.paginaActual===e.totalPaginas),a(),c("disabled",e.paginaActual===e.totalPaginas)}}var J=class l{constructor(o,e,r){this.fb=o;this.proveedorService=e;this.library=r;r.addIcons(q,U,R,$)}proveedores=[];formProveedor=new N({});modoEdicion=!1;proveedorEditandoId=null;guardando=!1;paginaActual=1;proveedoresPorPagina=10;ordenAscendente=!0;ngOnInit(){this.formProveedor=this.fb.group({nombre:["",w.required],contacto:[""],telefono:[""],domicilio:[""]}),this.cargarProveedores()}cargarProveedores(){this.proveedorService.obtenerProveedores().subscribe({next:o=>this.proveedores=o,error:()=>u.default.fire("Error","No se pudieron cargar los proveedores","error")})}get proveedoresPaginados(){let o=(this.paginaActual-1)*this.proveedoresPorPagina;return this.proveedores.slice(o,o+this.proveedoresPorPagina)}get totalPaginas(){return Math.ceil(this.proveedores.length/this.proveedoresPorPagina)}ordenarPorNombre(){this.ordenAscendente=!this.ordenAscendente,this.proveedores.sort((o,e)=>{let r=o.nombre.toLowerCase(),d=e.nombre.toLowerCase();return this.ordenAscendente?r.localeCompare(d):d.localeCompare(r)}),this.paginaActual=1}abrirModalAgregar(){this.modoEdicion=!1,this.proveedorEditandoId=null,this.formProveedor.reset();let o=document.getElementById("modalProveedor");o&&new bootstrap.Modal(o,{backdrop:"static",keyboard:!1}).show()}editar(o){this.modoEdicion=!0,this.proveedorEditandoId=o._id||null,this.formProveedor.patchValue({nombre:o.nombre,contacto:o.contacto||"",telefono:o.telefono||"",domicilio:o.domicilio||""});let e=document.getElementById("modalProveedor");e&&new bootstrap.Modal(e,{backdrop:"static",keyboard:!1}).show()}guardar(){if(this.formProveedor.invalid||this.guardando)return;this.guardando=!0;let o=this.formProveedor.value,e=()=>{let r=document.getElementById("modalProveedor");r&&bootstrap.Modal.getInstance(r)?.hide(),this.formProveedor.reset(),this.cargarProveedores(),this.guardando=!1,this.modoEdicion=!1,this.proveedorEditandoId=null};this.modoEdicion&&this.proveedorEditandoId?this.proveedorService.actualizarProveedor(this.proveedorEditandoId,o).subscribe({next:()=>u.default.fire("Actualizado","Proveedor actualizado","success").then(e),error:()=>{u.default.fire("Error","No se pudo actualizar","error"),this.guardando=!1}}):this.proveedorService.crearProveedor(o).subscribe({next:()=>u.default.fire("Agregado","Proveedor creado","success").then(e),error:()=>{u.default.fire("Error","No se pudo crear","error"),this.guardando=!1}})}static \u0275fac=function(e){return new(e||l)(b(z),b(H),b(j))};static \u0275cmp=C({type:l,selectors:[["app-proveedores"]],decls:54,vars:8,consts:[[1,"container","mt-4"],[1,"titulo"],[1,"btn-verde",3,"click"],[3,"icon"],[1,"tabla"],[2,"cursor","pointer",3,"click"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-3",4,"ngIf"],["id","modalProveedor","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","p-3",2,"background-color","azure"],[1,"modal-header"],[1,"modal-title","titulo"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mb-2"],["type","text","formControlName","nombre",1,"form-control"],["type","text","formControlName","contacto",1,"form-control"],["type","text","formControlName","telefono",1,"form-control"],["type","text","formControlName","domicilio",1,"form-control"],[1,"modal-footer","d-flex","justify-content-between"],["data-bs-dismiss","modal",1,"btn-rojo"],[1,"btn-gris",3,"click","disabled"],[1,"btn-icon-chico","btn-gris-chico",3,"click"],[1,"d-flex","justify-content-center","mt-3"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click","disabled"],["class","page-item",4,"ngFor","ngForOf"],[1,"page-link",3,"click"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"h2",1),n(2,"Mantenimiento de Proveedores"),t(),i(3,"button",2),m("click",function(){return r.abrirModalAgregar()}),s(4,"fa-icon",3),n(5," Agregar Proveedor "),t(),i(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),m("click",function(){return r.ordenarPorNombre()}),n(10," Nombre "),s(11,"fa-icon",3),t(),i(12,"th"),n(13,"Contacto"),t(),i(14,"th"),n(15,"Tel\xE9fono"),t(),i(16,"th"),n(17,"Domicilio"),t(),i(18,"th"),n(19,"Acciones"),t()()(),i(20,"tbody"),_(21,X,12,5,"tr",6),t()(),_(22,Z,9,8,"nav",7),t(),i(23,"div",8)(24,"div",9)(25,"div",10)(26,"div",11)(27,"h5",12),n(28),t(),s(29,"button",13),t(),i(30,"div",14)(31,"form",15)(32,"div",16)(33,"div",17)(34,"label"),n(35,"Nombre:"),t(),s(36,"input",18),t(),i(37,"div",17)(38,"label"),n(39,"Contacto:"),t(),s(40,"input",19),t(),i(41,"div",17)(42,"label"),n(43,"Tel\xE9fono:"),t(),s(44,"input",20),t(),i(45,"div",17)(46,"label"),n(47,"Domicilio:"),t(),s(48,"input",21),t()()()(),i(49,"div",22)(50,"button",23),n(51,"Cancelar"),t(),i(52,"button",24),m("click",function(){return r.guardar()}),n(53),t()()()()()),e&2&&(a(4),c("icon","plus"),a(7),c("icon",r.ordenAscendente?"sort-alpha-down":"sort-alpha-up"),a(10),c("ngForOf",r.proveedoresPaginados),a(),c("ngIf",r.totalPaginas>1),a(6),E(" ",r.modoEdicion?"Editar Proveedor":"Agregar Proveedor"," "),a(3),c("formGroup",r.formProveedor),a(21),c("disabled",r.formProveedor.invalid||r.guardando),a(),E(" ",r.guardando?"Guardando...":r.modoEdicion?"Actualizar":"Guardar"," "))},dependencies:[I,y,A,G,O,k,F,M,V,T,D,L,B],styles:[".pagination[_ngcontent-%COMP%]{text-align:center;font-size:large;font-weight:500;color:#8a2be2}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#0ff;background-color:#8a2be2}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .pagination[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6;color:gray}.pagination[_ngcontent-%COMP%]   button.activo[_ngcontent-%COMP%]{background-color:#fff;color:#8a2be2;font-weight:700;border:2px solid blueviolet;transition:all .3s ease}"]})};export{J as ProveedoresComponent};
