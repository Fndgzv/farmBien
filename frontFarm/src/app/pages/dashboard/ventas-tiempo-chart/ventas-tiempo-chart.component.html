<h3 class="subtitulo">Ingresos por tiempo</h3>
<div class="filtros">
    <label>Farmacia</label>
    <select [(ngModel)]="farmaciaSeleccionada" (change)="cargar()">
        <option value="ALL">Todas</option>
        <option *ngFor="let f of farmacias" [value]="f._id">
            {{ f.nombre }}
        </option>
    </select>

    <label>Desde</label>
    <input type="date" [(ngModel)]="desde" (change)="cargar()">

    <label>Hasta</label>
    <input type="date" [(ngModel)]="hasta" (change)="cargar()">

    <select [(ngModel)]="escala" (change)="cargar()">
        <option value="hora">Por hora</option>
        <option value="dia">Por dÃ­a</option>
        <option value="mes">Por mes</option>
        <option value="anio">Por aÃ±o</option>
    </select>

    <!-- <div class="col-md-1 text-end mt-3"> -->
        <button class="btn-gris"
                matTooltip="Recalcular datos" (click)="cargar()">Aplicar
        </button>
    <!-- </div> -->
</div>

<div class="kpis">
  <div class="kpi-card ventas" matTooltip="ventas + pedidos âˆ’ devoluciones/cancelaciones">
    <span class="kpi-title">Ingresos netos: 
        <span class="kpi-info" aria-hidden="true">â“˜</span>
    </span>
    <span class="kpi-value">
      {{ kpiIngresosNetos | currency:'MXN':'symbol-narrow' }}
    </span>
  </div>

  <div class="kpi-card utilidad">
    <span class="kpi-title">Utilidad: </span>
    <span class="kpi-value">
      {{ kpiUtilidad | currency:'MXN':'symbol-narrow' }}
    </span>
  </div>

  <div class="kpi-card margen">
    <span class="kpi-title">Margen: </span>
    <span class="kpi-value">
      {{ kpiMargen | number:'1.1-2' }} %
    </span>
  </div>

  <div class="kpi-card ventas-num">
    <span class="kpi-title">Ventas: </span>
    <span class="kpi-value">
      {{ kpiVentas }}
    </span>
  </div>

  <div class="kpi-card pedidos-num">
    <span class="kpi-title">Pedidos (folios): </span>
    <span class="kpi-value">
      {{ kpiPedidosUnicos }}
    </span>
  </div>

  <div class="kpi-card pedidos-movs" matTooltip="abonos + liquidaciones">
    <span class="kpi-title">Cobros pedidos: 
        <span class="kpi-info" aria-hidden="true">â“˜</span>
    </span>
    <span class="kpi-value">
      {{ kpiPedidosMovs }}
    </span>
  </div>
</div>

<div *ngIf="horaPico">
  ðŸŸ¢ {{ etiquetaAlta }}:
  {{ formatearPeriodo(horaPico.periodo) }} â€“
  ${{ horaPico.ingresos }}
  ({{ horaPico.ventas }} ventas)
</div>

<div *ngIf="horaMuerta">
  ðŸ”´ {{ etiquetaBaja }}:
  {{ formatearPeriodo(horaMuerta.periodo) }} â€“
  ${{ horaMuerta.ingresos }}
  ({{ horaMuerta.ventas }} ventas)
</div>


<div class="chart-wrapper">
  <apx-chart
    style="width: 100%; height: 100%; display: block"
    [series]="chartOptions.series"
    [chart]="chartOptions.chart"
    [xaxis]="chartOptions.xaxis"
    [yaxis]="chartOptions.yaxis"
    [stroke]="chartOptions.stroke"
    [tooltip]="chartOptions.tooltip"
    [dataLabels]="chartOptions.dataLabels"
    [markers]="chartOptions.markers"
    [colors]="chartOptions.colors">
  </apx-chart>
</div>



