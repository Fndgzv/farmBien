<div class="sidebar" [class.open]="open">
  <ul>
    <img [src]="farmaciaImagen" alt="Farmacias del Bienestar" class="sidebar-image">

    <li *ngIf="userRol === 'admin'" class="menu-dashboard">
      <span (click)="toggleMenu('dashboard')">
        Dashboard {{ expandedMenu === 'dashboard' ? '▲' : '▶' }}
      </span>
    </li>

    <ul *ngIf="expandedMenu === 'dashboard'" class="submenu-dashboard">
      <li>Visión general
          <fa-icon [icon]="'chart-line'"></fa-icon>
      </li>

      <li>Ranking productos
      </li>
<!--       <li [routerLink]="'/dashboard/ventas-tiempo'"
          routerLinkActive="active">Visión general
          <fa-icon [icon]="'chart-line'"></fa-icon>
      </li>

      <li [routerLink]="'/dashboard/ranking-productos'" 
          routerLinkActive="active">Ranking productos
      </li> -->
    </ul>
    
    
    <!-- Catálogos (solo admin) -->
    <li *ngIf="userRol === 'admin'" class="menu-title">
      <span (click)="toggleMenu('catalogs')">
        Catálogos {{ expandedMenu === 'catalogs' ? '▲' : '▶' }}
      </span>
    </li>

    <ul *ngIf="expandedMenu === 'catalogs'" class="submenu">
      <li *ngIf="userRol === 'admin'" class="has-submenu">
        <span (click)="toggleSubMenu('almacen')">
          Almacén <fa-icon [icon]="'warehouse'" class="menu-icon"></fa-icon>
          {{ expandedSubMenu === 'almacen' ? '▲' : '▶' }}
        </span>
        <ul *ngIf="expandedSubMenu === 'almacen'" class="submenu">
          <li [routerLink]="'/compras'" routerLinkActive="active" class="submenu-item">
            Compras <fa-icon [icon]="'truck'" class="menu-icon"></fa-icon>
          </li>
          <li [routerLink]="'/surtir-farmacia'" routerLinkActive="active" class="submenu-item">
            Surtir Farmacia <fa-icon [icon]="'shopping-cart'" class="menu-icon"></fa-icon>
          </li>
          <li [routerLink]="'/ajustes-inventario'" routerLinkActive="active" class="submenu-item">
            Ajustes inventario <fa-icon [icon]="'file-signature'" class="menu-icon"></fa-icon>
          </li>
          <li [routerLink]="'/reporte-presupuesto'" routerLinkActive="active" class="submenu-item">
            Presupuesto compras <fa-icon [icon]="'file-signature'" class="menu-icon"></fa-icon>
          </li>
        </ul>
      </li>

      <li [routerLink]="'/proveedores'" routerLinkActive="active">Proveedores
        <fa-icon [icon]="'truck'" class="menu-icon"></fa-icon>
      </li>


      <li class="has-submenu">
        <span (click)="toggleSubMenu('farmacias')">
          Farmacias <fa-icon [icon]="'warehouse'" class="menu-icon"></fa-icon>
          {{ expandedSubMenu === 'farmacias' ? '▲' : '▶' }}
        </span>
        <ul *ngIf="expandedSubMenu === 'farmacias'" class="submenu">
          <li [routerLink]="'/farmacias'" routerLinkActive="active" class="submenu-item">
            Mantenimiento <fa-icon [icon]="'truck'" class="menu-icon"></fa-icon>
          </li>
          <li [routerLink]="'/inventario-farmacias'" routerLinkActive="active" class="submenu-item">
            Inventario <fa-icon [icon]="'file-signature'" class="menu-icon"></fa-icon>
          </li>
        </ul>
      </li>

      <li [routerLink]="'/usuarios'" routerLinkActive="active">Usuarios <fa-icon [icon]="'user'"
          class="menu-icon"></fa-icon>
      </li>

      <li [routerLink]="'/clientes'" routerLinkActive="active">Clientes - reportes<fa-icon [icon]="'users'"
          class="menu-icon"></fa-icon>
      </li>

      <li [routerLink]="'/cortes-de-caja'" routerLinkActive="active">Cortes de caja
        <fa-icon [icon]="'file-signature'" class="menu-icon"></fa-icon>
      </li>

    </ul>

    <!-- Movimientos -->
    <li class="menu-title">
      <span (click)="toggleMenu('movements')">
        Movimientos {{ expandedMenu === 'movements' ? '▲' : '▶' }}
      </span>
    </li>
    <ul *ngIf="expandedMenu === 'movements'" class="submenu">

      <li *ngIf="userRol === 'admin' || userRol === 'empleado'" [routerLink]="'/ventas'" routerLinkActive="active">
        Ventas <fa-icon [icon]="'cash-register'" class="menu-icon"></fa-icon>
      </li>
      <li *ngIf="userRol === 'admin' || userRol === 'empleado'" [routerLink]="'/devoluciones'"
        routerLinkActive="active">
        Devoluciones <fa-icon [icon]="'undo'" class="menu-icon"></fa-icon>
      </li>
      <li *ngIf="userRol === 'admin' || userRol === 'empleado'" [routerLink]="'/pedidos'" routerLinkActive="active">
        Pedidos especiales<fa-icon [icon]="'shopping-cart'" class="menu-icon"></fa-icon>
      </li>
      <li *ngIf="userRol === 'admin' || userRol === 'empleado'" [routerLink]="'/inicio-turno'"
        routerLinkActive="active">
        Corte de caja<fa-icon [icon]="'file-signature'" class="menu-icon"></fa-icon>
      </li>
      <li *ngIf="userRol === 'admin' || userRol === 'medico'">
        Consultas médicas <fa-icon [icon]="'stethoscope'" class="menu-icon"></fa-icon>
      </li>
      <li *ngIf="userRol === 'admin' || userRol === 'medico'">
        Recetas <fa-icon [icon]="'prescription'" class="menu-icon"></fa-icon>
      </li>
    </ul>


    <!-- Reportes (solo admin) -->
    <li *ngIf="userRol === 'admin'" class="menu-title">
      <span (click)="toggleMenu('reports')">
        Reportes {{ expandedMenu === 'reports' ? '▲' : '▶' }}
      </span>
    </li>
    <ul *ngIf="expandedMenu === 'reports'" class="submenu">


      <li *ngIf="userRol === 'admin'" class="has-submenu">
        <span (click)="toggleSubMenu('ventas')">
          Ventas - Pedidos <fa-icon [icon]="'cash-register'" class="menu-icon"></fa-icon>
          {{ expandedSubMenu === 'ventas' ? '▲' : '▶' }}
        </span>
        <ul *ngIf="expandedSubMenu === 'ventas'" class="submenu">
          <li [routerLink]="'reporte/ventas'" routerLinkActive="active" class="submenu-item">
            <span>Ventas<fa-icon [icon]="'cash-register'" class="menu-icon"></fa-icon></span>
          </li>
          <li [routerLink]="'/reporte/ventas-por-farmacia'" routerLinkActive="active" class="submenu-item">
            <span>Productos Ventas - Exist <fa-icon [icon]="icons.reporteVentas" class="menu-icon"></fa-icon></span>
          </li>
          <li [routerLink]="'reporte/ventas-producto'" routerLinkActive="active" class="submenu-item">
            <span>Un sólo producto<fa-icon [icon]="icons.faReceipt" class="menu-icon"></fa-icon></span>
          </li>
          <li [routerLink]="'reportes/devoluciones'" routerLinkActive="active" class="submenu-item">
            <span>Devoluciones ventas<fa-icon [icon]="'undo'" class="menu-icon"></fa-icon></span>
          </li>
          <li [routerLink]="'/reporte/pedidos'" routerLinkActive="active" class="submenu-item">
            <span>Pedidos<fa-icon [icon]="'shopping-cart'" class="menu-icon"></fa-icon></span>
          </li>
          <li [routerLink]="'reportes/cancelaciones'" routerLinkActive="active" class="submenu-item">
            <span>Cancelaciones pedidos<fa-icon [icon]="'undo'" class="menu-icon"></fa-icon></span>
          </li>
        </ul>
      </li>

      <li *ngIf="userRol === 'admin'" class="has-submenu">
        <span (click)="toggleSubMenu('compras')">
          Compras <fa-icon [icon]="'truck'" class="menu-icon"></fa-icon>
          {{ expandedSubMenu === 'compras' ? '▲' : '▶' }}
        </span>
        <ul *ngIf="expandedSubMenu === 'compras'" class="submenu">
          <li [routerLink]="'reporte/compras'" routerLinkActive="active" class="submenu-item">
            <span>Compras general<fa-icon [icon]="'shopping-cart'" class="menu-icon"></fa-icon></span>
          </li>

          <li [routerLink]="'reportes-compras'" routerLinkActive="active" class="submenu-item">
            <span>Compras resumen<fa-icon [icon]="'sack-dollar'" class="menu-icon"></fa-icon></span>
          </li>

          <li [routerLink]="'reportes/compras-historial-producto'" routerLinkActive="active" class="submenu-item">
            <span>Compras x Producto<fa-icon [icon]="'sack-dollar'" class="menu-icon"></fa-icon></span>
          </li>
        </ul>
      </li>

      <li *ngIf="userRol === 'admin'" class="has-submenu">
        <span (click)="toggleSubMenu('balance')">
          Balance <fa-icon [icon]="'scale-balanced'" class="menu-icon"></fa-icon>
          {{ expandedSubMenu === 'balance' ? '▲' : '▶' }}
        </span>
        <ul *ngIf="expandedSubMenu === 'balance'" class="submenu">
          <li [routerLink]="'reporte/resumen-utilidades'" routerLinkActive="active" class="submenu-item">
            <span>Resumen utilidades<fa-icon [icon]="'sack-dollar'" class="menu-icon"></fa-icon></span>
          </li>


          <li [routerLink]="'reporte/utilidades'" routerLinkActive="active" class="submenu-item">
            <span>TOP utilidades<fa-icon [icon]="'sack-dollar'" class="menu-icon"></fa-icon></span>
          </li>

          <li [routerLink]="'reportes/compras-ventas'" routerLinkActive="active" class="submenu-item">
            <span>Compras vs Ventas<fa-icon [icon]="'sack-dollar'" class="menu-icon"></fa-icon></span>
          </li>

          <li [routerLink]="'/reporte/inventario-fisico'" routerLinkActive="active" class="submenu-item">
            <span>Inventario físico <fa-icon [icon]="'scale-balanced'" class="menu-icon"></fa-icon></span>
          </li>
        </ul>

      </li>

      <li *ngIf="userRol === 'admin'" class="has-submenu">
        <span (click)="toggleSubMenu('etiquetas')">
          Etiquetas
          <fa-icon [icon]="faTags" class="menu-icon"></fa-icon>
          {{ expandedSubMenu === 'etiquetas' ? '▲' : '▶' }}
        </span>

        <ul *ngIf="expandedSubMenu === 'etiquetas'" class="submenu">
          <li [routerLink]="'etiquetas/print'" routerLinkActive="active" class="submenu-item">
            <span>Impresión <fa-icon [icon]="faPrint" class="menu-icon"></fa-icon></span>
          </li>
          <li [routerLink]="'etiquetas/design'" routerLinkActive="active" class="submenu-item">
            <span>Diseño <fa-icon [icon]="faPenRuler" class="menu-icon"></fa-icon></span>
          </li>
        </ul>
      </li>

    </ul>

  </ul>
</div>